!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.g=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function BigInteger(t,e,i){ClipperLib.biginteger_used=1,null!=t&&("number"==typeof t&&"undefined"==typeof e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}function am1(t,e,i,r,n,p){for(;--p>=0;){var o=e*this[t++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n}function am2(t,e,i,r,n,p){for(var o=32767&e,l=e>>15;--p>=0;){var s=32767&this[t],h=this[t++]>>15,u=l*s+h*o;s=o*s+((32767&u)<<15)+i[r]+(1073741823&n),n=(s>>>30)+(u>>>15)+l*h+(n>>>30),i[r++]=1073741823&s}return n}function am3(t,e,i,r,n,p){for(var o=16383&e,l=e>>14;--p>=0;){var s=16383&this[t],h=this[t++]>>14,u=l*s+h*o;s=o*s+((16383&u)<<14)+i[r]+n,n=(s>>28)+(u>>14)+l*h,i[r++]=268435455&s}return n}function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var i=BI_RC[t.charCodeAt(e)];return null==i?-1:i}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var r=t.length,n=!1,p=0;--r>=0;){var o=8==i?255&t[r]:intAt(t,r);0>o?"-"==t.charAt(r)&&(n=!0):(n=!1,0==p?this[this.t++]=o:p+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-p)-1)<<p,this[this.t++]=o>>this.DB-p):this[this.t-1]|=o<<p,p+=i,p>=this.DB&&(p-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,p>0&&(this[this.t-1]|=(1<<this.DB-p)-1<<p)),this.clamp(),n&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,p="",o=this.t,l=this.DB-o*this.DB%e;if(o-->0)for(l<this.DB&&(i=this[o]>>l)>0&&(n=!0,p=int2char(i));o>=0;)e>l?(i=(this[o]&(1<<l)-1)<<e-l,i|=this[--o]>>(l+=this.DB-e)):(i=this[o]>>(l-=e)&r,0>=l&&(l+=this.DB,--o)),i>0&&(n=!0),n&&(p+=int2char(i));return n?p:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function nbits(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var i,r=t%this.DB,n=this.DB-r,p=(1<<n)-1,o=Math.floor(t/this.DB),l=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>n|l,l=(this[i]&p)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=l,e.t=this.t+o+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var r=t%this.DB,n=this.DB-r,p=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&p)<<n,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&p)<<n),e.t=this.t-i,e.clamp()}function bnpSubTo(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);n>i;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function bnpMultiplyTo(t,e){var i=this.abs(),r=t.abs(),n=i.t;for(e.t=n+r.t;--n>=0;)e[n]=0;for(n=0;n<r.t;++n)e[n+i.t]=i.am(0,r[n],e,n,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,i){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=nbi());var p=nbi(),o=this.s,l=t.s,s=this.DB-nbits(r[r.t-1]);s>0?(r.lShiftTo(s,p),n.lShiftTo(s,i)):(r.copyTo(p),n.copyTo(i));var h=p.t,u=p[h-1];if(0!=u){var a=u*(1<<this.F1)+(h>1?p[h-2]>>this.F2:0),C=this.FV/a,f=(1<<this.F1)/a,d=1<<this.F2,L=i.t,P=L-h,b=null==e?nbi():e;for(p.dlShiftTo(P,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),BigInteger.ONE.dlShiftTo(h,b),b.subTo(p,p);p.t<h;)p[p.t++]=0;for(;--P>=0;){var m=i[--L]==u?this.DM:Math.floor(i[L]*C+(i[L-1]+d)*f);if((i[L]+=p.am(0,m,i,P,0,h))<m)for(p.dlShiftTo(P,b),i.subTo(b,i);i[L]<--m;)i.subTo(b,i)}null!=e&&(i.drShiftTo(h,e),o!=l&&BigInteger.ZERO.subTo(e,e)),i.t=h,i.clamp(),s>0&&i.rShiftTo(s,i),0>o&&BigInteger.ZERO.subTo(i,i)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,e){if(t>4294967295||1>t)return BigInteger.ONE;var i=nbi(),r=nbi(),n=e.convert(this),p=nbits(t)-1;for(n.copyTo(i);--p>=0;)if(e.sqrTo(i,r),(t&1<<p)>0)e.mulTo(r,n,i);else{var o=i;i=r,r=o}return e.revert(i)}function bnModPowInt(t,e){var i;return i=256>t||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,i)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=nbv(i),n=nbi(),p=nbi(),o="";for(this.divRemTo(r,n,p);n.signum()>0;)o=(i+p.intValue()).toString(t).substr(1)+o,n.divRemTo(r,n,p);return p.intValue().toString(t)+o}function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),r=Math.pow(e,i),n=!1,p=0,o=0,l=0;l<t.length;++l){var s=intAt(t,l);0>s?"-"==t.charAt(l)&&0==this.signum()&&(n=!0):(o=e*o+s,++p>=i&&(this.dMultiply(r),this.dAddOffset(o,0),p=0,o=0))}p>0&&(this.dMultiply(Math.pow(e,p)),this.dAddOffset(o,0)),n&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,i){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var r=new Array,n=7&t;r.length=(t>>3)+1,e.nextBytes(r),n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-->0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)8>r?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,i){var r,n,p=Math.min(t.t,this.t);for(r=0;p>r;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=p;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=p;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=cbit(this[i]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function bnpChangeBit(t,e){var i=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);n>i;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[i++]=r:-1>r&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),i=nbi();return this.divRemTo(t,e,i),new Array(e,i)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,i){t.multiplyTo(e,i)}function nSqrTo(t,e){t.squareTo(e)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;var n;for(n=i.t-this.t;n>r;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);n>r;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function bnpMultiplyUpperTo(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnModPow(t,e){var i,r,n=t.bitLength(),p=nbv(1);if(0>=n)return p;i=18>n?1:48>n?3:144>n?4:768>n?5:6,r=8>n?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var o=new Array,l=3,s=i-1,h=(1<<i)-1;if(o[1]=r.convert(this),i>1){var u=nbi();for(r.sqrTo(o[1],u);h>=l;)o[l]=nbi(),r.mulTo(u,o[l-2],o[l]),l+=2}var a,C,f=t.t-1,d=!0,L=nbi();for(n=nbits(t[f])-1;f>=0;){for(n>=s?a=t[f]>>n-s&h:(a=(t[f]&(1<<n+1)-1)<<s-n,f>0&&(a|=t[f-1]>>this.DB+n-s)),l=i;0==(1&a);)a>>=1,--l;if((n-=l)<0&&(n+=this.DB,--f),d)o[a].copyTo(p),d=!1;else{for(;l>1;)r.sqrTo(p,L),r.sqrTo(L,p),l-=2;l>0?r.sqrTo(p,L):(C=p,p=L,L=C),r.mulTo(L,o[a],p)}for(;f>=0&&0==(t[f]&1<<n);)r.sqrTo(p,L),C=p,p=L,L=C,--n<0&&(n=this.DB-1,--f)}return r.revert(p)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),p=i.getLowestSetBit();if(0>p)return e;for(p>n&&(p=n),p>0&&(e.rShiftTo(p,e),i.rShiftTo(p,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return p>0&&i.lShiftTo(p,i),i}function bnpModInt(t){if(0>=t)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var i=t.clone(),r=this.clone(),n=nbv(1),p=nbv(0),o=nbv(0),l=nbv(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(n.isEven()&&p.isEven()||(n.addTo(this,n),p.subTo(t,p)),n.rShiftTo(1,n)):p.isEven()||p.subTo(t,p),p.rShiftTo(1,p);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(t,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);i.compareTo(r)>=0?(i.subTo(r,i),e&&n.subTo(o,n),p.subTo(l,p)):(r.subTo(i,r),e&&o.subTo(n,o),l.subTo(p,l))}return 0!=r.compareTo(BigInteger.ONE)?BigInteger.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l}function bnIsProbablePrime(t){var e,i=this.abs();if(1==i.t&&i[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(i[0]==lowprimes[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<lowprimes.length;){for(var r=lowprimes[e],n=e+1;n<lowprimes.length&&lplim>r;)r*=lowprimes[n++];for(r=i.modInt(r);n>e;)if(r%lowprimes[e++]==0)return!1}return i.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger.ONE),i=e.getLowestSetBit();if(0>=i)return!1;var r=e.shiftRight(i);t=t+1>>1,t>lowprimes.length&&(t=lowprimes.length);for(var n=nbi(),p=0;t>p;++p){n.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=n.modPow(r,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(e)){for(var l=1;l++<i&&0!=o.compareTo(e);)if(o=o.modPowInt(2,this),0==o.compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0}var use_int32=!1,use_xyz=!1,use_lines=!0,use_deprecated=!1,ClipperLib={},isNode=!1;"undefined"!=typeof module&&module.exports?(module.exports=ClipperLib,isNode=!0):"undefined"!=typeof document?window.ClipperLib=ClipperLib:self.ClipperLib=ClipperLib;var navigator_appName;if(isNode){var nav="chrome";navigator_appName="Netscape"}else{var nav=navigator.userAgent.toString().toLowerCase();navigator_appName=navigator.appName}var browser={};browser.chrome=-1!=nav.indexOf("chrome")&&-1==nav.indexOf("chromium")?1:0,browser.chromium=-1!=nav.indexOf("chromium")?1:0,browser.safari=-1!=nav.indexOf("safari")&&-1==nav.indexOf("chrome")&&-1==nav.indexOf("chromium")?1:0,browser.firefox=-1!=nav.indexOf("firefox")?1:0,browser.firefox17=-1!=nav.indexOf("firefox/17")?1:0,browser.firefox15=-1!=nav.indexOf("firefox/15")?1:0,browser.firefox3=-1!=nav.indexOf("firefox/3")?1:0,browser.opera=-1!=nav.indexOf("opera")?1:0,browser.msie10=-1!=nav.indexOf("msie 10")?1:0,browser.msie9=-1!=nav.indexOf("msie 9")?1:0,browser.msie8=-1!=nav.indexOf("msie 8")?1:0,browser.msie7=-1!=nav.indexOf("msie 7")?1:0,browser.msie=-1!=nav.indexOf("msie ")?1:0,ClipperLib.biginteger_used=null;var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator_appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator_appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;9>=vv;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare;var Int128=BigInteger;if(Int128.prototype.IsNegative=function(){return-1==this.compareTo(Int128.ZERO)?!0:!1},Int128.op_Equality=function(t,e){return 0==t.compareTo(e)?!0:!1},Int128.op_Inequality=function(t,e){return 0!=t.compareTo(e)?!0:!1},Int128.op_GreaterThan=function(t,e){return t.compareTo(e)>0?!0:!1},Int128.op_LessThan=function(t,e){return t.compareTo(e)<0?!0:!1},Int128.op_Addition=function(t,e){return new Int128(t).add(new Int128(e))},Int128.op_Subtraction=function(t,e){return new Int128(t).subtract(new Int128(e))},Int128.Int128Mul=function(t,e){return new Int128(t).multiply(new Int128(e))},Int128.op_Division=function(t,e){return t.divide(e)},Int128.prototype.ToDouble=function(){return parseFloat(this.toString())},"undefined"==typeof Inherit)var Inherit=function(t,e){var i;if("undefined"==typeof Object.getOwnPropertyNames){for(i in e.prototype)("undefined"==typeof t.prototype[i]||t.prototype[i]==Object.prototype[i])&&(t.prototype[i]=e.prototype[i]);for(i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var r=Object.getOwnPropertyNames(e.prototype),n=0;n<r.length;n++)"undefined"==typeof Object.getOwnPropertyDescriptor(t.prototype,r[n])&&Object.defineProperty(t.prototype,r[n],Object.getOwnPropertyDescriptor(e.prototype,r[n]));for(i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);t.$baseCtor=e}};ClipperLib.Path=function(){return[]},ClipperLib.Paths=function(){return[]},ClipperLib.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},ClipperLib.DoublePoint0=function(){this.X=0,this.Y=0},ClipperLib.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},ClipperLib.DoublePoint2=function(t,e){this.X=t,this.Y=e},ClipperLib.PolyNode=function(){this.m_Parent=null,this.m_polygon=new ClipperLib.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},ClipperLib.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},ClipperLib.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},ClipperLib.PolyNode.prototype.Contour=function(){return this.m_polygon},ClipperLib.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},ClipperLib.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},ClipperLib.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},ClipperLib.PolyNode.prototype.Childs=function(){return this.m_Childs},ClipperLib.PolyNode.prototype.Parent=function(){return this.m_Parent},ClipperLib.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},ClipperLib.PolyTree=function(){this.m_AllPolys=[],ClipperLib.PolyNode.call(this)},ClipperLib.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;e>t;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},ClipperLib.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},ClipperLib.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},Inherit(ClipperLib.PolyTree,ClipperLib.PolyNode),ClipperLib.Math_Abs_Int64=ClipperLib.Math_Abs_Int32=ClipperLib.Math_Abs_Double=function(t){return Math.abs(t)},ClipperLib.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},ClipperLib.Cast_Int32=browser.msie||browser.opera||browser.safari?function(t){return 0|t}:function(t){return~~t},ClipperLib.Cast_Int64=browser.chrome?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):~~t}:browser.firefox&&"function"==typeof Number.toInteger?function(t){return Number.toInteger(t)}:browser.msie7||browser.msie8?function(t){return parseInt(t,10)}:browser.msie?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):0|t}:function(t){return 0>t?Math.ceil(t):Math.floor(t)},ClipperLib.Clear=function(t){t.length=0},ClipperLib.PI=3.141592653589793,ClipperLib.PI2=6.283185307179586,ClipperLib.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,use_xyz)if(this.Z=0,3==e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==e)if(t[0]instanceof ClipperLib.DoublePoint){var i=t[0];this.X=ClipperLib.Clipper.Round(i.X),this.Y=ClipperLib.Clipper.Round(i.Y),this.Z=0}else{var r=t[0];"undefined"==typeof r.Z&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof ClipperLib.DoublePoint){var i=t[0];this.X=ClipperLib.Clipper.Round(i.X),this.Y=ClipperLib.Clipper.Round(i.Y)}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},ClipperLib.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},ClipperLib.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},use_xyz?(ClipperLib.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},ClipperLib.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},ClipperLib.IntPoint1dp=function(t){this.X=ClipperLib.Clipper.Round(t.X),this.Y=ClipperLib.Clipper.Round(t.Y),this.Z=0},ClipperLib.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},ClipperLib.IntPoint3=function(t,e,i){this.X=t,this.Y=e,this.Z=i}):(ClipperLib.IntPoint0=function(){this.X=0,this.Y=0},ClipperLib.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},ClipperLib.IntPoint1dp=function(t){this.X=ClipperLib.Clipper.Round(t.X),this.Y=ClipperLib.Clipper.Round(t.Y)},ClipperLib.IntPoint2=function(t,e){this.X=t,this.Y=e}),ClipperLib.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},ClipperLib.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},ClipperLib.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},ClipperLib.IntRect4=function(t,e,i,r){this.left=t,this.top=e,this.right=i,this.bottom=r},ClipperLib.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},ClipperLib.PolyType={ptSubject:0,ptClip:1},ClipperLib.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},ClipperLib.JoinType={jtSquare:0,jtRound:1,jtMiter:2},ClipperLib.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},use_deprecated&&(ClipperLib.EndType_={etSquare:0,etRound:1,etButt:2,etClosed:3}),ClipperLib.EdgeSide={esLeft:0,esRight:1},ClipperLib.Direction={dRightToLeft:0,dLeftToRight:1},ClipperLib.TEdge=function(){this.Bot=new ClipperLib.IntPoint,this.Curr=new ClipperLib.IntPoint,this.Top=new ClipperLib.IntPoint,this.Delta=new ClipperLib.IntPoint,this.Dx=0,this.PolyTyp=ClipperLib.PolyType.ptSubject,this.Side=ClipperLib.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},ClipperLib.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new ClipperLib.IntPoint},ClipperLib.MyIntersectNodeSort=function(){},ClipperLib.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},ClipperLib.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},ClipperLib.Scanbeam=function(){this.Y=0,this.Next=null},ClipperLib.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},ClipperLib.OutPt=function(){this.Idx=0,this.Pt=new ClipperLib.IntPoint,this.Next=null,this.Prev=null},ClipperLib.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new ClipperLib.IntPoint},ClipperLib.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},ClipperLib.ClipperBase.horizontal=-9007199254740992,ClipperLib.ClipperBase.Skip=-2,ClipperLib.ClipperBase.Unassigned=-1,ClipperLib.ClipperBase.tolerance=1e-20,use_int32?(ClipperLib.ClipperBase.loRange=46340,ClipperLib.ClipperBase.hiRange=46340):(ClipperLib.ClipperBase.loRange=47453132,ClipperLib.ClipperBase.hiRange=0xfffffffffffff),ClipperLib.ClipperBase.near_zero=function(t){return t>-ClipperLib.ClipperBase.tolerance&&t<ClipperLib.ClipperBase.tolerance},ClipperLib.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},ClipperLib.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(ClipperLib.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!=e);return!1},ClipperLib.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,r){return r?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&Int128.op_Equality(Int128.Int128Mul(t.X-e.X,i.Y-e.Y),Int128.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},ClipperLib.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var r=e;;){if(this.PointOnLineSegment(t,r.Pt,r.Next.Pt,i))return!0;if(r=r.Next,r==e)break}return!1},ClipperLib.ClipperBase.prototype.SlopesEqual=ClipperLib.ClipperBase.SlopesEqual=function(){var t,e,i,r,n,p,o,l=arguments,s=l.length;return 3==s?(t=l[0],e=l[1],o=l[2],o?Int128.op_Equality(Int128.Int128Mul(t.Delta.Y,e.Delta.X),Int128.Int128Mul(t.Delta.X,e.Delta.Y)):ClipperLib.Cast_Int64(t.Delta.Y*e.Delta.X)==ClipperLib.Cast_Int64(t.Delta.X*e.Delta.Y)):4==s?(i=l[0],r=l[1],n=l[2],o=l[3],o?Int128.op_Equality(Int128.Int128Mul(i.Y-r.Y,r.X-n.X),Int128.Int128Mul(i.X-r.X,r.Y-n.Y)):ClipperLib.Cast_Int64((i.Y-r.Y)*(r.X-n.X))-ClipperLib.Cast_Int64((i.X-r.X)*(r.Y-n.Y))===0):(i=l[0],r=l[1],n=l[2],p=l[3],o=l[4],o?Int128.op_Equality(Int128.Int128Mul(i.Y-r.Y,n.X-p.X),Int128.Int128Mul(i.X-r.X,n.Y-p.Y)):ClipperLib.Cast_Int64((i.Y-r.Y)*(n.X-p.X))-ClipperLib.Cast_Int64((i.X-r.X)*(n.Y-p.Y))===0)
},ClipperLib.ClipperBase.SlopesEqual3=function(t,e,i){return i?Int128.op_Equality(Int128.Int128Mul(t.Delta.Y,e.Delta.X),Int128.Int128Mul(t.Delta.X,e.Delta.Y)):ClipperLib.Cast_Int64(t.Delta.Y*e.Delta.X)==ClipperLib.Cast_Int64(t.Delta.X*e.Delta.Y)},ClipperLib.ClipperBase.SlopesEqual4=function(t,e,i,r){return r?Int128.op_Equality(Int128.Int128Mul(t.Y-e.Y,e.X-i.X),Int128.Int128Mul(t.X-e.X,e.Y-i.Y)):ClipperLib.Cast_Int64((t.Y-e.Y)*(e.X-i.X))-ClipperLib.Cast_Int64((t.X-e.X)*(e.Y-i.Y))===0},ClipperLib.ClipperBase.SlopesEqual5=function(t,e,i,r,n){return n?Int128.op_Equality(Int128.Int128Mul(t.Y-e.Y,i.X-r.X),Int128.Int128Mul(t.X-e.X,i.Y-r.Y)):ClipperLib.Cast_Int64((t.Y-e.Y)*(i.X-r.X))-ClipperLib.Cast_Int64((t.X-e.X)*(i.Y-r.Y))===0},ClipperLib.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;e>t;++t){for(var i=0,r=this.m_edges[t].length;r>i;++i)this.m_edges[t][i]=null;ClipperLib.Clear(this.m_edges[t])}ClipperLib.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},ClipperLib.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},ClipperLib.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>ClipperLib.ClipperBase.hiRange||t.Y>ClipperLib.ClipperBase.hiRange||-t.X>ClipperLib.ClipperBase.hiRange||-t.Y>ClipperLib.ClipperBase.hiRange)&&ClipperLib.Error("Coordinate outside allowed range in RangeTest()."):(t.X>ClipperLib.ClipperBase.loRange||t.Y>ClipperLib.ClipperBase.loRange||-t.X>ClipperLib.ClipperBase.loRange||-t.Y>ClipperLib.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},ClipperLib.ClipperBase.prototype.InitEdge=function(t,e,i,r){t.Next=e,t.Prev=i,t.Curr.X=r.X,t.Curr.Y=r.Y,t.OutIdx=-1},ClipperLib.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},ClipperLib.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;ClipperLib.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||ClipperLib.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=ClipperLib.ClipperBase.horizontal&&t.Prev.Dx!=ClipperLib.ClipperBase.horizontal)break;for(;t.Prev.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},ClipperLib.ClipperBase.prototype.ProcessBound=function(t,e){var i,r,n=t,p=t;if(t.Dx==ClipperLib.ClipperBase.horizontal&&(r=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=r&&this.ReverseHorizontal(t)),p.OutIdx!=ClipperLib.ClipperBase.Skip)if(e){for(;p.Top.Y==p.Next.Bot.Y&&p.Next.OutIdx!=ClipperLib.ClipperBase.Skip;)p=p.Next;if(p.Dx==ClipperLib.ClipperBase.horizontal&&p.Next.OutIdx!=ClipperLib.ClipperBase.Skip){for(i=p;i.Prev.Dx==ClipperLib.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X==p.Next.Top.X?e||(p=i.Prev):i.Prev.Top.X>p.Next.Top.X&&(p=i.Prev)}for(;t!=p;)t.NextInLML=t.Next,t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),p=p.Next}else{for(;p.Top.Y==p.Prev.Bot.Y&&p.Prev.OutIdx!=ClipperLib.ClipperBase.Skip;)p=p.Prev;if(p.Dx==ClipperLib.ClipperBase.horizontal&&p.Prev.OutIdx!=ClipperLib.ClipperBase.Skip){for(i=p;i.Next.Dx==ClipperLib.ClipperBase.horizontal;)i=i.Next;i.Next.Top.X==p.Prev.Top.X?e||(p=i.Next):i.Next.Top.X>p.Prev.Top.X&&(p=i.Next)}for(;t!=p;)t.NextInLML=t.Prev,t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),p=p.Prev}if(p.OutIdx==ClipperLib.ClipperBase.Skip){if(t=p,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=p&&t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=p&&t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Next}if(t==p)p=e?t.Next:t.Prev;else{t=e?p.Next:p.Prev;var o=new ClipperLib.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,o.RightBound.WindDelta=0,p=this.ProcessBound(o.RightBound,e),this.InsertLocalMinima(o)}}return p},ClipperLib.ClipperBase.prototype.AddPath=function(t,e,i){use_lines?i||e!=ClipperLib.PolyType.ptClip||ClipperLib.Error("AddPath: Open paths must be subject."):i||ClipperLib.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(i)for(;r>0&&ClipperLib.IntPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&ClipperLib.IntPoint.op_Equality(t[r],t[r-1]);)--r;if(i&&2>r||!i&&1>r)return!1;for(var n=new Array,p=0;r>=p;p++)n.push(new ClipperLib.TEdge);var o=!0;n[1].Curr.X=t[1].X,n[1].Curr.Y=t[1].Y;var l={Value:this.m_UseFullRange};this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[r],l),this.m_UseFullRange=l.Value,this.InitEdge(n[0],n[1],n[r],t[0]),this.InitEdge(n[r],n[0],n[r-1],t[r]);for(var p=r-1;p>=1;--p)l.Value=this.m_UseFullRange,this.RangeTest(t[p],l),this.m_UseFullRange=l.Value,this.InitEdge(n[p],n[p+1],n[p-1],t[p]);for(var s=n[0],h=s,u=s;;)if(ClipperLib.IntPoint.op_Equality(h.Curr,h.Next.Curr)){if(h==h.Next)break;h==s&&(s=h.Next),h=this.RemoveEdge(h),u=h}else{if(h.Prev==h.Next)break;if(!i||!ClipperLib.ClipperBase.SlopesEqual(h.Prev.Curr,h.Curr,h.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr)){if(h=h.Next,h==u)break}else h==s&&(s=h.Next),h=this.RemoveEdge(h),h=h.Prev,u=h}if(!i&&h==h.Next||i&&h.Prev==h.Next)return!1;i||(this.m_HasOpenPaths=!0,s.Prev.OutIdx=ClipperLib.ClipperBase.Skip);h=s;do this.InitEdge2(h,e),h=h.Next,o&&h.Curr.Y!=s.Curr.Y&&(o=!1);while(h!=s);if(o){if(i)return!1;h.Prev.OutIdx=ClipperLib.ClipperBase.Skip,h.Prev.Bot.X<h.Prev.Top.X&&this.ReverseHorizontal(h.Prev);var a=new ClipperLib.LocalMinima;for(a.Next=null,a.Y=h.Bot.Y,a.LeftBound=null,a.RightBound=h,a.RightBound.Side=ClipperLib.EdgeSide.esRight,a.RightBound.WindDelta=0;h.Next.OutIdx!=ClipperLib.ClipperBase.Skip;)h.NextInLML=h.Next,h.Bot.X!=h.Prev.Top.X&&this.ReverseHorizontal(h),h=h.Next;return this.InsertLocalMinima(a),this.m_edges.push(n),!0}this.m_edges.push(n);for(var C,f=null;h=this.FindNextLocMin(h),h!=f;){null==f&&(f=h);var a=new ClipperLib.LocalMinima;a.Next=null,a.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(a.LeftBound=h.Prev,a.RightBound=h,C=!1):(a.LeftBound=h,a.RightBound=h.Prev,C=!0),a.LeftBound.Side=ClipperLib.EdgeSide.esLeft,a.RightBound.Side=ClipperLib.EdgeSide.esRight,a.LeftBound.WindDelta=i?a.LeftBound.Next==a.RightBound?-1:1:0,a.RightBound.WindDelta=-a.LeftBound.WindDelta,h=this.ProcessBound(a.LeftBound,C);var d=this.ProcessBound(a.RightBound,!C);a.LeftBound.OutIdx==ClipperLib.ClipperBase.Skip?a.LeftBound=null:a.RightBound.OutIdx==ClipperLib.ClipperBase.Skip&&(a.RightBound=null),this.InsertLocalMinima(a),C||(h=d)}return!0},ClipperLib.ClipperBase.prototype.AddPaths=function(t,e,i){for(var r=!1,n=0,p=t.length;p>n;++n)this.AddPath(t[n],e,i)&&(r=!0);return r},ClipperLib.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return ClipperLib.IntPoint.op_Equality(t,i)||ClipperLib.IntPoint.op_Equality(t,e)||ClipperLib.IntPoint.op_Equality(i,e)?!1:t.X!=i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y},ClipperLib.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},ClipperLib.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Dx=0===t.Delta.Y?ClipperLib.ClipperBase.horizontal:t.Delta.X/t.Delta.Y},ClipperLib.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},ClipperLib.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},ClipperLib.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},ClipperLib.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=ClipperLib.EdgeSide.esLeft,e.OutIdx=ClipperLib.ClipperBase.Unassigned),e=t.RightBound,null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=ClipperLib.EdgeSide.esRight,e.OutIdx=ClipperLib.ClipperBase.Unassigned),t=t.Next}},ClipperLib.Clipper=function(t){"undefined"==typeof t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=ClipperLib.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=ClipperLib.PolyFillType.pftEvenOdd,this.m_SubjFillType=ClipperLib.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,ClipperLib.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=ClipperLib.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!==(1&t),this.StrictlySimple=0!==(2&t),this.PreserveCollinear=0!==(4&t),use_xyz&&(this.ZFillFunction=null)},ClipperLib.Clipper.ioReverseSolution=1,ClipperLib.Clipper.ioStrictlySimple=2,ClipperLib.Clipper.ioPreserveCollinear=4,ClipperLib.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),ClipperLib.ClipperBase.prototype.Clear.call(this))},ClipperLib.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},ClipperLib.Clipper.prototype.Reset=function(){ClipperLib.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},ClipperLib.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new ClipperLib.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new ClipperLib.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var i=this.m_Scanbeam;null!==i.Next&&t<=i.Next.Y;)i=i.Next;if(t==i.Y)return;var e=new ClipperLib.Scanbeam;e.Y=t,e.Next=i.Next,i.Next=e}},ClipperLib.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof ClipperLib.PolyTree;if(4==e&&!i){var r=t[0],n=t[1],p=t[2],o=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&ClipperLib.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,ClipperLib.Clear(n),this.m_SubjFillType=p,this.m_ClipFillType=o,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{var l=this.ExecuteInternal();l&&this.BuildResult(n)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(4==e&&i){var r=t[0],s=t[1],p=t[2],o=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=p,this.m_ClipFillType=o,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var l=this.ExecuteInternal();l&&this.BuildResult2(s)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(2==e&&!i){var r=t[0],n=t[1];return this.Execute(r,n,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}if(2==e&&i){var r=t[0],s=t[1];return this.Execute(r,s,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}},ClipperLib.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},ClipperLib.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),ClipperLib.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var i=0,r=this.m_PolyOuts.length;r>i;i++){var n=this.m_PolyOuts[i];null===n.Pts||n.IsOpen||(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)}this.JoinCommonEdges();for(var i=0,r=this.m_PolyOuts.length;r>i;i++){var n=this.m_PolyOuts[i];null===n.Pts||n.IsOpen||this.FixupOutPolygon(n)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{ClipperLib.Clear(this.m_Joins),ClipperLib.Clear(this.m_GhostJoins)}},ClipperLib.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y,e=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,e=null,t},ClipperLib.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;e>t;++t)this.DisposeOutRec(t);ClipperLib.Clear(this.m_PolyOuts)},ClipperLib.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},ClipperLib.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){var e=null;for(t.Prev.Next=null;null!==t;)e=t,t=t.Next,e=null}},ClipperLib.Clipper.prototype.AddJoin=function(t,e,i){var r=new ClipperLib.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=i.X,r.OffPt.Y=i.Y,this.m_Joins.push(r)},ClipperLib.Clipper.prototype.AddGhostJoin=function(t,e){var i=new ClipperLib.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,this.m_GhostJoins.push(i)},use_xyz&&(ClipperLib.Clipper.prototype.SetZ=function(t,e){t.Z=0,null!==this.ZFillFunction&&(e.OutIdx<0?this.ZFillFunction(e.Bot,e.Top,t):this.ZFillFunction(e.Top,e.Bot,t))}),ClipperLib.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,i=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(r=this.AddOutPt(i,i.Bot))):null==i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=i&&(ClipperLib.ClipperBase.IsHorizontal(i)?this.AddEdgeToSEL(i):this.InsertScanbeam(i.Top.Y)),null!=e&&null!=i){if(null!==r&&ClipperLib.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var n=0,p=this.m_GhostJoins.length;p>n;n++){var o=this.m_GhostJoins[n];this.HorzSegmentsOverlap(o.OutPt1.Pt,o.OffPt,i.Bot,i.Top)&&this.AddJoin(o.OutPt1,r,o.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,l,e.Top)}if(e.NextInAEL!=i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){var l=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(r,l,i.Top)}var s=e.NextInAEL;if(null!==s)for(;s!=i;)this.IntersectEdges(i,s,e.Curr,!1),s=s.NextInAEL}}}},ClipperLib.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},ClipperLib.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<ClipperLib.Clipper.TopX(t,e.Top.Y):t.Top.X>ClipperLib.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},ClipperLib.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==ClipperLib.PolyType.ptSubject?this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd:this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd},ClipperLib.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==ClipperLib.PolyType.ptSubject?this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd:this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd},ClipperLib.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp==ClipperLib.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case ClipperLib.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case ClipperLib.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case ClipperLib.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case ClipperLib.ClipType.ctUnion:switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case ClipperLib.ClipType.ctDifference:if(t.PolyTyp==ClipperLib.PolyType.ptSubject)switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case ClipperLib.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},ClipperLib.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=ClipperLib.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp==e.PolyTyp&&0!==r.WindDelta&&(i=!i),r=r.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else t.WindCnt=e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?e.WindCnt:e.WindCnt+t.WindDelta:0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?e.WindCnt:e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},ClipperLib.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},ClipperLib.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},ClipperLib.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var r=t.PrevInAEL;null!==r&&(r.NextInAEL=e),e.PrevInAEL=r,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else if(e.NextInAEL==t){var i=t.NextInAEL;null!==i&&(i.PrevInAEL=e);var r=e.PrevInAEL;null!==r&&(r.NextInAEL=t),t.PrevInAEL=r,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else{var i=t.NextInAEL,r=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=r,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},ClipperLib.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e){var i=e.NextInSEL;null!==i&&(i.PrevInSEL=t);var r=t.PrevInSEL;null!==r&&(r.NextInSEL=e),e.PrevInSEL=r,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else if(e.NextInSEL==t){var i=t.NextInSEL;null!==i&&(i.PrevInSEL=e);var r=e.PrevInSEL;null!==r&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},ClipperLib.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},ClipperLib.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var r,n,p;if(ClipperLib.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(r=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=ClipperLib.EdgeSide.esLeft,e.Side=ClipperLib.EdgeSide.esRight,n=t,p=n.PrevInAEL==e?e.PrevInAEL:n.PrevInAEL):(r=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=ClipperLib.EdgeSide.esRight,e.Side=ClipperLib.EdgeSide.esLeft,n=e,p=n.PrevInAEL==t?t.PrevInAEL:n.PrevInAEL),null!==p&&p.OutIdx>=0&&ClipperLib.Clipper.TopX(p,i.Y)==ClipperLib.Clipper.TopX(n,i.Y)&&ClipperLib.ClipperBase.SlopesEqual(n,p,this.m_UseFullRange)&&0!==n.WindDelta&&0!==p.WindDelta){var o=this.AddOutPt(p,i);this.AddJoin(r,o,n.Top)}return r},ClipperLib.Clipper.prototype.CreateOutRec=function(){var t=new ClipperLib.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},ClipperLib.Clipper.prototype.AddOutPt=function(t,e){var i=t.Side==ClipperLib.EdgeSide.esLeft;if(t.OutIdx<0){var r=this.CreateOutRec();r.IsOpen=0===t.WindDelta;var n=new ClipperLib.OutPt;return r.Pts=n,n.Idx=r.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=n,n.Prev=n,r.IsOpen||this.SetHoleState(t,r),use_xyz&&(ClipperLib.IntPoint.op_Equality(e,t.Bot)?(n.Pt.X=t.Bot.X,n.Pt.Y=t.Bot.Y,n.Pt.Z=t.Bot.Z):ClipperLib.IntPoint.op_Equality(e,t.Top)?(n.Pt.X=t.Top.X,n.Pt.Y=t.Top.Y,n.Pt.Z=t.Top.Z):this.SetZ(n.Pt,t)),t.OutIdx=r.Idx,n}var r=this.m_PolyOuts[t.OutIdx],p=r.Pts;if(i&&ClipperLib.IntPoint.op_Equality(e,p.Pt))return p;if(!i&&ClipperLib.IntPoint.op_Equality(e,p.Prev.Pt))return p.Prev;var n=new ClipperLib.OutPt;return n.Idx=r.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=p,n.Prev=p.Prev,n.Prev.Next=n,p.Prev=n,i&&(r.Pts=n),use_xyz&&(ClipperLib.IntPoint.op_Equality(e,t.Bot)?(n.Pt.X=t.Bot.X,n.Pt.Y=t.Bot.Y,n.Pt.Z=t.Bot.Z):ClipperLib.IntPoint.op_Equality(e,t.Top)?(n.Pt.X=t.Top.X,n.Pt.Y=t.Top.Y,n.Pt.Z=t.Top.Z):this.SetZ(n.Pt,t)),n},ClipperLib.Clipper.prototype.SwapPoints=function(t,e){var i=new ClipperLib.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=i.X,e.Value.Y=i.Y},ClipperLib.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,r){return t.X>i.X==t.X<r.X?!0:e.X>i.X==e.X<r.X?!0:i.X>t.X==i.X<e.X?!0:r.X>t.X==r.X<e.X?!0:t.X==i.X&&e.X==r.X?!0:t.X==r.X&&e.X==i.X?!0:!1},ClipperLib.Clipper.prototype.InsertPolyPtBetween=function(t,e,i){var r=new ClipperLib.OutPt;return r.Pt.X=i.X,r.Pt.Y=i.Y,e==t.Next?(t.Next=r,e.Prev=r,r.Next=e,r.Prev=t):(e.Next=r,t.Prev=r,r.Next=t,r.Prev=e),r},ClipperLib.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,r=t.PrevInAEL;null!==r;)r.OutIdx>=0&&0!=r.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[r.OutIdx])),r=r.PrevInAEL;i&&(e.IsHole=!0)},ClipperLib.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?ClipperLib.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},ClipperLib.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;ClipperLib.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Prev;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;ClipperLib.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Next;var n=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;ClipperLib.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Prev;var p=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;ClipperLib.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Next;var o=Math.abs(this.GetDx(e.Pt,i.Pt));return r>=p&&r>=o||n>=p&&n>=o},ClipperLib.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!=t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y==t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!=t&&i.Prev!=t&&(e=i)),i=i.Next;if(null!==e)for(;e!=i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;ClipperLib.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},ClipperLib.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,r=e.BottomPt;return i.Pt.Y>r.Pt.Y?t:i.Pt.Y<r.Pt.Y?e:i.Pt.X<r.Pt.X?t:i.Pt.X>r.Pt.X?e:i.Next==i?e:r.Next==r?t:this.FirstIsBottomPt(i,r)?t:e},ClipperLib.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!==t);return!1},ClipperLib.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},ClipperLib.Clipper.prototype.AppendPolygon=function(t,e){var i,r=this.m_PolyOuts[t.OutIdx],n=this.m_PolyOuts[e.OutIdx];i=this.Param1RightOfParam2(r,n)?n:this.Param1RightOfParam2(n,r)?r:this.GetLowermostRec(r,n);var p,o=r.Pts,l=o.Prev,s=n.Pts,h=s.Prev;t.Side==ClipperLib.EdgeSide.esLeft?(e.Side==ClipperLib.EdgeSide.esLeft?(this.ReversePolyPtLinks(s),s.Next=o,o.Prev=s,l.Next=h,h.Prev=l,r.Pts=h):(h.Next=o,o.Prev=h,s.Prev=l,l.Next=s,r.Pts=s),p=ClipperLib.EdgeSide.esLeft):(e.Side==ClipperLib.EdgeSide.esRight?(this.ReversePolyPtLinks(s),l.Next=h,h.Prev=l,s.Next=o,o.Prev=s):(l.Next=s,s.Prev=l,o.Prev=h,h.Next=o),p=ClipperLib.EdgeSide.esRight),r.BottomPt=null,i==n&&(n.FirstLeft!=r&&(r.FirstLeft=n.FirstLeft),r.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=r;var u=t.OutIdx,a=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var C=this.m_ActiveEdges;null!==C;){if(C.OutIdx==a){C.OutIdx=u,C.Side=p;break}C=C.NextInAEL}n.Idx=r.Idx},ClipperLib.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do i=e.Next,e.Next=e.Prev,e.Prev=i,e=i;while(e!=t)}},ClipperLib.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},ClipperLib.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},ClipperLib.Clipper.prototype.IntersectEdges=function(t,e,i,r){var n=!r&&null===t.NextInLML&&t.Top.X==i.X&&t.Top.Y==i.Y,p=!r&&null===e.NextInLML&&e.Top.X==i.X&&e.Top.Y==i.Y,o=t.OutIdx>=0,l=e.OutIdx>=0;if(use_lines&&(0===t.WindDelta||0===e.WindDelta))return 0===t.WindDelta&&0===e.WindDelta?(n||p)&&o&&l&&this.AddLocalMaxPoly(t,e,i):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==ClipperLib.ClipType.ctUnion?0===t.WindDelta?l&&(this.AddOutPt(t,i),o&&(t.OutIdx=-1)):o&&(this.AddOutPt(e,i),l&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==ClipperLib.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==ClipperLib.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),l&&(e.OutIdx=-1)):(this.AddOutPt(t,i),o&&(t.OutIdx=-1))),n&&(t.OutIdx<0?this.DeleteFromAEL(t):ClipperLib.Error("Error intersecting polylines")),void(p&&(e.OutIdx<0?this.DeleteFromAEL(e):ClipperLib.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var s=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=s}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var h,u,a,C;t.PolyTyp==ClipperLib.PolyType.ptSubject?(h=this.m_SubjFillType,a=this.m_ClipFillType):(h=this.m_ClipFillType,a=this.m_SubjFillType),e.PolyTyp==ClipperLib.PolyType.ptSubject?(u=this.m_SubjFillType,C=this.m_ClipFillType):(u=this.m_ClipFillType,C=this.m_SubjFillType);var f,d;switch(h){case ClipperLib.PolyFillType.pftPositive:f=t.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:f=-t.WindCnt;break;default:f=Math.abs(t.WindCnt)}switch(u){case ClipperLib.PolyFillType.pftPositive:d=e.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:d=-e.WindCnt;break;default:d=Math.abs(e.WindCnt)}if(o&&l)n||p||0!==f&&1!=f||0!==d&&1!=d||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=ClipperLib.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e));else if(o)(0===d||1==d)&&(this.AddOutPt(t,i),ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e));else if(l)(0===f||1==f)&&(this.AddOutPt(e,i),ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e));else if(!(0!==f&&1!=f||0!==d&&1!=d||n||p)){var L,P;switch(a){case ClipperLib.PolyFillType.pftPositive:L=t.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:L=-t.WindCnt2;break;default:L=Math.abs(t.WindCnt2)}switch(C){case ClipperLib.PolyFillType.pftPositive:P=e.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:P=-e.WindCnt2;break;default:P=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1==f&&1==d)switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:L>0&&P>0&&this.AddLocalMinPoly(t,e,i);break;case ClipperLib.ClipType.ctUnion:0>=L&&0>=P&&this.AddLocalMinPoly(t,e,i);break;case ClipperLib.ClipType.ctDifference:(t.PolyTyp==ClipperLib.PolyType.ptClip&&L>0&&P>0||t.PolyTyp==ClipperLib.PolyType.ptSubject&&0>=L&&0>=P)&&this.AddLocalMinPoly(t,e,i);break;case ClipperLib.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else ClipperLib.Clipper.SwapSides(t,e)}n!=p&&(n&&t.OutIdx>=0||p&&e.OutIdx>=0)&&(ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e)),n&&this.DeleteFromAEL(t),p&&this.DeleteFromAEL(e)},ClipperLib.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;(null!==e||null!==i||t==this.m_ActiveEdges)&&(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},ClipperLib.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;(null!==e||null!==i||t==this.m_SortedEdges)&&(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},ClipperLib.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&ClipperLib.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,ClipperLib.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t
},ClipperLib.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},ClipperLib.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=ClipperLib.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=ClipperLib.Direction.dRightToLeft)},ClipperLib.Clipper.prototype.PrepareHorzJoins=function(t,e){var i=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=ClipperLib.EdgeSide.esLeft&&(i=i.Prev),e&&(ClipperLib.IntPoint.op_Equality(i.Pt,t.Top)?this.AddGhostJoin(i,t.Bot):this.AddGhostJoin(i,t.Top))},ClipperLib.Clipper.prototype.ProcessHorizontal=function(t,e){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var r=i.Dir,n=i.Left,p=i.Right,o=t,l=null;null!==o.NextInLML&&ClipperLib.ClipperBase.IsHorizontal(o.NextInLML);)o=o.NextInLML;for(null===o.NextInLML&&(l=this.GetMaximaPair(o));;){for(var s=t==o,h=this.GetNextInAEL(t,r);null!==h&&!(h.Curr.X==t.Top.X&&null!==t.NextInLML&&h.Dx<t.NextInLML.Dx);){var u=this.GetNextInAEL(h,r);if(r==ClipperLib.Direction.dLeftToRight&&h.Curr.X<=p||r==ClipperLib.Direction.dRightToLeft&&h.Curr.X>=n){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),h==l&&s)return r==ClipperLib.Direction.dLeftToRight?this.IntersectEdges(t,h,h.Top,!1):this.IntersectEdges(h,t,h.Top,!1),void(l.OutIdx>=0&&ClipperLib.Error("ProcessHorizontal error"));if(r==ClipperLib.Direction.dLeftToRight){var a=new ClipperLib.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(t,h,a,!0)}else{var a=new ClipperLib.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(h,t,a,!0)}this.SwapPositionsInAEL(t,h)}else if(r==ClipperLib.Direction.dLeftToRight&&h.Curr.X>=p||r==ClipperLib.Direction.dRightToLeft&&h.Curr.X<=n)break;h=u}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!ClipperLib.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot);var i={Dir:r,Left:n,Right:p};this.GetHorzDirection(t,i),r=i.Dir,n=i.Left,p=i.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var C=this.AddOutPt(t,t.Top);if(t=this.UpdateEdgeIntoAEL(t),0===t.WindDelta)return;var f=t.PrevInAEL,u=t.NextInAEL;if(null!==f&&f.Curr.X==t.Bot.X&&f.Curr.Y==t.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(t,f,this.m_UseFullRange)){var d=this.AddOutPt(f,t.Bot);this.AddJoin(C,d,t.Top)}else if(null!==u&&u.Curr.X==t.Bot.X&&u.Curr.Y==t.Bot.Y&&0!==u.WindDelta&&u.OutIdx>=0&&u.Curr.Y>u.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(t,u,this.m_UseFullRange)){var d=this.AddOutPt(u,t.Bot);this.AddJoin(C,d,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==l?l.OutIdx>=0?(r==ClipperLib.Direction.dLeftToRight?this.IntersectEdges(t,l,t.Top,!1):this.IntersectEdges(l,t,t.Top,!1),l.OutIdx>=0&&ClipperLib.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(l)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},ClipperLib.Clipper.prototype.GetNextInAEL=function(t,e){return e==ClipperLib.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},ClipperLib.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},ClipperLib.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},ClipperLib.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},ClipperLib.Clipper.prototype.GetMaximaPair=function(t){var e=null;return ClipperLib.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:ClipperLib.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||ClipperLib.ClipperBase.IsHorizontal(e))?e:null},ClipperLib.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(i){this.m_SortedEdges=null,this.m_IntersectList.length=0,ClipperLib.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},ClipperLib.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=ClipperLib.Clipper.TopX(i,e),i=i.NextInAEL;for(var r=!0;r&&null!==this.m_SortedEdges;){for(r=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var n=i.NextInSEL,p=new ClipperLib.IntPoint;if(i.Curr.X>n.Curr.X){!this.IntersectPoint(i,n,p)&&i.Curr.X>n.Curr.X+1&&ClipperLib.Error("Intersection error"),p.Y>t&&(p.Y=t,p.X=Math.abs(i.Dx)>Math.abs(n.Dx)?ClipperLib.Clipper.TopX(n,t):ClipperLib.Clipper.TopX(i,t));var o=new ClipperLib.IntersectNode;o.Edge1=i,o.Edge2=n,o.Pt.X=p.X,o.Pt.Y=p.Y,this.m_IntersectList.push(o),this.SwapPositionsInSEL(i,n),r=!0}else i=n}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},ClipperLib.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},ClipperLib.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},ClipperLib.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;t>e;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;t>i&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var r=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=r}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},ClipperLib.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;e>t;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt,!0),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};var R1=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},R2=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},R3=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},R4=function(t){return 0>t?(t-=.5,-2147483648>t?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)};ClipperLib.Clipper.Round=browser.msie?R1:browser.chromium?R3:browser.safari?R4:R2,ClipperLib.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+ClipperLib.Clipper.Round(t.Dx*(e-t.Bot.Y))},ClipperLib.Clipper.prototype.IntersectPoint=function(t,e,i){i.X=0,i.Y=0;var r,n;if(ClipperLib.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(i.X=e.Bot.X,i.Y=e.Bot.Y):(i.X=t.Bot.X,i.Y=t.Bot.Y),!1;if(0===t.Delta.X)i.X=t.Bot.X,ClipperLib.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(n=e.Bot.Y-e.Bot.X/e.Dx,i.Y=ClipperLib.Clipper.Round(i.X/e.Dx+n));else if(0===e.Delta.X)i.X=e.Bot.X,ClipperLib.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,i.Y=ClipperLib.Clipper.Round(i.X/t.Dx+r));else{r=t.Bot.X-t.Bot.Y*t.Dx,n=e.Bot.X-e.Bot.Y*e.Dx;var p=(n-r)/(t.Dx-e.Dx);i.Y=ClipperLib.Clipper.Round(p),i.X=ClipperLib.Clipper.Round(Math.abs(t.Dx)<Math.abs(e.Dx)?t.Dx*p+r:e.Dx*p+n)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=ClipperLib.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,i.X=Math.abs(t.Dx)<Math.abs(e.Dx)?ClipperLib.Clipper.TopX(t,i.Y):ClipperLib.Clipper.TopX(e,i.Y)}return!0},ClipperLib.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var r=this.GetMaximaPair(e);i=null===r||!ClipperLib.ClipperBase.IsHorizontal(r)}if(i){var n=e.PrevInAEL;this.DoMaxima(e),e=null===n?this.m_ActiveEdges:n.NextInAEL}else{if(this.IsIntermediate(e,t)&&ClipperLib.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=ClipperLib.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){var n=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==n&&n.OutIdx>=0&&n.Curr.X==e.Curr.X&&0!==n.WindDelta){var p=this.AddOutPt(n,e.Curr),o=this.AddOutPt(e,e.Curr);this.AddJoin(p,o,e.Curr)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){var p=null;e.OutIdx>=0&&(p=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var n=e.PrevInAEL,l=e.NextInAEL;if(null!==n&&n.Curr.X==e.Bot.X&&n.Curr.Y==e.Bot.Y&&null!==p&&n.OutIdx>=0&&n.Curr.Y>n.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(e,n,this.m_UseFullRange)&&0!==e.WindDelta&&0!==n.WindDelta){var o=this.AddOutPt(n,e.Bot);this.AddJoin(p,o,e.Top)}else if(null!==l&&l.Curr.X==e.Bot.X&&l.Curr.Y==e.Bot.Y&&null!==p&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(e,l,this.m_UseFullRange)&&0!==e.WindDelta&&0!==l.WindDelta){var o=this.AddOutPt(l,e.Bot);this.AddJoin(p,o,e.Top)}}e=e.NextInAEL}},ClipperLib.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL,r=!0;null!==i&&i!=e;)this.IntersectEdges(t,i,t.Top,!0),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):r&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):ClipperLib.Error("DoMaxima error")},ClipperLib.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;i>e;e++)t[e].reverse()},ClipperLib.Clipper.Orientation=function(t){return ClipperLib.Clipper.Area(t)>=0},ClipperLib.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do e++,i=i.Next;while(i!=t);return e},ClipperLib.Clipper.prototype.BuildResult=function(t){ClipperLib.Clear(t);for(var e=0,i=this.m_PolyOuts.length;i>e;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){var n=r.Pts.Prev,p=this.PointCount(n);if(!(2>p)){for(var o=new Array(p),l=0;p>l;l++)o[l]=n.Pt,n=n.Prev;t.push(o)}}}},ClipperLib.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;i>e;e++){var r=this.m_PolyOuts[e],n=this.PointCount(r.Pts);if(!(r.IsOpen&&2>n||!r.IsOpen&&3>n)){this.FixHoleLinkage(r);var p=new ClipperLib.PolyNode;t.m_AllPolys.push(p),r.PolyNode=p,p.m_polygon.length=n;for(var o=r.Pts.Prev,l=0;n>l;l++)p.m_polygon[l]=o.Pt,o=o.Prev}}for(var e=0,i=this.m_PolyOuts.length;i>e;e++){var r=this.m_PolyOuts[e];null!==r.PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},ClipperLib.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts;;){if(i.Prev==i||i.Prev==i.Next)return this.DisposeOutPts(i),void(t.Pts=null);if(ClipperLib.IntPoint.op_Equality(i.Pt,i.Next.Pt)||ClipperLib.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||ClipperLib.ClipperBase.SlopesEqual(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt))){e=null;var r=i;i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev,r=null}else{if(i==e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},ClipperLib.Clipper.prototype.DupOutPt=function(t,e){var i=new ClipperLib.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},ClipperLib.Clipper.prototype.GetOverlap=function(t,e,i,r,n){return e>t?r>i?(n.Left=Math.max(t,i),n.Right=Math.min(e,r)):(n.Left=Math.max(t,r),n.Right=Math.min(e,i)):r>i?(n.Left=Math.max(e,i),n.Right=Math.min(t,r)):(n.Left=Math.max(e,r),n.Right=Math.min(t,i)),n.Left<n.Right},ClipperLib.Clipper.prototype.JoinHorz=function(t,e,i,r,n,p){var o=t.Pt.X>e.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight,l=i.Pt.X>r.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight;if(o==l)return!1;if(o==ClipperLib.Direction.dLeftToRight){for(;t.Next.Pt.X<=n.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==n.Y;)t=t.Next;p&&t.Pt.X!=n.X&&(t=t.Next),e=this.DupOutPt(t,!p),ClipperLib.IntPoint.op_Inequality(e.Pt,n)&&(t=e,t.Pt.X=n.X,t.Pt.Y=n.Y,e=this.DupOutPt(t,!p))}else{for(;t.Next.Pt.X>=n.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==n.Y;)t=t.Next;p||t.Pt.X==n.X||(t=t.Next),e=this.DupOutPt(t,p),ClipperLib.IntPoint.op_Inequality(e.Pt,n)&&(t=e,t.Pt.X=n.X,t.Pt.Y=n.Y,e=this.DupOutPt(t,p))}if(l==ClipperLib.Direction.dLeftToRight){for(;i.Next.Pt.X<=n.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y==n.Y;)i=i.Next;p&&i.Pt.X!=n.X&&(i=i.Next),r=this.DupOutPt(i,!p),ClipperLib.IntPoint.op_Inequality(r.Pt,n)&&(i=r,i.Pt.X=n.X,i.Pt.Y=n.Y,r=this.DupOutPt(i,!p))}else{for(;i.Next.Pt.X>=n.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y==n.Y;)i=i.Next;p||i.Pt.X==n.X||(i=i.Next),r=this.DupOutPt(i,p),ClipperLib.IntPoint.op_Inequality(r.Pt,n)&&(i=r,i.Pt.X=n.X,i.Pt.Y=n.Y,r=this.DupOutPt(i,p))}return o==ClipperLib.Direction.dLeftToRight==p?(t.Prev=i,i.Next=t,e.Next=r,r.Prev=e):(t.Next=i,i.Prev=t,e.Prev=r,r.Next=e),!0},ClipperLib.Clipper.prototype.JoinPoints=function(t,e,i){var r=t.OutPt1,n=new ClipperLib.OutPt,p=t.OutPt2,o=new ClipperLib.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&ClipperLib.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&ClipperLib.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(n=t.OutPt1.Next;n!=r&&ClipperLib.IntPoint.op_Equality(n.Pt,t.OffPt);)n=n.Next;var s=n.Pt.Y>t.OffPt.Y;for(o=t.OutPt2.Next;o!=p&&ClipperLib.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;var h=o.Pt.Y>t.OffPt.Y;return s==h?!1:s?(n=this.DupOutPt(r,!1),o=this.DupOutPt(p,!0),r.Prev=p,p.Next=r,n.Next=o,o.Prev=n,t.OutPt1=r,t.OutPt2=n,!0):(n=this.DupOutPt(r,!0),o=this.DupOutPt(p,!1),r.Next=p,p.Prev=r,n.Prev=o,o.Next=n,t.OutPt1=r,t.OutPt2=n,!0)}if(l){for(n=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=n&&r.Prev!=p;)r=r.Prev;for(;n.Next.Pt.Y==n.Pt.Y&&n.Next!=r&&n.Next!=p;)n=n.Next;if(n.Next==r||n.Next==p)return!1;for(o=p;p.Prev.Pt.Y==p.Pt.Y&&p.Prev!=o&&p.Prev!=n;)p=p.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=p&&o.Next!=r;)o=o.Next;if(o.Next==p||o.Next==r)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,n.Pt.X,p.Pt.X,o.Pt.X,u))return!1;var a,C=u.Left,f=u.Right,d=new ClipperLib.IntPoint;return r.Pt.X>=C&&r.Pt.X<=f?(d.X=r.Pt.X,d.Y=r.Pt.Y,a=r.Pt.X>n.Pt.X):p.Pt.X>=C&&p.Pt.X<=f?(d.X=p.Pt.X,d.Y=p.Pt.Y,a=p.Pt.X>o.Pt.X):n.Pt.X>=C&&n.Pt.X<=f?(d.X=n.Pt.X,d.Y=n.Pt.Y,a=n.Pt.X>r.Pt.X):(d.X=o.Pt.X,d.Y=o.Pt.Y,a=o.Pt.X>p.Pt.X),t.OutPt1=r,t.OutPt2=p,this.JoinHorz(r,n,p,o,d,a)}for(n=r.Next;ClipperLib.IntPoint.op_Equality(n.Pt,r.Pt)&&n!=r;)n=n.Next;var L=n.Pt.Y>r.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange);if(L){for(n=r.Prev;ClipperLib.IntPoint.op_Equality(n.Pt,r.Pt)&&n!=r;)n=n.Prev;if(n.Pt.Y>r.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange))return!1}for(o=p.Next;ClipperLib.IntPoint.op_Equality(o.Pt,p.Pt)&&o!=p;)o=o.Next;var P=o.Pt.Y>p.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(p.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(P){for(o=p.Prev;ClipperLib.IntPoint.op_Equality(o.Pt,p.Pt)&&o!=p;)o=o.Prev;if(o.Pt.Y>p.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(p.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}return n==r||o==p||n==o||e==i&&L==P?!1:L?(n=this.DupOutPt(r,!1),o=this.DupOutPt(p,!0),r.Prev=p,p.Next=r,n.Next=o,o.Prev=n,t.OutPt1=r,t.OutPt2=n,!0):(n=this.DupOutPt(r,!0),o=this.DupOutPt(p,!1),r.Next=p,p.Prev=r,n.Prev=o,o.Next=n,t.OutPt1=r,t.OutPt2=n,!0)},ClipperLib.Clipper.GetBounds=function(t){for(var e=0,i=t.length;i>e&&0==t[e].length;)e++;if(e==i)return new ClipperLib.IntRect(0,0,0,0);var r=new ClipperLib.IntRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;i>e;e++)for(var n=0,p=t[e].length;p>n;n++)t[e][n].X<r.left?r.left=t[e][n].X:t[e][n].X>r.right&&(r.right=t[e][n].X),t[e][n].Y<r.top?r.top=t[e][n].Y:t[e][n].Y>r.bottom&&(r.bottom=t[e][n].Y);return r},ClipperLib.Clipper.prototype.GetBounds2=function(t){var e=t,i=new ClipperLib.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},ClipperLib.Clipper.PointInPolygon=function(t,e){var i=0,r=e.length;if(3>r)return 0;for(var n=e[0],p=1;r>=p;++p){var o=p==r?e[0]:e[p];if(o.Y==t.Y&&(o.X==t.X||n.Y==t.Y&&o.X>t.X==n.X<t.X))return-1;if(n.Y<t.Y!=o.Y<t.Y)if(n.X>=t.X)if(o.X>t.X)i=1-i;else{var l=(n.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(n.Y-t.Y);if(0==l)return-1;l>0==o.Y>n.Y&&(i=1-i)}else if(o.X>t.X){var l=(n.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(n.Y-t.Y);if(0==l)return-1;l>0==o.Y>n.Y&&(i=1-i)}n=o}return i},ClipperLib.Clipper.prototype.PointInPolygon=function(t,e){for(var i=0,r=e;;){var n=e.Pt.X,p=e.Pt.Y,o=e.Next.Pt.X,l=e.Next.Pt.Y;if(l==t.Y&&(o==t.X||p==t.Y&&o>t.X==n<t.X))return-1;if(p<t.Y!=l<t.Y)if(n>=t.X)if(o>t.X)i=1-i;else{var s=(n-t.X)*(l-t.Y)-(o-t.X)*(p-t.Y);if(0==s)return-1;s>0==l>p&&(i=1-i)}else if(o>t.X){var s=(n-t.X)*(l-t.Y)-(o-t.X)*(p-t.Y);if(0==s)return-1;s>0==l>p&&(i=1-i)}if(e=e.Next,r==e)break}return i},ClipperLib.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var r=this.PointInPolygon(i.Pt,e);if(r>=0)return 0!=r;i=i.Next}while(i!=t);return!0},ClipperLib.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,r=this.m_PolyOuts.length;r>i;i++){var n=this.m_PolyOuts[i];null!==n.Pts&&n.FirstLeft==t&&this.Poly2ContainsPoly1(n.Pts,e.Pts)&&(n.FirstLeft=e)}},ClipperLib.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,r=this.m_PolyOuts,n=r.length,p=r[i];n>i;i++,p=r[i])p.FirstLeft==t&&(p.FirstLeft=e)},ClipperLib.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},ClipperLib.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;e>t;t++){var i=this.m_Joins[t],r=this.GetOutRec(i.OutPt1.Idx),n=this.GetOutRec(i.OutPt2.Idx);if(null!=r.Pts&&null!=n.Pts){var p;if(p=r==n?r:this.Param1RightOfParam2(r,n)?n:this.Param1RightOfParam2(n,r)?r:this.GetLowermostRec(r,n),this.JoinPoints(i,r,n))if(r==n){if(r.Pts=i.OutPt1,r.BottomPt=null,n=this.CreateOutRec(),n.Pts=i.OutPt2,this.UpdateOutPtIdxs(n),this.m_UsingPolyTree)for(var o=0,l=this.m_PolyOuts.length;l-1>o;o++){var s=this.m_PolyOuts[o];null!=s.Pts&&ClipperLib.Clipper.ParseFirstLeft(s.FirstLeft)==r&&s.IsHole!=r.IsHole&&this.Poly2ContainsPoly1(s.Pts,i.OutPt2)&&(s.FirstLeft=n)}this.Poly2ContainsPoly1(n.Pts,r.Pts)?(n.IsHole=!r.IsHole,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)):this.Poly2ContainsPoly1(r.Pts,n.Pts)?(n.IsHole=r.IsHole,r.IsHole=!n.IsHole,n.FirstLeft=r.FirstLeft,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)):(n.IsHole=r.IsHole,n.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,n))}else n.Pts=null,n.BottomPt=null,n.Idx=r.Idx,r.IsHole=p.IsHole,p==n&&(r.FirstLeft=n.FirstLeft),n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r)}}},ClipperLib.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},ClipperLib.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i)do{for(var r=i.Next;r!=e.Pts;){if(ClipperLib.IntPoint.op_Equality(i.Pt,r.Pt)&&r.Next!=i&&r.Prev!=i){var n=i.Prev,p=r.Prev;i.Prev=p,p.Next=i,r.Prev=n,n.Next=r,e.Pts=i;var o=this.CreateOutRec();o.Pts=r,this.UpdateOutPtIdxs(o),this.Poly2ContainsPoly1(o.Pts,e.Pts)?(o.IsHole=!e.IsHole,o.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,o.Pts)?(o.IsHole=e.IsHole,e.IsHole=!o.IsHole,o.FirstLeft=e.FirstLeft,e.FirstLeft=o):(o.IsHole=e.IsHole,o.FirstLeft=e.FirstLeft),r=i}r=r.Next}i=i.Next}while(i!=e.Pts)}},ClipperLib.Clipper.Area=function(t){var e=t.length;if(3>e)return 0;for(var i=0,r=0,n=e-1;e>r;++r)i+=(t[n].X+t[r].X)*(t[n].Y-t[r].Y),n=r;return.5*-i},ClipperLib.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return.5*i},use_deprecated&&(ClipperLib.Clipper.OffsetPaths=function(t,e,i,r,n){var p=new ClipperLib.Paths,o=new ClipperLib.ClipperOffset(n,n);return o.AddPaths(t,i,r),o.Execute(p,e),p}),ClipperLib.Clipper.SimplifyPolygon=function(t,e){var i=new Array,r=new ClipperLib.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,ClipperLib.PolyType.ptSubject,!0),r.Execute(ClipperLib.ClipType.ctUnion,i,e,e),i},ClipperLib.Clipper.SimplifyPolygons=function(t,e){"undefined"==typeof e&&(e=ClipperLib.PolyFillType.pftEvenOdd);var i=new Array,r=new ClipperLib.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,ClipperLib.PolyType.ptSubject,!0),r.Execute(ClipperLib.ClipType.ctUnion,i,e,e),i},ClipperLib.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,r=t.Y-e.Y;return i*i+r*r},ClipperLib.Clipper.DistanceFromLineSqrd=function(t,e,i){var r=e.Y-i.Y,n=i.X-e.X,p=r*e.X+n*e.Y;return p=r*t.X+n*t.Y-p,p*p/(r*r+n*n)},ClipperLib.Clipper.SlopesNearCollinear=function(t,e,i,r){return ClipperLib.Clipper.DistanceFromLineSqrd(e,t,i)<r},ClipperLib.Clipper.PointsAreClose=function(t,e,i){var r=t.X-e.X,n=t.Y-e.Y;return i>=r*r+n*n},ClipperLib.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},ClipperLib.Clipper.CleanPolygon=function(t,e){"undefined"==typeof e&&(e=1.415);var i=t.length;if(0==i)return new Array;for(var r=new Array(i),n=0;i>n;++n)r[n]=new ClipperLib.OutPt;for(var n=0;i>n;++n)r[n].Pt=t[n],r[n].Next=r[(n+1)%i],r[n].Next.Prev=r[n],r[n].Idx=0;for(var p=e*e,o=r[0];0==o.Idx&&o.Next!=o.Prev;)ClipperLib.Clipper.PointsAreClose(o.Pt,o.Prev.Pt,p)?(o=ClipperLib.Clipper.ExcludeOp(o),i--):ClipperLib.Clipper.PointsAreClose(o.Prev.Pt,o.Next.Pt,p)?(ClipperLib.Clipper.ExcludeOp(o.Next),o=ClipperLib.Clipper.ExcludeOp(o),i-=2):ClipperLib.Clipper.SlopesNearCollinear(o.Prev.Pt,o.Pt,o.Next.Pt,p)?(o=ClipperLib.Clipper.ExcludeOp(o),i--):(o.Idx=1,o=o.Next);3>i&&(i=0);for(var l=new Array(i),n=0;i>n;++n)l[n]=new ClipperLib.IntPoint(o.Pt),o=o.Next;return r=null,l},ClipperLib.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),r=0,n=t.length;n>r;r++)i[r]=ClipperLib.Clipper.CleanPolygon(t[r],e);return i},ClipperLib.Clipper.Minkowski=function(t,e,i,r){var n=r?1:0,p=t.length,o=e.length,l=new Array;if(i)for(var s=0;o>s;s++){for(var h=new Array(p),u=0,a=t.length,C=t[u];a>u;u++,C=t[u])h[u]=new ClipperLib.IntPoint(e[s].X+C.X,e[s].Y+C.Y);l.push(h)}else for(var s=0;o>s;s++){for(var h=new Array(p),u=0,a=t.length,C=t[u];a>u;u++,C=t[u])h[u]=new ClipperLib.IntPoint(e[s].X-C.X,e[s].Y-C.Y);l.push(h)}for(var f=new Array,s=0;o-1+n>s;s++)for(var u=0;p>u;u++){var d=new Array;d.push(l[s%o][u%p]),d.push(l[(s+1)%o][u%p]),d.push(l[(s+1)%o][(u+1)%p]),d.push(l[s%o][(u+1)%p]),ClipperLib.Clipper.Orientation(d)||d.reverse(),f.push(d)}var L=new ClipperLib.Clipper(0);return L.AddPaths(f,ClipperLib.PolyType.ptSubject,!0),L.Execute(ClipperLib.ClipType.ctUnion,l,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),l},ClipperLib.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var i=t[0],r=t[1],n=t[2];return ClipperLib.Clipper.Minkowski(i,r,!0,n)}if(4==e){for(var p,i=t[0],o=t[1],l=t[2],n=t[3],s=new ClipperLib.Clipper,h=0,u=o.length;u>h;++h){var p=ClipperLib.Clipper.Minkowski(i,o[h],!0,n);s.AddPaths(p,ClipperLib.PolyType.ptSubject,!0)}n&&s.AddPaths(o,ClipperLib.PolyType.ptClip,!0);var a=new ClipperLib.Paths;return s.Execute(ClipperLib.ClipType.ctUnion,a,l,l),a}},ClipperLib.Clipper.MinkowskiDiff=function(t,e,i){return ClipperLib.Clipper.Minkowski(t,e,!1,i)},ClipperLib.Clipper.PolyTreeToPaths=function(t){var e=new Array;return ClipperLib.Clipper.AddPolyNodeToPaths(t,ClipperLib.Clipper.NodeType.ntAny,e),e},ClipperLib.Clipper.AddPolyNodeToPaths=function(t,e,i){var r=!0;switch(e){case ClipperLib.Clipper.NodeType.ntOpen:return;case ClipperLib.Clipper.NodeType.ntClosed:r=!t.IsOpen}t.m_polygon.length>0&&r&&i.push(t.m_polygon);for(var n=0,p=t.Childs(),o=p.length,l=p[n];o>n;n++,l=p[n])ClipperLib.Clipper.AddPolyNodeToPaths(l,e,i)},ClipperLib.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new ClipperLib.Paths,i=0,r=t.ChildCount();r>i;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},ClipperLib.Clipper.ClosedPathsFromPolyTree=function(t){var e=new ClipperLib.Paths;return ClipperLib.Clipper.AddPolyNodeToPaths(t,ClipperLib.Clipper.NodeType.ntClosed,e),e},Inherit(ClipperLib.Clipper,ClipperLib.ClipperBase),ClipperLib.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},ClipperLib.ClipperOffset=function(t,e){"undefined"==typeof t&&(t=2),"undefined"==typeof e&&(e=ClipperLib.ClipperOffset.def_arc_tolerance),this.m_destPolys=new ClipperLib.Paths,this.m_srcPoly=new ClipperLib.Path,this.m_destPoly=new ClipperLib.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new ClipperLib.IntPoint,this.m_polyNodes=new ClipperLib.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},ClipperLib.ClipperOffset.two_pi=6.28318530717959,ClipperLib.ClipperOffset.def_arc_tolerance=.25,ClipperLib.ClipperOffset.prototype.Clear=function(){ClipperLib.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},ClipperLib.ClipperOffset.Round=ClipperLib.Clipper.Round,ClipperLib.ClipperOffset.prototype.AddPath=function(t,e,i){var r=t.length-1;if(!(0>r)){var n=new ClipperLib.PolyNode;if(n.m_jointype=e,n.m_endtype=i,i==ClipperLib.EndType.etClosedLine||i==ClipperLib.EndType.etClosedPolygon)for(;r>0&&ClipperLib.IntPoint.op_Equality(t[0],t[r]);)r--;n.m_polygon.push(t[0]);for(var p=0,o=0,l=1;r>=l;l++)ClipperLib.IntPoint.op_Inequality(n.m_polygon[p],t[l])&&(p++,n.m_polygon.push(t[l]),(t[l].Y>n.m_polygon[o].Y||t[l].Y==n.m_polygon[o].Y&&t[l].X<n.m_polygon[o].X)&&(o=p));if(!(i==ClipperLib.EndType.etClosedPolygon&&2>p||i!=ClipperLib.EndType.etClosedPolygon&&0>p)&&(this.m_polyNodes.AddChild(n),i==ClipperLib.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new ClipperLib.IntPoint(0,o);else{var s=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(n.m_polygon[o].Y>s.Y||n.m_polygon[o].Y==s.Y&&n.m_polygon[o].X<s.X)&&(this.m_lowest=new ClipperLib.IntPoint(this.m_polyNodes.ChildCount()-1,o))}}},ClipperLib.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var r=0,n=t.length;n>r;r++)this.AddPath(t[r],e,i)},ClipperLib.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!ClipperLib.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==ClipperLib.EndType.etClosedPolygon||e.m_endtype==ClipperLib.EndType.etClosedLine&&ClipperLib.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype!=ClipperLib.EndType.etClosedLine||ClipperLib.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},ClipperLib.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,r=e.Y-t.Y;if(0==i&&0==r)return new ClipperLib.DoublePoint(0,0);var n=1/Math.sqrt(i*i+r*r);return i*=n,r*=n,new ClipperLib.DoublePoint(r,-i)},ClipperLib.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,ClipperLib.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];i.m_endtype==ClipperLib.EndType.etClosedPolygon&&this.m_destPolys.push(i.m_polygon)}else{this.m_miterLim=this.MiterLimit>2?2/(this.MiterLimit*this.MiterLimit):.5;var r;r=this.ArcTolerance<=0?ClipperLib.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*ClipperLib.ClipperOffset.def_arc_tolerance?Math.abs(t)*ClipperLib.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var n=3.14159265358979/Math.acos(1-r/Math.abs(t));this.m_sin=Math.sin(ClipperLib.ClipperOffset.two_pi/n),this.m_cos=Math.cos(ClipperLib.ClipperOffset.two_pi/n),this.m_StepsPerRad=n/ClipperLib.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];this.m_srcPoly=i.m_polygon;var p=this.m_srcPoly.length;if(!(0==p||0>=t&&(3>p||i.m_endtype!=ClipperLib.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=p){this.m_normals.length=0;for(var o=0;p-1>o;o++)this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[o],this.m_srcPoly[o+1]));if(this.m_normals.push(i.m_endtype==ClipperLib.EndType.etClosedLine||i.m_endtype==ClipperLib.EndType.etClosedPolygon?ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[p-1],this.m_srcPoly[0]):new ClipperLib.DoublePoint(this.m_normals[p-2])),i.m_endtype==ClipperLib.EndType.etClosedPolygon){for(var l=p-1,o=0;p>o;o++)l=this.OffsetPoint(o,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(i.m_endtype==ClipperLib.EndType.etClosedLine){for(var l=p-1,o=0;p>o;o++)l=this.OffsetPoint(o,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var s=this.m_normals[p-1],o=p-1;o>0;o--)this.m_normals[o]=new ClipperLib.DoublePoint(-this.m_normals[o-1].X,-this.m_normals[o-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-s.X,-s.Y),l=0;for(var o=p-1;o>=0;o--)l=this.OffsetPoint(o,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var l=0,o=1;p-1>o;++o)l=this.OffsetPoint(o,l,i.m_jointype);var h;if(i.m_endtype==ClipperLib.EndType.etOpenButt){var o=p-1;h=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].X+this.m_normals[o].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].Y+this.m_normals[o].Y*t)),this.m_destPoly.push(h),h=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].X-this.m_normals[o].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].Y-this.m_normals[o].Y*t)),this.m_destPoly.push(h)}else{var o=p-1;l=p-2,this.m_sinA=0,this.m_normals[o]=new ClipperLib.DoublePoint(-this.m_normals[o].X,-this.m_normals[o].Y),i.m_endtype==ClipperLib.EndType.etOpenSquare?this.DoSquare(o,l):this.DoRound(o,l)}for(var o=p-1;o>0;o--)this.m_normals[o]=new ClipperLib.DoublePoint(-this.m_normals[o-1].X,-this.m_normals[o-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),l=p-1;for(var o=l-1;o>0;--o)l=this.OffsetPoint(o,l,i.m_jointype);i.m_endtype==ClipperLib.EndType.etOpenButt?(h=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(h),h=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(h)):(l=1,this.m_sinA=0,i.m_endtype==ClipperLib.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(i.m_jointype==ClipperLib.JoinType.jtRound)for(var u=1,a=0,o=1;n>=o;o++){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t)));var C=u;u=u*this.m_cos-this.m_sin*a,a=C*this.m_sin+a*this.m_cos}else for(var u=-1,a=-1,o=0;4>o;++o)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t))),0>u?u=1:0>a?a=1:u=-1;this.m_destPolys.push(this.m_destPoly)}}}},ClipperLib.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof ClipperLib.PolyTree;if(e){var i=t[0],r=t[1];i.Clear(),this.FixOrientations(),this.DoOffset(r);var n=new ClipperLib.Clipper(0);if(n.AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,!0),r>0)n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive);else{var p=ClipperLib.Clipper.GetBounds(this.m_destPolys),o=new ClipperLib.Path;
if(o.push(new ClipperLib.IntPoint(p.left-10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.top-10)),o.push(new ClipperLib.IntPoint(p.left-10,p.top-10)),n.AddPath(o,ClipperLib.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative),1==i.ChildCount()&&i.Childs()[0].ChildCount()>0){var l=i.Childs()[0];i.Childs()[0]=l.Childs()[0];for(var s=1;s<l.ChildCount();s++)i.AddChild(l.Childs()[s])}else i.Clear()}}else{var i=t[0],r=t[1];ClipperLib.Clear(i),this.FixOrientations(),this.DoOffset(r);var n=new ClipperLib.Clipper(0);if(n.AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,!0),r>0)n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive);else{var p=ClipperLib.Clipper.GetBounds(this.m_destPolys),o=new ClipperLib.Path;o.push(new ClipperLib.IntPoint(p.left-10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.top-10)),o.push(new ClipperLib.IntPoint(p.left-10,p.top-10)),n.AddPath(o,ClipperLib.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative),i.length>0&&i.splice(0,1)}}},ClipperLib.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new ClipperLib.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case ClipperLib.JoinType.jtMiter:var r=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y);r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case ClipperLib.JoinType.jtSquare:this.DoSquare(t,e);break;case ClipperLib.JoinType.jtRound:this.DoRound(t,e)}return e=t},ClipperLib.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},ClipperLib.ClipperOffset.prototype.DoMiter=function(t,e,i){var r=this.m_delta/i;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*r),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*r)))},ClipperLib.ClipperOffset.prototype.DoRound=function(t,e){for(var i,r=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),n=ClipperLib.Cast_Int32(ClipperLib.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),p=this.m_normals[e].X,o=this.m_normals[e].Y,l=0;n>l;++l)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+p*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+o*this.m_delta))),i=p,p=p*this.m_cos-this.m_sin*o,o=i*this.m_sin+o*this.m_cos;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},ClipperLib.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},ClipperLib.JS={},ClipperLib.JS.AreaOfPolygon=function(t,e){return e||(e=1),ClipperLib.Clipper.Area(t)/(e*e)},ClipperLib.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,r=0;r<t.length;r++)i+=ClipperLib.Clipper.Area(t[r]);return i/(e*e)},ClipperLib.JS.BoundsOfPath=function(t,e){return ClipperLib.JS.BoundsOfPaths([t],e)},ClipperLib.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=ClipperLib.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},ClipperLib.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array,t=ClipperLib.JS.Clone(t);if("number"!=typeof e||null===e)return ClipperLib.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||0>e)return t;i||(t=[t]);for(var r,n,p,o,l,s,h,u=t.length,a=[],C=0;u>C;C++)if(n=t[C],r=n.length,0!==r)if(3>r)p=n,a.push(p);else{for(p=n,o=e*e,l=n[0],s=1,h=1;r>h;h++)(n[h].X-l.X)*(n[h].X-l.X)+(n[h].Y-l.Y)*(n[h].Y-l.Y)<=o||(p[s]=n[h],l=n[h],s++);l=n[s-1],(n[0].X-l.X)*(n[0].X-l.X)+(n[0].Y-l.Y)*(n[0].Y-l.Y)<=o&&s--,r>s&&p.splice(s,r-s),p.length&&a.push(p)}return!i&&a.length?a=a[0]:i||0!==a.length?i&&0===a.length&&(a=[[]]):a=[],a},ClipperLib.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,r,n,p,o=t.length,l=new Array(o);for(r=0;o>r;r++){for(i=t[r].length,p=new Array(i),n=0;i>n;n++)p[n]={X:t[r][n].X,Y:t[r][n].Y};l[r]=p}return e||(l=l[0]),l},ClipperLib.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return ClipperLib.Error("Tolerance is not a number in Lighten()."),ClipperLib.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||0>e)return ClipperLib.JS.Clone(t);t[0]instanceof Array||(t=[t]);var i,r,n,p,o,l,s,h,u,a,C,f,d,L,P,b,m,y=t.length,c=e*e,v=[];for(i=0;y>i;i++)if(n=t[i],l=n.length,0!=l){for(p=0;1e6>p;p++){for(o=[],l=n.length,n[l-1].X!=n[0].X||n[l-1].Y!=n[0].Y?(f=1,n.push({X:n[0].X,Y:n[0].Y}),l=n.length):f=0,C=[],r=0;l-2>r;r++)s=n[r],u=n[r+1],h=n[r+2],b=s.X,m=s.Y,d=h.X-b,L=h.Y-m,(0!==d||0!==L)&&(P=((u.X-b)*d+(u.Y-m)*L)/(d*d+L*L),P>1?(b=h.X,m=h.Y):P>0&&(b+=d*P,m+=L*P)),d=u.X-b,L=u.Y-m,a=d*d+L*L,c>=a&&(C[r+1]=1,r++);for(o.push({X:n[0].X,Y:n[0].Y}),r=1;l-1>r;r++)C[r]||o.push({X:n[r].X,Y:n[r].Y});if(o.push({X:n[l-1].X,Y:n[l-1].Y}),f&&n.pop(),!C.length)break;n=o}l=o.length,o[l-1].X==o[0].X&&o[l-1].Y==o[0].Y&&o.pop(),o.length>2&&v.push(o)}return!t[0]instanceof Array&&(v=v[0]),"undefined"==typeof v&&(v=[[]]),v},ClipperLib.JS.PerimeterOfPath=function(t,e,i){if("undefined"==typeof t)return 0;var r,n,p=Math.sqrt,o=0,l=0,s=0,h=0,u=0,a=t.length;if(2>a)return 0;for(e&&(t[a]=t[0],a++);--a;)r=t[a],l=r.X,s=r.Y,n=t[a-1],h=n.X,u=n.Y,o+=p((l-h)*(l-h)+(s-u)*(s-u));return e&&t.pop(),o/i},ClipperLib.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var r=0,n=0;n<t.length;n++)r+=ClipperLib.JS.PerimeterOfPath(t[n],e,i);return r},ClipperLib.JS.ScaleDownPath=function(t,e){var i,r;for(e||(e=1),i=t.length;i--;)r=t[i],r.X=r.X/e,r.Y=r.Y/e},ClipperLib.JS.ScaleDownPaths=function(t,e){{var i,r,n;Math.round}for(e||(e=1),i=t.length;i--;)for(r=t[i].length;r--;)n=t[i][r],n.X=n.X/e,n.Y=n.Y/e},ClipperLib.JS.ScaleUpPath=function(t,e){var i,r,n=Math.round;for(e||(e=1),i=t.length;i--;)r=t[i],r.X=n(r.X*e),r.Y=n(r.Y*e)},ClipperLib.JS.ScaleUpPaths=function(t,e){var i,r,n,p=Math.round;for(e||(e=1),i=t.length;i--;)for(r=t[i].length;r--;)n=t[i][r],n.X=p(n.X*e),n.Y=p(n.Y*e)},ClipperLib.ExPolygons=function(){return[]},ClipperLib.ExPolygon=function(){this.outer=null,this.holes=null},ClipperLib.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new ClipperLib.ExPolygon;i.outer=t.Contour();var r=t.Childs(),n=r.length;i.holes=new Array(n);var p,o,l,s,h,u;for(l=0;n>l;l++)for(p=r[l],i.holes[l]=p.Contour(),s=0,h=p.Childs(),u=h.length;u>s;s++)o=h[s],ClipperLib.JS.AddOuterPolyNodeToExPolygons(o,e);e.push(i)},ClipperLib.JS.ExPolygonsToPaths=function(t){var e,i,r,n,p=new ClipperLib.Paths;for(e=0,r=t.length;r>e;e++)for(p.push(t[e].outer),i=0,n=t[e].holes.length;n>i;i++)p.push(t[e].holes[i]);return p},ClipperLib.JS.PolyTreeToExPolygons=function(t){var e,i,r,n,p=new ClipperLib.ExPolygons;for(i=0,r=t.Childs(),n=r.length;n>i;i++)e=r[i],ClipperLib.JS.AddOuterPolyNodeToExPolygons(e,p);return p},module.exports=ClipperLib;
},{}],2:[function(require,module,exports){
(function(n){(function(){function t(n,t,r){for(var e=(r||0)-1,u=n?n.length:0;++e<u;)if(n[e]===t)return e;return-1}function r(n,r){var e=typeof r;if(n=n.cache,"boolean"==e||null==r)return n[r]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?r:d+r;return n=(n=n[e])&&n[u],"object"==e?n&&t(n,r)>-1?0:-1:n?0:-1}function e(n){var t=this.cache,r=typeof n;if("boolean"==r||null==n)t[n]=!0;else{"number"!=r&&"string"!=r&&(r="object");var e="number"==r?n:d+n,u=t[r]||(t[r]={});"object"==r?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function u(n){return n.charCodeAt(0)}function o(n,t){for(var r=n.criteria,e=t.criteria,u=-1,o=r.length;++u<o;){var a=r[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-t.index}function a(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=l();i["false"]=i["null"]=i["true"]=i.undefined=!1;var f=l();for(f.array=n,f.cache=i,f.push=e;++t<r;)f.push(n[t]);return f}function i(n){return"\\"+H[n]}function f(){return g.pop()||[]}function l(){return y.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(n){n.length=0,g.length<_&&g.push(n)}function p(n){var t=n.cache;t&&p(t),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,y.length<_&&y.push(n)}function s(n,t,r){t||(t=0),"undefined"==typeof r&&(r=n?n.length:0);for(var e=-1,u=r-t||0,o=Array(0>u?0:u);++e<u;)o[e]=n[t+e];return o}function v(n){function e(n){return n&&"object"==typeof n&&!Xe(n)&&De.call(n,"__wrapped__")?n:new g(n)}function g(n,t){this.__chain__=!!t,this.__wrapped__=n}function y(n){function t(){if(e){var n=s(e);Te.apply(n,arguments)}if(this instanceof t){var o=H(r.prototype),a=r.apply(o,n||arguments);return It(a)?a:o}return r.apply(u,n||arguments)}var r=n[0],e=n[2],u=n[4];return Qe(t,n),t}function _(n,t,r,e,u){if(r){var o=r(n);if("undefined"!=typeof o)return o}var a=It(n);if(!a)return n;var i=Oe.call(n);if(!U[i])return n;var l=He[i];switch(i){case B:case W:return new l(+n);case z:case K:return new l(n);case P:return o=l(n.source,O.exec(n)),o.lastIndex=n.lastIndex,o}var p=Xe(n);if(t){var v=!e;e||(e=f()),u||(u=f());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=p?l(n.length):{}}else o=p?s(n):uu({},n);return p&&(De.call(n,"index")&&(o.index=n.index),De.call(n,"input")&&(o.input=n.input)),t?(e.push(n),u.push(o),(p?Qt:iu)(n,function(n,a){o[a]=_(n,t,r,e,u)}),v&&(c(e),c(u)),o):o}function H(n){return It(n)?qe(n):{}}function Q(n,t,r){if("function"!=typeof n)return Xr;if("undefined"==typeof t||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Je.funcNames&&(e=!n.name),e=e||!Je.funcDecomp,!e)){var u=Se.call(n);Je.funcNames||(e=!N.test(u)),e||(e=S.test(u),Qe(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)}}return Tr(n,t)}function X(n){function t(){var n=f?a:this;if(u){var h=s(u);Te.apply(h,arguments)}if((o||c)&&(h||(h=s(arguments)),o&&Te.apply(h,o),c&&h.length<i))return e|=16,X([r,p?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(r=n[v]),this instanceof t){n=H(r.prototype);var g=r.apply(n,h);return It(g)?g:n}return r.apply(n,h)}var r=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,p=8&e,v=r;return Qe(t,n),t}function Y(n,e){var u=-1,o=ft(),i=n?n.length:0,f=i>=b&&o===t,l=[];if(f){var c=a(e);c?(o=r,e=c):f=!1}for(;++u<i;){var s=n[u];o(e,s)<0&&l.push(s)}return f&&p(e),l}function Z(n,t,r,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Xe(i)||st(i))){t||(i=Z(i,t,r));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else r||a.push(i)}return a}function tt(n,t,r,e,u,o){if(r){var a=r(n,t);if("undefined"!=typeof a)return!!a}if(n===t)return 0!==n||1/n==1/t;var i=typeof n,l=typeof t;if(!(n!==n||n&&G[i]||t&&G[l]))return!1;if(null==n||null==t)return n===t;var p=Oe.call(n),s=Oe.call(t);if(p==$&&(p=L),s==$&&(s=L),p!=s)return!1;switch(p){case B:case W:return+n==+t;case z:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case P:case K:return n==we(t)}var v=p==F;if(!v){var h=De.call(n,"__wrapped__"),g=De.call(t,"__wrapped__");if(h||g)return tt(h?n.__wrapped__:n,g?t.__wrapped__:t,r,e,u,o);if(p!=L)return!1;var y=n.constructor,m=t.constructor;if(y!=m&&!(Et(y)&&y instanceof y&&Et(m)&&m instanceof m)&&"constructor"in n&&"constructor"in t)return!1}var d=!u;u||(u=f()),o||(o=f());for(var b=u.length;b--;)if(u[b]==n)return o[b]==t;var _=0;if(a=!0,u.push(n),o.push(t),v){if(b=n.length,_=t.length,a=_==b,a||e)for(;_--;){var w=b,j=t[_];if(e)for(;w--&&!(a=tt(n[w],j,r,e,u,o)););else if(!(a=tt(n[_],j,r,e,u,o)))break}}else au(t,function(t,i,f){return De.call(f,i)?(_++,a=De.call(n,i)&&tt(n[i],t,r,e,u,o)):void 0}),a&&!e&&au(n,function(n,t,r){return De.call(r,t)?a=--_>-1:void 0});return u.pop(),o.pop(),d&&(c(u),c(o)),a}function rt(n,t,r,e,u){(Xe(t)?Qt:iu)(t,function(t,o){var a,i,f=t,l=n[o];if(t&&((i=Xe(t))||fu(t))){for(var c=e.length;c--;)if(a=e[c]==t){l=u[c];break}if(!a){var p;r&&(f=r(l,t),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Xe(l)?l:[]:fu(l)?l:{}),e.push(t),u.push(l),p||rt(l,t,r,e,u)}}else r&&(f=r(l,t),"undefined"==typeof f&&(f=t)),"undefined"!=typeof f&&(l=f);n[o]=l})}function et(n,t){return n+Ie(Ge()*(t-n+1))}function ut(n,e,u){var o=-1,i=ft(),l=n?n.length:0,s=[],v=!e&&l>=b&&i===t,h=u||v?f():s;if(v){var g=a(h);i=r,h=g}for(;++o<l;){var y=n[o],m=u?u(y,o,n):y;(e?!o||h[h.length-1]!==m:i(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(c(h.array),p(h)):u&&c(h),s}function ot(n){return function(t,r,u){var o={};r=e.createCallback(r,u,3);var a=-1,i=t?t.length:0;if("number"==typeof i)for(;++a<i;){var f=t[a];n(o,f,r(f,a,t),t)}else iu(t,function(t,e,u){n(o,t,r(t,e,u),u)});return o}}function at(n,t,r,e,u,o){var a=1&t,i=2&t,f=4&t,l=16&t,c=32&t;if(!i&&!Et(n))throw new je;l&&!r.length&&(t&=-17,l=r=!1),c&&!e.length&&(t&=-33,c=e=!1);var p=n&&n.__bindData__;if(p&&p!==!0)return p=s(p),p[2]&&(p[2]=s(p[2])),p[3]&&(p[3]=s(p[3])),!a||1&p[1]||(p[4]=u),!a&&1&p[1]&&(t|=8),!f||4&p[1]||(p[5]=o),l&&Te.apply(p[2]||(p[2]=[]),r),c&&Be.apply(p[3]||(p[3]=[]),e),p[1]|=t,at.apply(null,p);var v=1==t||17===t?y:X;return v([n,t,r,e,u,o])}function it(n){return nu[n]}function ft(){var n=(n=e.indexOf)===mr?t:n;return n}function lt(n){return"function"==typeof n&&Ne.test(n)}function ct(n){var t,r;return n&&Oe.call(n)==L&&(t=n.constructor,!Et(t)||t instanceof t)?(au(n,function(n,t){r=t}),"undefined"==typeof r||De.call(n,r)):!1}function pt(n){return tu[n]}function st(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==$||!1}function vt(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r=t,t=!1),_(n,t,"function"==typeof r&&Q(r,e,1))}function ht(n,t,r){return _(n,!0,"function"==typeof t&&Q(t,r,1))}function gt(n,t){var r=H(n);return t?uu(r,t):r}function yt(n,t,r){var u;return t=e.createCallback(t,r,3),iu(n,function(n,r,e){return t(n,r,e)?(u=r,!1):void 0}),u}function mt(n,t,r){var u;return t=e.createCallback(t,r,3),bt(n,function(n,r,e){return t(n,r,e)?(u=r,!1):void 0}),u}function dt(n,t,r){var e=[];au(n,function(n,t){e.push(t,n)});var u=e.length;for(t=Q(t,r,3);u--&&t(e[u--],e[u],n)!==!1;);return n}function bt(n,t,r){var e=Ze(n),u=e.length;for(t=Q(t,r,3);u--;){var o=e[u];if(t(n[o],o,n)===!1)break}return n}function _t(n){var t=[];return au(n,function(n,r){Et(n)&&t.push(r)}),t.sort()}function wt(n,t){return n?De.call(n,t):!1}function jt(n){for(var t=-1,r=Ze(n),e=r.length,u={};++t<e;){var o=r[t];u[n[o]]=o}return u}function kt(n){return n===!0||n===!1||n&&"object"==typeof n&&Oe.call(n)==B||!1}function xt(n){return n&&"object"==typeof n&&Oe.call(n)==W||!1}function Ct(n){return n&&1===n.nodeType||!1}function Ot(n){var t=!0;if(!n)return t;var r=Oe.call(n),e=n.length;return r==F||r==K||r==$||r==L&&"number"==typeof e&&Et(n.splice)?!e:(iu(n,function(){return t=!1}),t)}function Nt(n,t,r,e){return tt(n,t,"function"==typeof r&&Q(r,e,2))}function Rt(n){return Le(n)&&!Pe(parseFloat(n))}function Et(n){return"function"==typeof n}function It(n){return!(!n||!G[typeof n])}function St(n){return Dt(n)&&n!=+n}function At(n){return null===n}function Dt(n){return"number"==typeof n||n&&"object"==typeof n&&Oe.call(n)==z||!1}function Tt(n){return n&&"object"==typeof n&&Oe.call(n)==P||!1}function $t(n){return"string"==typeof n||n&&"object"==typeof n&&Oe.call(n)==K||!1}function Ft(n){return"undefined"==typeof n}function Bt(n,t,r){var u={};return t=e.createCallback(t,r,3),iu(n,function(n,r,e){u[r]=t(n,r,e)}),u}function Wt(n){var t=arguments,r=2;if(!It(n))return n;if("number"!=typeof t[2]&&(r=t.length),r>3&&"function"==typeof t[r-2])var e=Q(t[--r-1],t[r--],2);else r>2&&"function"==typeof t[r-1]&&(e=t[--r]);for(var u=s(arguments,1,r),o=-1,a=f(),i=f();++o<r;)rt(n,u[o],e,a,i);return c(a),c(i),n}function qt(n,t,r){var u={};if("function"!=typeof t){var o=[];au(n,function(n,t){o.push(t)}),o=Y(o,Z(arguments,!0,!1,1));for(var a=-1,i=o.length;++a<i;){var f=o[a];u[f]=n[f]}}else t=e.createCallback(t,r,3),au(n,function(n,r,e){t(n,r,e)||(u[r]=n)});return u}function zt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Lt(n,t,r){var u={};if("function"!=typeof t)for(var o=-1,a=Z(arguments,!0,!1,1),i=It(n)?a.length:0;++o<i;){var f=a[o];f in n&&(u[f]=n[f])}else t=e.createCallback(t,r,3),au(n,function(n,r,e){t(n,r,e)&&(u[r]=n)});return u}function Pt(n,t,r,u){var o=Xe(n);if(null==r)if(o)r=[];else{var a=n&&n.constructor,i=a&&a.prototype;r=H(i)}return t&&(t=e.createCallback(t,u,4),(o?Qt:iu)(n,function(n,e,u){return t(r,n,e,u)})),r}function Kt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;)u[t]=n[r[t]];return u}function Ut(n){for(var t=arguments,r=-1,e=Z(t,!0,!1,1),u=t[2]&&t[2][t[1]]===n?1:e.length,o=ve(u);++r<u;)o[r]=n[e[r]];return o}function Mt(n,t,r){var e=-1,u=ft(),o=n?n.length:0,a=!1;return r=(0>r?Ue(0,o+r):r)||0,Xe(n)?a=u(n,t,r)>-1:"number"==typeof o?a=($t(n)?n.indexOf(t,r):u(n,t,r))>-1:iu(n,function(n){return++e>=r?!(a=n===t):void 0}),a}function Vt(n,t,r){var u=!0;t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a&&(u=!!t(n[o],o,n)););else iu(n,function(n,r,e){return u=!!t(n,r,e)});return u}function Gt(n,t,r){var u=[];t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a;){var i=n[o];t(i,o,n)&&u.push(i)}else iu(n,function(n,r,e){t(n,r,e)&&u.push(n)});return u}function Ht(n,t,r){t=e.createCallback(t,r,3);var u=-1,o=n?n.length:0;if("number"!=typeof o){var a;return iu(n,function(n,r,e){return t(n,r,e)?(a=n,!1):void 0}),a}for(;++u<o;){var i=n[u];if(t(i,u,n))return i}}function Jt(n,t,r){var u;return t=e.createCallback(t,r,3),Xt(n,function(n,r,e){return t(n,r,e)?(u=n,!1):void 0}),u}function Qt(n,t,r){var e=-1,u=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof u)for(;++e<u&&t(n[e],e,n)!==!1;);else iu(n,t);return n}function Xt(n,t,r){var e=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof e)for(;e--&&t(n[e],e,n)!==!1;);else{var u=Ze(n);e=u.length,iu(n,function(n,r,o){return r=u?u[--e]:--e,t(o[r],r,o)})}return n}function Yt(n,t){var r=s(arguments,2),e=-1,u="function"==typeof t,o=n?n.length:0,a=ve("number"==typeof o?o:0);return Qt(n,function(n){a[++e]=(u?t:n[t]).apply(n,r)}),a}function Zt(n,t,r){var u=-1,o=n?n.length:0;if(t=e.createCallback(t,r,3),"number"==typeof o)for(var a=ve(o);++u<o;)a[u]=t(n[u],u,n);else a=[],iu(n,function(n,r,e){a[++u]=t(n,r,e)});return a}function nr(n,t,r){var o=-1/0,a=o;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var i=-1,f=n.length;++i<f;){var l=n[i];l>a&&(a=l)}else t=null==t&&$t(n)?u:e.createCallback(t,r,3),Qt(n,function(n,r,e){var u=t(n,r,e);u>o&&(o=u,a=n)});return a}function tr(n,t,r){var o=1/0,a=o;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var i=-1,f=n.length;++i<f;){var l=n[i];a>l&&(a=l)}else t=null==t&&$t(n)?u:e.createCallback(t,r,3),Qt(n,function(n,r,e){var u=t(n,r,e);o>u&&(o=u,a=n)});return a}function rr(n,t,r,u){if(!n)return r;var o=arguments.length<3;t=e.createCallback(t,u,4);var a=-1,i=n.length;if("number"==typeof i)for(o&&(r=n[++a]);++a<i;)r=t(r,n[a],a,n);else iu(n,function(n,e,u){r=o?(o=!1,n):t(r,n,e,u)});return r}function er(n,t,r,u){var o=arguments.length<3;return t=e.createCallback(t,u,4),Xt(n,function(n,e,u){r=o?(o=!1,n):t(r,n,e,u)}),r}function ur(n,t,r){return t=e.createCallback(t,r,3),Gt(n,function(n,r,e){return!t(n,r,e)})}function or(n,t,r){if(n&&"number"!=typeof n.length&&(n=Kt(n)),null==t||r)return n?n[et(0,n.length-1)]:h;var e=ar(n);return e.length=Me(Ue(0,t),e.length),e}function ar(n){var t=-1,r=n?n.length:0,e=ve("number"==typeof r?r:0);return Qt(n,function(n){var r=et(0,++t);e[t]=e[r],e[r]=n}),e}function ir(n){var t=n?n.length:0;return"number"==typeof t?t:Ze(n).length}function fr(n,t,r){var u;t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a&&!(u=t(n[o],o,n)););else iu(n,function(n,r,e){return!(u=t(n,r,e))});return!!u}function lr(n,t,r){var u=-1,a=Xe(t),i=n?n.length:0,s=ve("number"==typeof i?i:0);for(a||(t=e.createCallback(t,r,3)),Qt(n,function(n,r,e){var o=s[++u]=l();a?o.criteria=Zt(t,function(t){return n[t]}):(o.criteria=f())[0]=t(n,r,e),o.index=u,o.value=n}),i=s.length,s.sort(o);i--;){var v=s[i];s[i]=v.value,a||c(v.criteria),p(v)}return s}function cr(n){return n&&"number"==typeof n.length?s(n):Kt(n)}function pr(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e}function sr(n){return Y(n,Z(arguments,!0,!0,1))}function vr(n,t,r){var u=-1,o=n?n.length:0;for(t=e.createCallback(t,r,3);++u<o;)if(t(n[u],u,n))return u;return-1}function hr(n,t,r){var u=n?n.length:0;for(t=e.createCallback(t,r,3);u--;)if(t(n[u],u,n))return u;return-1}function gr(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=e.createCallback(t,r,3);++a<o&&t(n[a],a,n);)u++}else if(u=t,null==u||r)return n?n[0]:h;return s(n,0,Me(Ue(0,u),o))}function yr(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r="function"!=typeof t&&e&&e[t]===n?null:t,t=!1),null!=r&&(n=Zt(n,r,e)),Z(n,t)}function mr(n,r,e){if("number"==typeof e){var u=n?n.length:0;e=0>e?Ue(0,u+e):e||0}else if(e){var o=Or(n,r);return n[o]===r?o:-1}return t(n,r,e)}function dr(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=o;for(t=e.createCallback(t,r,3);a--&&t(n[a],a,n);)u++}else u=null==t||r?1:t||u;return s(n,0,Me(Ue(0,o-u),o))}function br(){for(var n=[],e=-1,u=arguments.length,o=f(),i=ft(),l=i===t,s=f();++e<u;){var v=arguments[e];(Xe(v)||st(v))&&(n.push(v),o.push(l&&v.length>=b&&a(e?n[e]:s)))}var h=n[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=o[0];if(v=h[g],(d?r(d,v):i(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=o[e],(d?r(d,v):i(n[e],v))<0)continue n;m.push(v)}}for(;u--;)d=o[u],d&&p(d);return c(o),c(s),m}function _r(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=o;for(t=e.createCallback(t,r,3);a--&&t(n[a],a,n);)u++}else if(u=t,null==u||r)return n?n[o-1]:h;return s(n,Ue(0,o-u))}function wr(n,t,r){var e=n?n.length:0;for("number"==typeof r&&(e=(0>r?Ue(0,e+r):Me(r,e-1))+1);e--;)if(n[e]===t)return e;return-1}function jr(n){for(var t=arguments,r=0,e=t.length,u=n?n.length:0;++r<e;)for(var o=-1,a=t[r];++o<u;)n[o]===a&&(Fe.call(n,o--,1),u--);return n}function kr(n,t,r){n=+n||0,r="number"==typeof r?r:+r||1,null==t&&(t=n,n=0);for(var e=-1,u=Ue(0,Re((t-n)/(r||1))),o=ve(u);++e<u;)o[e]=n,n+=r;return o}function xr(n,t,r){var u=-1,o=n?n.length:0,a=[];for(t=e.createCallback(t,r,3);++u<o;){var i=n[u];t(i,u,n)&&(a.push(i),Fe.call(n,u--,1),o--)}return a}function Cr(n,t,r){if("number"!=typeof t&&null!=t){var u=0,o=-1,a=n?n.length:0;for(t=e.createCallback(t,r,3);++o<a&&t(n[o],o,n);)u++}else u=null==t||r?1:Ue(0,t);return s(n,u)}function Or(n,t,r,u){var o=0,a=n?n.length:o;for(r=r?e.createCallback(r,u,1):Xr,t=r(t);a>o;){var i=o+a>>>1;r(n[i])<t?o=i+1:a=i}return o}function Nr(){return ut(Z(arguments,!0,!0))}function Rr(n,t,r,u){return"boolean"!=typeof t&&null!=t&&(u=r,r="function"!=typeof t&&u&&u[t]===n?null:t,t=!1),null!=r&&(r=e.createCallback(r,u,3)),ut(n,t,r)}function Er(n){return Y(n,s(arguments,1))}function Ir(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Xe(r)||st(r))var e=e?ut(Y(e,r).concat(Y(r,e))):r}return e||[]}function Sr(){for(var n=arguments.length>1?arguments:arguments[0],t=-1,r=n?nr(su(n,"length")):0,e=ve(0>r?0:r);++t<r;)e[t]=su(n,t);return e}function Ar(n,t){var r=-1,e=n?n.length:0,u={};for(t||!e||Xe(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Dr(n,t){if(!Et(t))throw new je;return function(){return--n<1?t.apply(this,arguments):void 0}}function Tr(n,t){return arguments.length>2?at(n,17,s(arguments,2),null,t):at(n,1,null,null,t)}function $r(n){for(var t=arguments.length>1?Z(arguments,!0,!1,1):_t(n),r=-1,e=t.length;++r<e;){var u=t[r];n[u]=at(n[u],1,null,null,n)}return n}function Fr(n,t){return arguments.length>2?at(t,19,s(arguments,2),null,n):at(t,3,null,null,n)}function Br(){for(var n=arguments,t=n.length;t--;)if(!Et(n[t]))throw new je;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}}function Wr(n,t){return t="number"==typeof t?t:+t||n.length,at(n,4,null,null,null,t)}function qr(n,t,r){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!Et(n))throw new je;if(t=Ue(0,t)||0,r===!0){var v=!0;s=!1}else It(r)&&(v=r.leading,p="maxWait"in r&&(Ue(t,r.maxWait)||0),s="trailing"in r?r.trailing:s);var g=function(){var r=t-(hu()-a);if(0>=r){u&&Ee(u);var p=l;u=f=l=h,p&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))}else f=$e(g,r)},y=function(){f&&Ee(f),u=f=l=h,(s||p!==t)&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=hu(),i=this,l=s&&(f||!v),p===!1)var r=v&&!f;else{u||v||(c=a);var h=p-(a-c),m=0>=h;m?(u&&(u=Ee(u)),c=a,o=n.apply(i,e)):u||(u=$e(y,h))}return m&&f?f=Ee(f):f||t===p||(f=$e(g,t)),r&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function zr(n){if(!Et(n))throw new je;var t=s(arguments,1);return $e(function(){n.apply(h,t)},1)}function Lr(n,t){if(!Et(n))throw new je;var r=s(arguments,2);return $e(function(){n.apply(h,r)},t)}function Pr(n,t){if(!Et(n))throw new je;var r=function(){var e=r.cache,u=t?t.apply(this,arguments):d+arguments[0];return De.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return r.cache={},r}function Kr(n){var t,r;if(!Et(n))throw new je;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}}function Ur(n){return at(n,16,s(arguments,1))}function Mr(n){return at(n,32,null,s(arguments,1))}function Vr(n,t,r){var e=!0,u=!0;if(!Et(n))throw new je;return r===!1?e=!1:It(r)&&(e="leading"in r?r.leading:e,u="trailing"in r?r.trailing:u),M.leading=e,M.maxWait=t,M.trailing=u,qr(n,t,M)}function Gr(n,t){return at(t,16,[n])}function Hr(n){return function(){return n}}function Jr(n,t,r){var e=typeof n;if(null==n||"function"==e)return Q(n,t,r);if("object"!=e)return te(n);var u=Ze(n),o=u[0],a=n[o];return 1!=u.length||a!==a||It(a)?function(t){for(var r=u.length,e=!1;r--&&(e=tt(t[u[r]],n[u[r]],null,!0)););return e}:function(n){var t=n[o];return a===t&&(0!==a||1/a==1/t)}}function Qr(n){return null==n?"":we(n).replace(eu,it)}function Xr(n){return n}function Yr(n,t,r){var u=!0,o=t&&_t(t);t&&(r||o.length)||(null==r&&(r=t),a=g,t=n,n=e,o=_t(t)),r===!1?u=!1:It(r)&&"chain"in r&&(u=r.chain);var a=n,i=Et(a);Qt(o,function(r){var e=n[r]=t[r];i&&(a.prototype[r]=function(){var t=this.__chain__,r=this.__wrapped__,o=[r];Te.apply(o,arguments);var i=e.apply(n,o);if(u||t){if(r===i&&It(i))return this;i=new a(i),i.__chain__=t}return i})})}function Zr(){return n._=Ce,this}function ne(){}function te(n){return function(t){return t[n]}}function re(n,t,r){var e=null==n,u=null==t;if(null==r&&("boolean"==typeof n&&u?(r=n,n=1):u||"boolean"!=typeof t||(r=t,u=!0)),e&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ge();return Me(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return et(n,t)}function ee(n,t){if(n){var r=n[t];return Et(r)?n[t]():r}}function ue(n,t,r){var u=e.templateSettings;n=we(n||""),r=ou({},r,u);var o,a=ou({},r.imports,u.imports),f=Ze(a),l=Kt(a),c=0,p=r.interpolate||I,s="__p += '",v=_e((r.escape||I).source+"|"+p.source+"|"+(p===R?C:I).source+"|"+(r.evaluate||I).source+"|$","g");n.replace(v,function(t,r,e,u,a,f){return e||(e=u),s+=n.slice(c,f).replace(A,i),r&&(s+="' +\n__e("+r+") +\n'"),a&&(o=!0,s+="';\n"+a+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),c=f+t.length,t}),s+="';\n";var g=r.variable,y=g;y||(g="obj",s="with ("+g+") {\n"+s+"\n}\n"),s=(o?s.replace(j,""):s).replace(k,"$1").replace(x,"$1;"),s="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var m="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+T++ +"]")+"\n*/";try{var d=ye(f,"return "+s+m).apply(h,l)}catch(b){throw b.source=s,b}return t?d(t):(d.source=s,d)}function oe(n,t,r){n=(n=+n)>-1?n:0;var e=-1,u=ve(n);for(t=Q(t,r,1);++e<n;)u[e]=t(e);return u}function ae(n){return null==n?"":we(n).replace(ru,pt)}function ie(n){var t=++m;return we(null==n?"":n)+t}function fe(n){return n=new g(n),n.__chain__=!0,n}function le(n,t){return t(n),n}function ce(){return this.__chain__=!0,this}function pe(){return we(this.__wrapped__)}function se(){return this.__wrapped__}n=n?nt.defaults(J.Object(),n,nt.pick(J,D)):J;var ve=n.Array,he=n.Boolean,ge=n.Date,ye=n.Function,me=n.Math,de=n.Number,be=n.Object,_e=n.RegExp,we=n.String,je=n.TypeError,ke=[],xe=be.prototype,Ce=n._,Oe=xe.toString,Ne=_e("^"+we(Oe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Re=me.ceil,Ee=n.clearTimeout,Ie=me.floor,Se=ye.prototype.toString,Ae=lt(Ae=be.getPrototypeOf)&&Ae,De=xe.hasOwnProperty,Te=ke.push,$e=n.setTimeout,Fe=ke.splice,Be=ke.unshift,We=function(){try{var n={},t=lt(t=be.defineProperty)&&t,r=t(n,n,n)&&t}catch(e){}return r}(),qe=lt(qe=be.create)&&qe,ze=lt(ze=ve.isArray)&&ze,Le=n.isFinite,Pe=n.isNaN,Ke=lt(Ke=be.keys)&&Ke,Ue=me.max,Me=me.min,Ve=n.parseInt,Ge=me.random,He={};He[F]=ve,He[B]=he,He[W]=ge,He[q]=ye,He[L]=be,He[z]=de,He[P]=_e,He[K]=we,g.prototype=e.prototype;var Je=e.support={};Je.funcDecomp=!lt(n.WinRTError)&&S.test(v),Je.funcNames="string"==typeof ye.name,e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:R,variable:"",imports:{_:e}},qe||(H=function(){function t(){}return function(r){if(It(r)){t.prototype=r;var e=new t;t.prototype=null}return e||n.Object()}}());var Qe=We?function(n,t){V.value=t,We(n,"__bindData__",V)}:ne,Xe=ze||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==F||!1},Ye=function(n){var t,r=n,e=[];if(!r)return e;if(!G[typeof n])return e;for(t in r)De.call(r,t)&&e.push(t);return e},Ze=Ke?function(n){return It(n)?Ke(n):[]}:Ye,nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tu=jt(nu),ru=_e("("+Ze(tu).join("|")+")","g"),eu=_e("["+Ze(nu).join("")+"]","g"),uu=function(n,t,r){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof r?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&G[typeof u])for(var c=-1,p=G[typeof u]&&Ze(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ou=function(n,t,r){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof r?2:a.length;++i<f;)if(u=a[i],u&&G[typeof u])for(var l=-1,c=G[typeof u]&&Ze(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},au=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!G[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(e in u)if(t(u[e],e,n)===!1)return o;return o},iu=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!G[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(var a=-1,i=G[typeof u]&&Ze(u),f=i?i.length:0;++a<f;)if(e=i[a],t(u[e],e,n)===!1)return o;return o},fu=Ae?function(n){if(!n||Oe.call(n)!=L)return!1;var t=n.valueOf,r=lt(t)&&(r=Ae(t))&&Ae(r);return r?n==r||Ae(n)==r:ct(n)}:ct,lu=ot(function(n,t,r){De.call(n,r)?n[r]++:n[r]=1}),cu=ot(function(n,t,r){(De.call(n,r)?n[r]:n[r]=[]).push(t)}),pu=ot(function(n,t,r){n[r]=t}),su=Zt,vu=Gt,hu=lt(hu=ge.now)&&hu||function(){return(new ge).getTime()},gu=8==Ve(w+"08")?Ve:function(n,t){return Ve($t(n)?n.replace(E,""):n,t||0)};return e.after=Dr,e.assign=uu,e.at=Ut,e.bind=Tr,e.bindAll=$r,e.bindKey=Fr,e.chain=fe,e.compact=pr,e.compose=Br,e.constant=Hr,e.countBy=lu,e.create=gt,e.createCallback=Jr,e.curry=Wr,e.debounce=qr,e.defaults=ou,e.defer=zr,e.delay=Lr,e.difference=sr,e.filter=Gt,e.flatten=yr,e.forEach=Qt,e.forEachRight=Xt,e.forIn=au,e.forInRight=dt,e.forOwn=iu,e.forOwnRight=bt,e.functions=_t,e.groupBy=cu,e.indexBy=pu,e.initial=dr,e.intersection=br,e.invert=jt,e.invoke=Yt,e.keys=Ze,e.map=Zt,e.mapValues=Bt,e.max=nr,e.memoize=Pr,e.merge=Wt,e.min=tr,e.omit=qt,e.once=Kr,e.pairs=zt,e.partial=Ur,e.partialRight=Mr,e.pick=Lt,e.pluck=su,e.property=te,e.pull=jr,e.range=kr,e.reject=ur,e.remove=xr,e.rest=Cr,e.shuffle=ar,e.sortBy=lr,e.tap=le,e.throttle=Vr,e.times=oe,e.toArray=cr,e.transform=Pt,e.union=Nr,e.uniq=Rr,e.values=Kt,e.where=vu,e.without=Er,e.wrap=Gr,e.xor=Ir,e.zip=Sr,e.zipObject=Ar,e.collect=Zt,e.drop=Cr,e.each=Qt,e.eachRight=Xt,e.extend=uu,e.methods=_t,e.object=Ar,e.select=Gt,e.tail=Cr,e.unique=Rr,e.unzip=Sr,Yr(e),e.clone=vt,e.cloneDeep=ht,e.contains=Mt,e.escape=Qr,e.every=Vt,e.find=Ht,e.findIndex=vr,e.findKey=yt,e.findLast=Jt,e.findLastIndex=hr,e.findLastKey=mt,e.has=wt,e.identity=Xr,e.indexOf=mr,e.isArguments=st,e.isArray=Xe,e.isBoolean=kt,e.isDate=xt,e.isElement=Ct,e.isEmpty=Ot,e.isEqual=Nt,e.isFinite=Rt,e.isFunction=Et,e.isNaN=St,e.isNull=At,e.isNumber=Dt,e.isObject=It,e.isPlainObject=fu,e.isRegExp=Tt,e.isString=$t,e.isUndefined=Ft,e.lastIndexOf=wr,e.mixin=Yr,e.noConflict=Zr,e.noop=ne,e.now=hu,e.parseInt=gu,e.random=re,e.reduce=rr,e.reduceRight=er,e.result=ee,e.runInContext=v,e.size=ir,e.some=fr,e.sortedIndex=Or,e.template=ue,e.unescape=ae,e.uniqueId=ie,e.all=Vt,e.any=fr,e.detect=Ht,e.findWhere=Ht,e.foldl=rr,e.foldr=er,e.include=Mt,e.inject=rr,Yr(function(){var n={};return iu(e,function(t,r){e.prototype[r]||(n[r]=t)}),n}(),!1),e.first=gr,e.last=_r,e.sample=or,e.take=gr,e.head=gr,iu(e,function(n,t){var r="sample"!==t;e.prototype[t]||(e.prototype[t]=function(t,e){var u=this.__chain__,o=n(this.__wrapped__,t,e);return u||null!=t&&(!e||r&&"function"==typeof t)?new g(o,u):o})}),e.VERSION="2.4.1",e.prototype.chain=ce,e.prototype.toString=pe,e.prototype.value=se,e.prototype.valueOf=se,Qt(["join","pop","shift"],function(n){var t=ke[n];e.prototype[n]=function(){var n=this.__chain__,r=t.apply(this.__wrapped__,arguments);return n?new g(r,n):r}}),Qt(["push","reverse","sort","unshift"],function(n){var t=ke[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Qt(["concat","slice","splice"],function(n){var t=ke[n];e.prototype[n]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),e}var h,g=[],y=[],m=0,d=+new Date+"",b=75,_=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,O=/\w*$/,N=/^\s*function[ \n\r\t]+\w/,R=/<%=([\s\S]+?)%>/g,E=RegExp("^["+w+"]*0+(?=.$)"),I=/($^)/,S=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,D=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],T=0,$="[object Arguments]",F="[object Array]",B="[object Boolean]",W="[object Date]",q="[object Function]",z="[object Number]",L="[object Object]",P="[object RegExp]",K="[object String]",U={};U[q]=!1,U[$]=U[F]=U[B]=U[W]=U[z]=U[L]=U[P]=U[K]=!0;var M={leading:!1,maxWait:0,trailing:!1},V={configurable:!1,enumerable:!1,value:null,writable:!1},G={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},H={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=G[typeof window]&&window||this,Q=G[typeof exports]&&exports&&!exports.nodeType&&exports,X=G[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===Q&&Q,Z=G[typeof n]&&n;!Z||Z.global!==Z&&Z.window!==Z||(J=Z);var nt=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(J._=nt,define(function(){return nt})):Q&&X?Y?(X.exports=nt)._=nt:Q._=nt:J._=nt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],3:[function(require,module,exports){
function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){function r(e){var r=t[e];if(!r)if(i)r=2==t.length?function(n){t(e,n)}:t;else for(var a=arguments.length;--a&&!(r=t[arguments[a]]););o[e]=r&&function(t){r(t+_locator(n))}||function(){}}if(!t){if(e instanceof DOMHandler)return e;t=e}var o={},i=t instanceof Function;return n=n||{},r("warning","warn"),r("error","warn","warning"),r("fatalError","warn","warning","error"),o}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){return t?"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]":void 0}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.document.appendChild(e)}if(DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp=" ",l.copy="©",c[""]="http://www.w3.org/1999/xhtml"),t?r.parse(t,c,l):r.errorHandler.error("invalid document source"),o.document},DOMHandler.prototype={startDocument:function(){this.document=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.document,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;a>c;c++){var t=r.getURI(c),l=r.getValue(c),n=r.getQName(c),s=o.createAttributeNS(t,n);s.getOffset&&position(s.getOffset(1),s),s.value=s.nodeValue=l,i.setAttributeNode(s)}},endElement:function(){{var t=this.currentElement;t.tagName}this.currentElement=t.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(t,e){var n=this.document.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(){},characters:function(t){if(t=_toString.apply(this,arguments),this.currentElement&&t){if(this.cdata){var e=this.document.createCDATASection(t);this.currentElement.appendChild(e)}else{var e=this.document.createTextNode(t);this.currentElement.appendChild(e)}this.locator&&position(this.locator,e)}},skippedEntity:function(){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t){t=_toString.apply(this,arguments);var e=this.document.createComment(t);this.locator&&position(this.locator,e),appendElement(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){console.warn(t,_locator(this.locator))},error:function(t){console.error(t,_locator(this.locator))},fatalError:function(t){throw console.error(t,_locator(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}}),"function"==typeof require){var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser}
},{"./dom":4,"./sax":5}],4:[function(require,module,exports){
function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){function n(){}var o=e.prototype;if(Object.create){var i=Object.create(t.prototype);o.__proto__=i}o instanceof t||(n.prototype=t.prototype,n=new n,copy(o,n),e.prototype=o=n),o.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),o.constructor=e)}function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error);for(var i=t.length-1;i>o;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_visitNode(e,t))return!0;while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do i.parentNode=e;while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);var o=e.lastChild}var o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function serializeToString(e,t){switch(e.nodeType){case ELEMENT_NODE:var n=e.attributes,o=n.length,i=e.firstChild,r=e.tagName,a=htmlns===e.namespaceURI;t.push("<",r);for(var s=0;o>s;s++)serializeToString(n.item(s),t,a);if(i||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(r)){if(t.push(">"),a&&/^script$/i.test(r))i&&t.push(i.data);else for(;i;)serializeToString(i,t),i=i.nextSibling;t.push("</",r,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var i=e.firstChild;i;)serializeToString(i,t),i=i.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("<!--",e.data,"-->");case DOCUMENT_TYPE_NODE:var u=e.publicId,d=e.systemId;if(t.push("<!DOCTYPE ",e.name),u)t.push(' PUBLIC "',u),d&&"."!=d&&t.push('" "',d),t.push('">');else if(d&&"."!=d)t.push(' SYSTEM "',d,'">');else{var c=e.internalSubset;c&&t.push(" [",c,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:o=t.cloneNode(!1),o.ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;u>d;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}function getTextContent(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)?!0:!1},createDocument:function(e,t,n){var o=new Document;if(o.doctype=n,n&&o.appendChild(n),o.implementation=this,o.childNodes=new NodeList,t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){return 1==n.nodeType&&n.getAttribute("id")==e?(t=n,!0):void 0}),t},createElement:function(e){var t=new Element;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList;var n=t.attributes=new NamedNodeMap;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(){throw new Error(ExceptionMessage[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var o=this.data.substring(0,e),i=this.data.substring(e+t);n=o+n+i,this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e){var t=[];return serializeToString(e,t),t.join("")},Node.prototype.toString=function(){return XMLSerializer.prototype.serializeToString(this)};try{Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n})}catch(e){}"function"==typeof require&&(exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer);
},{}],5:[function(require,module,exports){
function XMLReader(){}function parse(e,t,r,a,n){function s(e){if(e>65535){e-=65536;var t=55296+(e>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function i(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?s(parseInt(t.substr(1).replace("x","0x"))):(n.error("entity not found:"+e),e)}function c(t){var r=e.substring(S,t).replace(/&#?\w+;/g,i);m&&o(S),a.characters(r,0,t-S),S=t}function o(t,r){for(;t>=l&&(r=f.exec(e));)u=r.index,l=u+r[0].length,m.lineNumber++;m.columnNumber=t-u+1}for(var u=0,l=0,f=/.+(?:\r\n?|\n)|.*$/g,m=a.locator,p=[{currentNSMap:t}],d={},S=0;;){var _=e.indexOf("<",S);if(0>_){if(!e.substr(S).match(/^\s*$/)){var h=a.document,g=h.createTextNode(e.substr(S));h.appendChild(g),a.currentElement=g}return}switch(_>S&&c(_),e.charAt(_+1)){case"/":var w=e.indexOf(">",_+3),b=e.substring(_+2,w),v=p.pop(),x=v.localNSMap;if(v.tagName!=b&&n.fatalError("end tag name: "+b+" is not match the current start tagName:"+v.tagName),a.endElement(v.uri,v.localName,b),x)for(var T in x)a.endPrefixMapping(T);w++;break;case"?":m&&o(_),w=parseInstruction(e,_,a);break;case"!":m&&o(_),w=parseDCC(e,_,a,n);break;default:try{m&&o(_);var N=new ElementAttributes,w=parseElementStartPart(e,_,N,i,n),E=N.length;if(E&&m){for(var A=copyLocator(m,{}),_=0;E>_;_++){var C=N[_];o(C.offset),C.offset=copyLocator(m,{})}copyLocator(A,m)}!N.closed&&fixSelfClosed(e,w,N.tagName,d)&&(N.closed=!0,r.nbsp||n.warning("unclosed xml attribute")),appendElement(N,a,p),"http://www.w3.org/1999/xhtml"!==N.uri||N.closed?w++:w=parseHtmlSpecialContent(e,w,N.tagName,i,a)}catch(F){n.error("element parse error: "+F),w=-1}}0>w?c(_+1):S=w}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,a,n){for(var s,i,c=++t,o=S_TAG;;){var u=e.charAt(c);switch(u){case"=":if(o===S_ATTR)s=e.slice(t,c),o=S_EQ;else{if(o!==S_ATTR_S)throw new Error("attribute equal must after attrName");o=S_EQ}break;case"'":case'"':if(o===S_EQ){if(t=c+1,c=e.indexOf(u,t),!(c>0))throw new Error("attribute value no end '"+u+"' match");i=e.slice(t,c).replace(/&#?\w+;/g,a),r.add(s,i,t-1),o=S_E}else{if(o!=S_V)throw new Error('attribute value must after "="');i=e.slice(t,c).replace(/&#?\w+;/g,a),r.add(s,i,t),n.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=c+1,o=S_E}break;case"/":switch(o){case S_TAG:r.setTagName(e.slice(t,c));case S_E:case S_S:case S_C:o=S_C,r.closed=!0;case S_V:case S_ATTR:case S_ATTR_S:break;default:throw new Error("attribute invalid close char('/')")}break;case"":n.error("unexpected end of input");case">":switch(o){case S_TAG:r.setTagName(e.slice(t,c));case S_E:case S_S:case S_C:break;case S_V:case S_ATTR:i=e.slice(t,c),"/"===i.slice(-1)&&(r.closed=!0,i=i.slice(0,-1));case S_ATTR_S:o===S_ATTR_S&&(i=s),o==S_V?(n.warning('attribute "'+i+'" missed quot(")!!'),r.add(s,i.replace(/&#?\w+;/g,a),t)):(n.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),r.add(i,i,t));break;case S_EQ:throw new Error("attribute value missed!!")}return c;case"":u=" ";default:if(" ">=u)switch(o){case S_TAG:r.setTagName(e.slice(t,c)),o=S_S;break;case S_ATTR:s=e.slice(t,c),o=S_ATTR_S;break;case S_V:var i=e.slice(t,c).replace(/&#?\w+;/g,a);n.warning('attribute "'+i+'" missed quot(")!!'),r.add(s,i,t);case S_E:o=S_S}else switch(o){case S_ATTR_S:n.warning('attribute "'+s+'" missed value!! "'+s+'" instead!!'),r.add(s,s,t),t=c,o=S_ATTR;break;case S_E:n.warning('attribute space is required"'+s+'"!!');case S_S:o=S_ATTR,t=c;break;case S_EQ:o=S_V,t=c;break;case S_C:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function appendElement(e,t,r){for(var a=e.tagName,n=null,s=r[r.length-1].currentNSMap,i=e.length;i--;){var c=e[i],o=c.qName,u=c.value,l=o.indexOf(":");if(l>0)var f=c.prefix=o.slice(0,l),m=o.slice(l+1),p="xmlns"===f&&m;else m=o,f=null,p="xmlns"===o&&"";c.localName=m,p!==!1&&(null==n&&(n={},_copy(s,s={})),s[p]=n[p]=u,c.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,u))}for(var i=e.length;i--;){c=e[i];var f=c.prefix;f&&("xml"===f&&(c.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==f&&(c.uri=s[f]))}var l=a.indexOf(":");l>0?(f=e.prefix=a.slice(0,l),m=e.localName=a.slice(l+1)):(f=null,m=e.localName=a);var d=e.uri=s[f||""];if(t.startElement(d,m,a,e),e.closed){if(t.endElement(d,m,a),n)for(f in n)t.endPrefixMapping(f)}else e.currentNSMap=s,e.localNSMap=n,r.push(e)}function parseHtmlSpecialContent(e,t,r,a,n){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),i=e.substring(t+1,s);if(/[&<]/.test(i))return/^script$/i.test(r)?(n.characters(i,0,i.length),s):(i=i.replace(/&#?\w+;/g,a),n.characters(i,0,i.length),s)}return t+1}function fixSelfClosed(e,t,r,a){var n=a[r];return null==n&&(n=a[r]=e.lastIndexOf("</"+r+">")),t>n}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,a){var n=e.charAt(t+2);switch(n){case"-":if("-"===e.charAt(t+3)){var s=e.indexOf("-->",t+4);return s>t?(r.comment(e,t+4,s-t-4),s+3):(a.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){var s=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,s-t-9),r.endCDATA(),s+3}var i=split(e,t),c=i.length;if(c>1&&/!doctype/i.test(i[0][0])){var o=i[1][0],u=c>3&&/^public$/i.test(i[2][0])&&i[3][0],l=c>4&&i[4][0],f=i[c-1];return r.startDTD(o,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),f.index+f[0].length}}return-1}function parseInstruction(e,t,r){var a=e.indexOf("?>",t);if(a){var n=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){{n[0].length}return r.processingInstruction(n[1],n[2]),a+2}return-1}return-1}function ElementAttributes(){}function _set_proto_(e,t){return e.__proto__=t,e}function split(e,t){var r,a=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(a.push(r),r[1])return a}var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"·̀-ͯ\\ux203F-⁀]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_S=2,S_EQ=3,S_V=4,S_E=5,S_S=6,S_C=7;XMLReader.prototype={parse:function(e,t,r){var a=this.domBuilder;a.startDocument(),_copy(t,t={}),parse(e,t,r,a,this.errorHandler),a.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getOffset:function(e){return this[e].offset},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function r(){}r.prototype=t,r=new r;for(t in e)r[t]=e[t];return r}),"function"==typeof require&&(exports.XMLReader=XMLReader);
},{}],6:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),g={};g.isDrawable=function(o){return Array.isArray(o)&&(o=o[0]),o?"function"==typeof o.draw?!0:void 0!==o.x&&void 0!==o.y?!0:void 0!==o.r&&void 0!==o.g&&void 0!==o.b?!0:!1:!1},g.drawPoints=function(o,i){var r,t;for(o.fillStyle="blue",o.beginPath(),t=0;t<i.length;t+=1)r=i[t],o.moveTo(r.x,r.y),o.arc(r.x,r.y,2,0,2*Math.PI,!1);o.fill()},g.drawColors=function(o,i){var r,t;for(o.save(),r=0;r<i.length;r+=1)t=i[r],o.fillStyle=Color.toCSS(t),o.fillRect(0,0,30,30),o.translate(30,0);o.restore()},g.draw=function(o,i){var r,t,e;if(i)if("function"==typeof i.draw)i.draw(o);else if(void 0!==i.x&&void 0!==i.y)g.drawPoints(o,[i]);else if(void 0!==i.r&&void 0!==i.g&&void 0!==i.b)g.drawColors(o,[i]);else if(Array.isArray(i)&&(t=i.length,t>0))if(e=i[0],"function"==typeof e.draw)for(r=0;t>r;r+=1)g.draw(o,i[r]);else void 0!==e.x&&void 0!==e.y?g.drawPoints(o,i):void 0!==e.r&&void 0!==e.g&&void 0!==e.b&&g.drawColors(o,i)},g.toSVG=function(o,i){i=i||{};var r=i.header===!0,t=void 0!==i.x?i.x:0,e=void 0!==i.y?i.y:0,n=void 0!==i.width?i.width:500,d=void 0!==i.height?i.height:500,l="";if(o)if("function"==typeof o.toSVG)l=o.toSVG();else if(Array.isArray(o)){l="<g>\n";for(var a=0,v=o.length;v>a;a+=1)l+=g.toSVG(o[a])+"\n";l+="</g>\n"}return r&&(l='<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="'+t+'" y="'+e+'" width="'+n+'px" height="'+d+'px" viewBox="'+t+" "+e+" "+n+" "+d+'">\n'+l+"</svg>\n"),l},module.exports=g;
},{"../objects/color":10}],7:[function(require,module,exports){
"use strict";var _=require("lodash"),ClipperLib=require("js-clipper"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),random=require("../util/random"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),g={};g.bounds=function(e){var n,r,t;if(e){if("function"==typeof e.bounds)return e.bounds();if(void 0!==e.x&&void 0!==e.y)return new Rect(e.x,e.y,0,0);if(void 0!==e.r&&void 0!==e.g&&void 0!==e.b)return new g.Rect(0,0,30,30);if(Array.isArray(e)){if(n=null,t=e.length,t>0&&void 0!==e[0].r&&void 0!==e[0].g&&void 0!==e[0].b)return new Rect(0,0,30*e.length,30);for(r=0;t>r;r+=1)n=n?n.unite(g.bounds(e[r])):g.bounds(e[r]);return n||new Rect}return new Rect}return new Rect},g.makeCenteredRect=function(e,n,r,t){var o=e-r/2,i=n-t/2;return new Rect(o,i,r,t)},g.makePoint=function(e,n){return new Point(e,n)},g.makeRect=function(e,n,r,t){return new Rect(e,n,r,t)},g.merge=function(){return new Group(_.reject(_.flatten(arguments,!0),_.isEmpty))},g.combinePaths=function(e){return Path.combine(e)},g.shapePoints=g.toPoints=function(e){if(!e)return[];if(e.commands)return _.map(_.filter(e.commands,function(e){return void 0!==e.x?!0:!1}),function(e){return{x:e.x,y:e.y}});var n,r=[];for(n=0;n<e.shapes.length;n+=1)r=r.concat(g.shapePoints(e.shapes[n]));return r},g.colorize=function(e,n,r,t){return e?e.colorize(n,r,t):void 0},g.translate=function(e,n){n||(n=Point.ZERO);var r=(new Transform).translate(n.x,n.y);return r.transformShape(e)},g.scale=function(e,n,r){r||(r=Point.ZERO);var t,o;"number"==typeof n?(t=n,o=n):(t=n.x,o=n.y);var i=new Transform;return i=i.translate(r.x,r.y),i=i.scale(t/100,o/100),i=i.translate(-r.x,-r.y),i.transformShape(e)},g.rotate=function(e,n,r){r||(r=Point.ZERO);var t=new Transform;return t=t.translate(r.x,r.y),t=t.rotate(n),t=t.translate(-r.x,-r.y),t.transformShape(e)},g.skew=function(e,n,r){r||(r=Point.ZERO);var t=new Transform;return t=t.translate(r.x,r.y),t=t.skew(n.x,n.y),t=t.translate(-r.x,-r.y),t.transformShape(e)},g.copy=function(e,n,r,t,o,i){var a,s,u,h,c=[],f=0,p=0,l=0,y=1,g=1;for(a=0;n>a;a+=1){for(s=new Transform,u=0;u<r.length;u+=1)h=r[u],"t"===h?s=s.translate(f,p):"r"===h?s=s.rotate(l):"s"===h&&(s=s.scale(y,g));c.push(s.transformShape(e)),f+=t.x,p+=t.y,l+=o,y+=i.x,g+=i.y}return c},g.fit=function(e,n,r,t,o){if(e){o=void 0!==o?o:!0;var i,a,s,u=e.bounds(),h=u.x,c=u.y,f=u.width,p=u.height;return f=f>1e-12?f:0,p=p>1e-12?p:0,i=new Transform,i=i.translate(n.x,n.y),o?(a=f>0?r/f:Number.MAX_VALUE,s=p>0?t/p:Number.MAX_VALUE,a=s=Math.min(a,s)):(a=f>0?r/f:1,s=p>0?t/p:1),i=i.scale(a,s),i=i.translate(-f/2-h,-p/2-c),i.transformShape(e)}},g.fitTo=function(e,n,r){if(e&&n){var t=n.bounds(),o=t.x,i=t.y,a=t.width,s=t.height;return g.fit(e,{x:o+a/2,y:i+s/2},a,s,r)}},g.reflect=function(e,n,r,t){if(e){n=n||new Point,r=r||0;var o=function(e,t){var o=geo.distance(e,t,n.x,n.y),i=geo.angle(e,t,n.x,n.y),a=geo.coordinates(n.x,n.y,o*Math.cos(math.radians(i-r)),180+r);return o=geo.distance(e,t,a.x,a.y),i=geo.angle(e,t,a.x,a.y),a=geo.coordinates(e,t,2*o,i),new Point(a.x,a.y)},i=function(e){for(var n,r,t,i=new Path([],e.fill,e.stroke,e.strokeWidth),a=0;a<e.commands.length;a+=1){var s=e.commands[a];if(s.type===bezier.MOVETO)n=o(s.x,s.y),i.moveTo(n.x,n.y);else if(s.type===bezier.LINETO)n=o(s.x,s.y),i.lineTo(n.x,n.y);else if(s.type===bezier.CURVETO)n=o(s.x,s.y),r=o(s.x1,s.y1),t=o(s.x2,s.y2),i.curveTo(r.x,r.y,t.x,t.y,n.x,n.y);else{if(s.type!==bezier.CLOSE)throw new Error("Unknown command "+s);i.close()}}return i},a=function(e){var n=_.map(e.shapes,function(e){return s(e)});return new Group(n)},s=function(e){var n=e.shapes?a:i;return n(e)},u=s(e);return t?new Group([e,u]):u}},g.resample=function(e,n,r,t,o){return e?"length"===n?e.resampleByLength(r):e.resampleByAmount(t,o):void 0},g.wiggle=function(e,n,r,t){var o,i,a,s;if(n=n||"points",void 0===r?r={x:10,y:10}:"number"==typeof r&&(r={x:r,y:r}),t=void 0!==t?t:Math.random(),o=random.generator(t),i=function(e){var n,t,a;if(e.commands){var s=new Path([],e.fill,e.stroke,e.strokeWidth);for(n=0;n<e.commands.length;n+=1){t=(o(0,1)-.5)*r.x*2,a=(o(0,1)-.5)*r.y*2;var u=e.commands[n];u.type===bezier.MOVETO?s.moveTo(u.x+t,u.y+a):u.type===bezier.LINETO?s.lineTo(u.x+t,u.y+a):u.type===bezier.CURVETO?s.curveTo(u.x1,u.y1,u.x2,u.y2,u.x+t,u.y+a):u.type===bezier.CLOSE&&s.close()}return s}if(e.shapes)return new Group(_.map(e.shapes,i));if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){var h=[];for(n=0;n<e.length;n+=1)t=(o(0,1)-.5)*r.x*2,a=(o(0,1)-.5)*r.y*2,h.push(new Point(e[n].x+t,e[n].y+a));return h}return _.map(e,i)},a=function(e){if(e.commands)return e;if(e.shapes){var n,t,i,s,u,h=[];for(n=0;n<e.shapes.length;n+=1)t=e.shapes[n],t.commands?(i=(o(0,1)-.5)*r.x*2,s=(o(0,1)-.5)*r.y*2,u=(new Transform).translate(i,s),h.push(u.transformShape(t))):t.shapes&&h.push(a(t));return new Group(h)}return _.map(e,a)},s=function(e){if(e.commands){var n,t,i,a,u=g.getContours(e),h=[];for(n=0;n<u.length;n+=1)t=(o(0,1)-.5)*r.x*2,i=(o(0,1)-.5)*r.y*2,a=(new Transform).translate(t,i),h=h.concat(a.transformShape(new Path(u[n])).commands);return new Path(h,e.fill,e.stroke,e.strokeWidth)}return e.shapes?new Group(_.map(e.shapes,s)):_.map(e,s)},"points"===n)return i(e);if("paths"===n)return a(e);if("contours"===n)return s(e);throw new Error("Invalid scope.")},g.scatter=function(e,n,r){if(e){r=void 0!==r?r:Math.random();var t,o,i,a,s=random.generator(r),u=e.bounds(),h=u.x,c=u.y,f=u.width,p=u.height,l=e.points(100),y=[];for(t=0;n>t;t+=1)for(o=100;o>0;){if(i=h+s(0,1)*f,a=c+s(0,1)*p,geo.pointInPolygon(l,i,a)){y.push(new Point(i,a));break}o-=1}return y}},g.connect=function(e,n){if(e){for(var r=new Path,t=0;t<e.length;t+=1){var o=e[t];0===t?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y)}return n&&r.close(),r.fill=null,r.stroke=Color.BLACK,r}},g.align=function(e,n,r,t){if(e){var o,i,a,s=n.x,u=n.y,h=e.bounds();return o="left"===r?s-h.x:"right"===r?s-h.x-h.width:"center"===r?s-h.x-h.width/2:0,i="top"===t?u-h.y:"bottom"===t?u-h.y-h.height:"middle"===t?u-h.y-h.height/2:0,a=(new Transform).translate(o,i),a.transformShape(e)}},g.snap=function(e,n,r,t){if(e){r=void 0!==r?r:100,r/=100,t=t||Point.ZERO;var o=function(e){if(e.commands){for(var i=new Path([],e.fill,e.stroke,e.strokeWidth),a=0;a<e.commands.length;a+=1){var s=e.commands[a];if(s.type===bezier.MOVETO||s.type===bezier.LINETO||s.type===bezier.CURVETO){var u=math.snap(s.x+t.x,n,r)-t.x,h=math.snap(s.y+t.y,n,r)-t.y;if(s.type===bezier.MOVETO)i.moveTo(u,h);else if(s.type===bezier.LINETO)i.lineTo(u,h);else if(s.type===bezier.CURVETO){var c=math.snap(s.x1+t.x,n,r)-t.x,f=math.snap(s.y1+t.y,n,r)-t.y,p=math.snap(s.x2+t.x,n,r)-t.x,l=math.snap(s.y2+t.y,n,r)-t.y;i.curveTo(c,f,p,l,u,h)}}else{if(s.type!==bezier.CLOSE)throw new Error("Invalid path command "+s);i.close()}}return i}return e.shapes?new Group(_.map(e.shapes,o)):_.map(e,o)};return o(e)}},g.deletePoints=function(e,n,r){var t=function(e){var o,i,a,s=[],u=[];if(e.commands){for(o=0;o<e.commands.length;o+=1)i=e.commands[o],(void 0===i.x||!r&&n.contains(i.x,i.y)||r&&!n.contains(i.x,i.y))&&s.push(i);return new Path(s,e.fill,e.stroke,e.strokeWidth)}if(e.shapes)return new Group(_.map(e.shapes,t));if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){for(o=0;o<e.length;o+=1)a=e[o],(!r&&n.contains(a.x,a.y)||r&&!n.contains(a.x,a.y))&&u.push(a);return u}return _.map(e,t)};return t(e)},g.deletePaths=function(e,n,r){var t=function(e){if(e.commands)return null;if(e.shapes){var o,i,a,s,u,h,c=[];for(o=0;o<e.shapes.length;o+=1)if(a=e.shapes[o],a.commands){for(s=!1,i=0;i<a.commands.length;i+=1)if(u=a.commands[i],void 0!==u.x&&n.contains(u.x,u.y)){s=!0;break}s!==r&&c.push(a)}else a.shapes&&(h=t(a),0!==h.length&&c.push(h));return new Group(c)}return _.map(e,t)};return t(e)},g["delete"]=function(e,n,r,t){if(null===e||null===n)return null;if("points"===r)return g.deletePoints(e,n,t);if("paths"===r)return g.deletePaths(e,n,t);throw new Error("Invalid scope.")},g.pointOnPath=function(e,n){var r;if(e)return e.shapes&&(e=new Path(g.combinePaths(e))),n=Math.abs(n%100),r=e.point(n/100),{x:r.x,y:r.x}},g.shapeOnPath=function(e,n,r,t,o,i,a){function s(i){if("distributed"===t){var s=y/(r*e.length-1);h=m*s/y,h=g+h*(1-2*g)}else h=m*o%y/y,h=g+h*(1-g),"trailing"===t&&(h=1-h);c=n.point(h),f=n.point(h+1e-7),p=geo.angle(c.x,c.y,f.x,f.y),a&&(c=geo.coordinates(c.x,c.y,a,p-90)),l=new Transform,l=l.translate(c.x,c.y),l=l.rotate(p),d.push(l.transformShape(i)),m+=1}if(!e)return[];if(null===n)return[];"trailing"===t&&(e=e.slice(),e.reverse());var u,h,c,f,p,l,y=n.length()-i,g=i/n.length(),m=0,d=[];for(u=0;r>u;u+=1)_.each(e,s);return d},g._x=function(e){return void 0!==e.x?e.x:e.bounds().x},g._y=function(e){return void 0!==e.y?e.y:e.bounds().y},g._angleToPoint=function(e){return function(n){if(void 0!==n.x&&void 0!==n.y)return geo.angle(n.x,n.y,e.x,e.y);var r=n.bounds().centroid();return geo.angle(r.x,r.y,e.x,e.y)}},g._distanceToPoint=function(e){return function(n){if(void 0!==n.x&&void 0!==n.y)return geo.distance(n.x,n.y,e.x,e.y);var r=n.bounds().centroid();return geo.distance(r.x,r.y,e.x,e.y)}},g.sort=function(e,n,r){if(e){var t,o,i;return t={x:g._x,y:g._y,angle:g._angleToPoint(r),distance:g._distanceToPoint(r)},o=t[n],void 0===o?e:(i=e.slice(0),i.sort(function(e,n){var r=o(e),t=o(n);return t>r?-1:r>t?1:0}),i)}},g.group=function(){return new Group(_.flatten(arguments))},g.ungroup=function(e){if(e){if(e.shapes){var n,r,t=[];for(n=0;n<e.shapes.length;n+=1)r=e.shapes[n],r.commands?t.push(r):r.shapes&&(t=t.concat(g.ungroup(r)));return t}return e.commands?[e]:[]}return[]},g.centroid=function(e){if(!e)return Point.ZERO;var n=e.bounds();return new Point(n.x+n.width/2,n.y+n.height/2)},g.link=function(e,n,r){if(e&&n){var t=new Path,o=e.bounds(),i=n.bounds();if("horizontal"===r){var a=(i.x-(o.x+o.width))/2;t.moveTo(o.x+o.width,o.y),t.curveTo(o.x+o.width+a,o.y,i.x-a,i.y,i.x,i.y),t.lineTo(i.x,i.y+i.height),t.curveTo(i.x-a,i.y+i.height,o.x+o.width+a,o.y+o.height,o.x+o.width,o.y+o.height),t.close()}else{var s=(i.y-(o.y+o.height))/2;t.moveTo(o.x,o.y+o.height),t.curveTo(o.x,o.y+o.height+s,i.x,i.y-s,i.x,i.y),t.lineTo(i.x+i.width,i.y),t.curveTo(i.x+i.width,i.y-s,o.x+o.width,o.y+o.height+s,o.x+o.width,o.y+o.height),t.close()}return t}},g.stack=function(e,n,r){if(!e)return[];if(e.length<=1)return e;var t,o,i,a,s=e[0].bounds(),u=[];return"e"===n?(t=-(s.width/2),_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(t-a.x,0),u.push(i.transformShape(e)),t+=a.width+r})):"w"===n?(t=s.width/2,_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(t+a.x,0),u.push(i.transformShape(e)),t-=a.width+r})):"n"===n?(o=s.height/2,_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(0,o+a.y),u.push(i.transformShape(e)),o-=a.height+r})):"s"===n&&(o=-(s.height/2),_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(0,o-a.y),u.push(i.transformShape(e)),o+=a.height+r})),u},g.colorLookup=function(e,n){switch(e=Color.parse(e),n){case"r":return e.r;case"g":return e.g;case"b":return e.b;case"a":return e.a;case"h":return e.h;case"s":return e.s;case"v":return e.v;default:throw new Error("Unknown component "+n)}},g.compound=function(e,n,r){function t(e){var n,r,t,o,i,a=[];for(n=0;n<e.length;n+=1){for(r=[],t=e[n],o=0;o<t.length;o+=1)i=t[o],i.type!==bezier.CLOSE&&r.push({X:i.x,Y:i.y});a.push(r)}return a}var o={union:ClipperLib.ClipType.ctUnion,difference:ClipperLib.ClipType.ctDifference,intersection:ClipperLib.ClipType.ctIntersection,xor:ClipperLib.ClipType.ctXor};e.commands||(e=Path.combine(e)),n.commands||(n=Path.combine(n));var i=e.resampleByLength(1).contours(),a=n.resampleByLength(1).contours(),s=t(i),u=t(a),h=100;ClipperLib.JS.ScaleUpPaths(s,h),ClipperLib.JS.ScaleUpPaths(u,h);var c=new ClipperLib.Clipper;c.AddPaths(s,ClipperLib.PolyType.ptSubject,e.isClosed()),c.AddPaths(u,ClipperLib.PolyType.ptClip,n.isClosed());var f=new ClipperLib.Paths;c.Execute(o[r],f,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),f=ClipperLib.JS.Clean(f,.1*h),ClipperLib.JS.ScaleDownPaths(f,h);var p,l,y,g=new Path;for(p=0;p<f.length;p+=1){for(y=f[p],l=0;l<y.length;l+=1)0===l?g.moveTo(y[l].X,y[l].Y):g.lineTo(y[l].X,y[l].Y);(y[0].X!==y[y.length-1].X||y[0].Y!==y[y.length-1].Y)&&g.closePath()}return g},module.exports=g;
},{"../objects/color":10,"../objects/group":11,"../objects/path":13,"../objects/point":14,"../objects/rect":15,"../objects/transform":17,"../util/bezier":19,"../util/geo":21,"../util/math":23,"../util/random":24,"js-clipper":1,"lodash":2}],8:[function(require,module,exports){
"use strict";var _=require("lodash"),geo=require("../util/geo"),Color=require("../objects/color"),Path=require("../objects/path"),Point=require("../objects/point"),Text=require("../objects/text"),g={};g._rect=function(e,r,t,n){var o=new Path;return o.addRect(e,r,t,n),o},g.roundedRect=function(e,r,t,n,o,a){var u=new Path;return u.addRoundedRect(e,r,t,n,o,a),u},g._ellipse=function(e,r,t,n){var o=new Path;return o.addEllipse(e,r,t,n),o},g._line=function(e,r,t,n){var o=new Path;return o.addLine(e,r,t,n),o},g.quad=function(e,r,t,n,o,a,u,i){var l=new Path;return l.addQuad(e,r,t,n,o,a,u,i),l},g._arc=function(e,r,t,n,o,a,u){var i=new Path;return i.addArc(e,r,t,n,o,a,u),i},g.rect=function(e,r,t,n){return void 0===n||0===n||0===n.x&&0===n.y?g._rect(e.x-r/2,e.y-t/2,r,t):"number"==typeof n?g.roundedRect(e.x-r/2,e.y-t/2,r,t,n,n):g.roundedRect(e.x-r/2,e.y-t/2,r,t,n.x,n.y)},g.ellipse=function(e,r,t){return g._ellipse(e.x-r/2,e.y-t/2,r,t)},g.line=function(e,r,t){var n=g._line(e.x,e.y,r.x,r.y);return n.fill=null,n.stroke="black",t>2&&(n=n.resampleByAmount(t,!1)),n},g.lineAngle=function(e,r,t){var n=geo.coordinates(e.x,e.y,t,r);return g.line(e,n)},g.arc=function(e,r,t,n,o,a){return g._arc(e.x,e.y,r,t,n,o,a)},g.quadCurve=function(e,r,t,n){t/=100;var o=e.x+t*(r.x-e.x),a=e.y+t*(r.y-e.y),u=geo.angle(e.x,e.y,r.x,r.y)+90,i=geo.coordinates(o,a,n,u),l=i.x,c=i.y,g=e.x+2/3*(l-e.x),x=e.y+2/3*(c-e.y),y=r.x+2/3*(l-r.x),d=r.y+2/3*(c-r.y),f=new Path;return f.moveTo(e.x,e.y),f.curveTo(g,x,y,d,r.x,r.y),f.fill=null,f.stroke=Color.BLACK,f},g.polygon=function(e,r,t,n){t=Math.max(t,3);var o,a,u,i,l=e.x,c=e.y,g=r,x=360/t,y=0;n===!0&&(o=geo.coordinates(l,c,g,0),a=geo.coordinates(l,c,g,x),y=-geo.angle(a.x,a.y,o.x,o.y));var d=new Path;for(u=0;t>u;u+=1)i=geo.coordinates(l,c,g,x*u+y),0===u?d.moveTo(i.x,i.y):d.lineTo(i.x,i.y);return d.close(),d},g.star=function(e,r,t,n){var o,a,u,i,l,c=new Path;for(c.moveTo(e.x,e.y+t/2),o=1;2*r>o;o+=1)a=o*Math.PI/r,u=o%2===1?n/2:t/2,i=e.x+u*Math.sin(a),l=e.y+u*Math.cos(a),c.lineTo(i,l);return c.close(),c},g.freehand=function(e){var r,t,n,o=function(e){return""!==e},a=_.filter(e.split("M"),o);a=_.map(a,function(e){return e.replace(/,/g," ")});var u=new Path;for(t=0;t<a.length;t+=1)for(n=_.filter(a[t].split(" "),o),r=0;r<n.length;r+=2)if(void 0!==n[r+1]){var i=parseFloat(n[r]),l=parseFloat(n[r+1]);0===r?u.moveTo(i,l):u.lineTo(i,l)}return u.fill=null,u.stroke=Color.BLACK,u},g.grid=function(e,r,t,n,o){var a,u,i,l,c,g,x,y,d,f=[];for(f.length=e*r,o=void 0!==o?o:Point.ZERO,e>1?(a=t/(e-1),u=o.x-t/2):a=u=o.x,r>1?(i=n/(r-1),l=o.y-n/2):i=l=o.y,d=0,c=0;r>c;c+=1)for(g=0;e>g;g+=1)x=u+g*a,y=l+c*i,f[d]=new Point(x,y),d+=1;return f},g.text=function(){var e=Object.create(Text.prototype);return e.constructor=Text.prototype,Text.apply(e,arguments),e},g.demoRect=function(){return new g.rect({x:0,y:0},100,100,{x:0,y:0})},g.demoEllipse=function(){return new g.ellipse({x:0,y:0},100,100)},module.exports=g;
},{"../objects/color":10,"../objects/path":13,"../objects/point":14,"../objects/text":16,"../util/geo":21,"lodash":2}],9:[function(require,module,exports){
"use strict";function importCommands(r){for(var e in r)g[e]=r[e]}var g={};g.bezier=require("./util/bezier"),g.color=require("./util/color"),g.geo=require("./util/geo"),g.math=require("./util/math"),g.random=require("./util/random"),g.svg=require("./util/svg"),g.Color=require("./objects/color"),g.Group=require("./objects/group"),g.Matrix4=require("./objects/matrix4"),g.Path=require("./objects/path"),g.Point=g.Vec2=require("./objects/point"),g.Rect=require("./objects/rect"),g.Text=require("./objects/text"),g.Transform=g.Matrix3=require("./objects/transform"),g.Vec3=require("./objects/vec3"),importCommands(require("./commands/draw")),importCommands(require("./commands/filters")),importCommands(require("./commands/shapes")),module.exports=g;
},{"./commands/draw":6,"./commands/filters":7,"./commands/shapes":8,"./objects/color":10,"./objects/group":11,"./objects/matrix4":12,"./objects/path":13,"./objects/point":14,"./objects/rect":15,"./objects/text":16,"./objects/transform":17,"./objects/vec3":18,"./util/bezier":19,"./util/color":20,"./util/geo":21,"./util/math":23,"./util/random":24,"./util/svg":25}],10:[function(require,module,exports){
"use strict";var color=require("../util/color"),js=require("../util/js"),HSB="HSB",HEX="HEX",Color=function(r,o,e,t,n){var i,l,s,a,u,h;void 0===r?(i=l=s=0,a=1):Array.isArray(r)?(h=o||{},i=void 0!==r[0]?r[0]:0,l=void 0!==r[1]?r[1]:0,s=void 0!==r[2]?r[2]:0,a=void 0!==r[3]?r[3]:h.range||1):void 0!==r.r?(h=o||{},i=r.r,l=r.g,s=r.b,a=void 0!==r.a?r.a:h.range||1):"string"==typeof r?(u=color.hex2rgb(r),i=u[0],l=u[1],s=u[2],a=1):"number"==typeof r&&(1===arguments.length?(i=l=s=r,a=1):2===arguments.length?(i=l=s=r,"number"==typeof o?a=o:(h=o,a=h.range||1)):3===arguments.length?"number"==typeof e?(i=r,l=o,s=e,a=1):(i=l=s=r,a=o,h=e):4===arguments.length?(i=r,l=o,s=e,"number"==typeof t?a=t:(h=t,a=h.range||1)):(i=r,l=o,s=e,a=t,h=n)),h=h||{},void 0!==h.range&&(i/=h.range,l/=h.range,s/=h.range,a/=h.range),h.mode===HSB?(u=color.hsb2rgb(r,o,e),i=u[0],l=u[1],s=u[2]):h.mode===HEX&&(u=color.hex2rgb(r),i=u[0],l=u[1],s=u[2],a=1),this.r=i,this.g=l,this.b=s,this.a=a};Color.BLACK=new Color(0),Color.WHITE=new Color(1),js.defineAlias(Color,"r","red"),js.defineAlias(Color,"g","green"),js.defineAlias(Color,"b","blue"),js.defineAlias(Color,"a","alpha"),js.defineGetter(Color,"h",function(){return color.rgb2hsb(this.r,this.g,this.b)[0]}),js.defineGetter(Color,"s",function(){return color.rgb2hsb(this.r,this.g,this.b)[1]}),js.defineGetter(Color,"v",function(){return color.rgb2hsb(this.r,this.g,this.b)[2]}),js.defineAlias(Color,"h","hue"),js.defineAlias(Color,"s","saturation"),js.defineAlias(Color,"v","value"),js.defineAlias(Color,"v","brightness"),js.defineGetter(Color,"rgb",function(){return[this.r,this.g,this.b]}),js.defineGetter(Color,"rgba",function(){return[this.r,this.g,this.b,this.a]}),js.defineGetter(Color,"hsb",function(){return color.rgb2hsb(this.r,this.g,this.b)}),js.defineGetter(Color,"hsba",function(){return color.rgb2hsb(this.r,this.g,this.b).concat([this.a])}),Color.prototype.toCSS=function(){return Color.toCSS(this)},Color.prototype.toHex=function(){return this.a>=1?color.rgb2hex(this.r,this.g,this.b):color.rgba2hex(this.r,this.g,this.b,this.a)},Color.clone=function(r){return null===r||void 0===r?null:"string"==typeof r?r:new Color(r.r,r.g,r.b,r.a)},Color.toCSS=function(r){if(null===r)return"none";if(void 0===r)return"black";if("string"==typeof r)return r;if(r instanceof Color){var o=Math.round(255*r.r),e=Math.round(255*r.g),t=Math.round(255*r.b);return"rgba("+o+", "+e+", "+t+", "+r.a+")"}throw new Error("Don't know how to convert "+r+" to CSS.")},Color.toHex=function(r){return Color.parse(r).toHex()},Color.make=function(){var r=Object.create(Color.prototype);return r.constructor=Color.prototype,Color.apply(r,arguments),r},Color.parse=function(r){if(void 0===r||null===r)return new Color(0,0,0,0);if(r instanceof Color)return r;if(color.namedColors[r])return Color.make.apply(null,color.namedColors[r]);if("#"===r[0])return new Color(r,0,0,0,{mode:HEX});if("none"===r)return new Color(0,0,0,0);throw new Error("Color "+r+"can not be parsed")},Color.gray=function(r,o,e){return e=Math.max(e,1),new Color(r/e,r/e,r/e,o/e)},Color.rgb=function(r,o,e,t,n){return n=Math.max(n,1),new Color(r/n,o/n,e/n,t/n)},Color.hsb=function(r,o,e,t,n){return n=Math.max(n,1),new Color(r/n,o/n,e/n,t/n,{mode:HSB})},module.exports=Color;
},{"../util/color":20,"../util/js":22}],11:[function(require,module,exports){
"use strict";var _=require("lodash"),Path=require("../objects/path"),Rect=require("../objects/rect"),Group=function(t){t?t.shapes||t.commands?this.shapes=[t]:t&&(this.shapes=t):this.shapes=[]};Group.prototype.add=function(t){this.shapes.push(t)},Group.prototype.clone=function(){var t,e=[],r=this.shapes.length;for(e.length=r,t=0;r>t;t+=1)e[t]=this.shapes[t].clone();return new Group(e)},Group.prototype.colorize=function(t,e,r){var o=_.map(this.shapes,function(o){return o.colorize(t,e,r)});return new Group(o)},Group.prototype.bounds=function(){if(0===this.shapes.length)return new Rect(0,0,0,0);var t,e,r,o=this.shapes;for(t=0;t<o.length;t+=1)r=o[t],void 0===e&&(e=r.bounds()),(r.shapes&&0!==r.shapes.length||r.commands&&0!==r.commands.length)&&(e=e.unite(r.bounds()));return void 0!==e?e:new Rect(0,0,0,0)},Group.prototype.contains=function(t,e,r){void 0===r&&(r=100);var o,n=this.shapes;for(o=0;o<n.length;o+=1)if(n[o].contains(t,e,r))return!0;return!1},Group.prototype.resampleByAmount=function(t,e){var r,o;return e?(o=_.map(this.shapes,function(r){return r.resampleByAmount(t,e)}),new Group(o)):(r=new Path.combine(this),r.resampleByAmount(t,e))},Group.prototype.resampleByLength=function(t){var e=_.map(this.shapes,function(e){return e.resampleByLength(t)});return new Group(e)},Group.prototype.toSVG=function(){var t;return t=_.map(this.shapes,function(t){return t.toSVG()}),"<g>"+t.join("")+"</g>"},Group.prototype.draw=function(t){var e,r=this.shapes,o=r.length;for(e=0;o>e;e+=1)r[e].draw(t)},module.exports=Group;
},{"../objects/path":13,"../objects/rect":15,"lodash":2}],12:[function(require,module,exports){
"use strict";var Vec3=require("../objects/vec3"),Matrix4=function(m){void 0!==m?this.m=m:(m=new Float32Array(16),m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.m=m)};Matrix4.IDENTITY=new Matrix4,Matrix4.perspective=function(m,t,i,s){var h=new Float32Array(Matrix4.IDENTITY.m),r=1/Math.tan(.5*m);return h[0]=r/t,h[1]=h[2]=h[3]=0,h[5]=r,h[4]=h[6]=h[7]=0,h[8]=h[9]=0,h[10]=-s/(i-s),h[11]=1,h[12]=h[13]=h[15]=0,h[14]=i*s/(i-s),new Matrix4(h)},Matrix4.lookAt=function(m,t,i){var s,h,r,a,e,n,o;return s=new Float32Array(16),h=t.subtract(m).normalize(),r=Vec3.cross(i,h).normalize(),a=Vec3.cross(h,r).normalize(),e=-Vec3.dot(r,m),n=-Vec3.dot(a,m),o=-Vec3.dot(h,m),s[0]=r.x,s[1]=a.x,s[2]=h.x,s[3]=0,s[4]=r.y,s[5]=a.y,s[6]=h.y,s[7]=0,s[8]=r.z,s[9]=a.z,s[10]=h.z,s[11]=0,s[12]=e,s[13]=n,s[14]=o,s[15]=1,new Matrix4(s)},Matrix4.prototype.invert=function(){var m,t,i,s,h,r,a,e,n,o,c,x,u,M,l,y,w,p,v,A,f,z,F,V,d,I,T,b,D,E,N,Y,j,k,q,g,B,C,G,H;return m=this.m[0],t=this.m[1],i=this.m[2],s=this.m[3],h=this.m[4],r=this.m[5],a=this.m[6],e=this.m[7],n=this.m[8],o=this.m[9],c=this.m[10],x=this.m[11],u=this.m[12],M=this.m[13],l=this.m[14],y=this.m[15],w=c*y-x*l,p=o*y-x*M,v=o*l-c*M,A=n*y-x*u,f=n*l-c*u,z=n*M-o*u,F=r*w-a*p+e*v,V=-(h*w-a*A+e*f),d=h*p-r*A+e*z,I=-(h*v-r*f+a*z),T=1/(m*F+t*V+i*d+s*I),b=a*y-e*l,D=r*y-e*M,E=r*l-a*M,N=h*y-e*u,Y=h*l-a*u,j=h*M-r*u,k=a*x-e*c,q=r*x-e*o,g=r*c-a*o,B=h*x-e*n,C=h*c-a*n,G=h*o-r*n,H=new Float32Array(16),H[0]=F*T,H[4]=V*T,H[8]=d*T,H[12]=I*T,H[1]=-(t*w-i*p+s*v)*T,H[5]=(m*w-i*A+s*f)*T,H[9]=-(m*p-t*A+s*z)*T,H[13]=(m*v-t*f+i*z)*T,H[2]=(t*b-i*D+s*E)*T,H[6]=-(m*b-i*N+s*Y)*T,H[10]=(m*D-t*N+s*j)*T,H[14]=-(m*E-t*Y+i*j)*T,H[3]=-(t*k-i*q+s*g)*T,H[7]=(m*k-i*B+s*C)*T,H[11]=-(m*q-t*B+s*G)*T,H[15]=(m*g-t*C+i*G)*T,new Matrix4(H)},Matrix4.prototype.multiply=function(m){var t=new Float32Array(16);return t[0]=this.m[0]*m.m[0]+this.m[1]*m.m[4]+this.m[2]*m.m[8]+this.m[3]*m.m[12],t[1]=this.m[0]*m.m[1]+this.m[1]*m.m[5]+this.m[2]*m.m[9]+this.m[3]*m.m[13],t[2]=this.m[0]*m.m[2]+this.m[1]*m.m[6]+this.m[2]*m.m[10]+this.m[3]*m.m[14],t[3]=this.m[0]*m.m[3]+this.m[1]*m.m[7]+this.m[2]*m.m[11]+this.m[3]*m.m[15],t[4]=this.m[4]*m.m[0]+this.m[5]*m.m[4]+this.m[6]*m.m[8]+this.m[7]*m.m[12],t[5]=this.m[4]*m.m[1]+this.m[5]*m.m[5]+this.m[6]*m.m[9]+this.m[7]*m.m[13],t[6]=this.m[4]*m.m[2]+this.m[5]*m.m[6]+this.m[6]*m.m[10]+this.m[7]*m.m[14],t[7]=this.m[4]*m.m[3]+this.m[5]*m.m[7]+this.m[6]*m.m[11]+this.m[7]*m.m[15],t[8]=this.m[8]*m.m[0]+this.m[9]*m.m[4]+this.m[10]*m.m[8]+this.m[11]*m.m[12],t[9]=this.m[8]*m.m[1]+this.m[9]*m.m[5]+this.m[10]*m.m[9]+this.m[11]*m.m[13],t[10]=this.m[8]*m.m[2]+this.m[9]*m.m[6]+this.m[10]*m.m[10]+this.m[11]*m.m[14],t[11]=this.m[8]*m.m[3]+this.m[9]*m.m[7]+this.m[10]*m.m[11]+this.m[11]*m.m[15],t[12]=this.m[12]*m.m[0]+this.m[13]*m.m[4]+this.m[14]*m.m[8]+this.m[15]*m.m[12],t[13]=this.m[12]*m.m[1]+this.m[13]*m.m[5]+this.m[14]*m.m[9]+this.m[15]*m.m[13],t[14]=this.m[12]*m.m[2]+this.m[13]*m.m[6]+this.m[14]*m.m[10]+this.m[15]*m.m[14],t[15]=this.m[12]*m.m[3]+this.m[13]*m.m[7]+this.m[14]*m.m[11]+this.m[15]*m.m[15],new Matrix4(t)},Matrix4.prototype.translate=function(m,t,i){var s=new Float32Array(this.m);return s[12]+=m,s[13]+=t,s[14]+=i,new Matrix4(s)},module.exports=Matrix4;
},{"../objects/vec3":18}],13:[function(require,module,exports){
"use strict";function _cloneCommand(t){var o={type:t.type};return o.type!==CLOSE&&(o.x=t.x,o.y=t.y),o.type===CURVETO&&(o.x1=t.x1,o.y1=t.y1,o.x2=t.x2,o.y2=t.y2),o}var _=require("lodash"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),Color=require("../objects/color"),Rect=require("../objects/rect"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,CLOSE_COMMAND=Object.freeze({type:CLOSE}),KAPPA=.5522847498307936,Path=function(t,o,e,i){this.commands=void 0!==t?t:[],this.fill=void 0!==o?o:"black",this.stroke=void 0!==e?e:null,this.strokeWidth=void 0!==i?i:1};Path.prototype.clone=function(){var t,o=new Path,e=this.commands.length;for(o.commands.length=this.commands.length,t=0;e>t;t+=1)o.commands[t]=_cloneCommand(this.commands[t]);return o.fill=Color.clone(this.fill),o.stroke=Color.clone(this.stroke),o.strokeWidth=this.strokeWidth,o},Path.prototype.extend=function(t){var o=t.commands||t;Array.prototype.push.apply(this.commands,o)},Path.prototype.moveTo=function(t,o){this.commands.push({type:MOVETO,x:t,y:o})},Path.prototype.lineTo=function(t,o){this.commands.push({type:LINETO,x:t,y:o})},Path.prototype.curveTo=function(t,o,e,i,s,h){this.commands.push({type:CURVETO,x1:t,y1:o,x2:e,y2:i,x:s,y:h})},Path.prototype.quadTo=function(t,o,e,i){var s=this.commands[this.commands.length-1].x,h=this.commands[this.commands.length-1].y,n=s+2/3*(t-s),r=h+2/3*(o-h),a=n+1/3*(e-s),c=r+1/3*(i-h);this.curveTo(n,r,a,c,e,i)},Path.prototype.closePath=Path.prototype.close=function(){this.commands.push(CLOSE_COMMAND)},Path.prototype.isClosed=function(){return 0===this.commands.length?!1:this.commands[this.commands.length-1].type===CLOSE},Path.prototype.addRect=function(t,o,e,i){this.moveTo(t,o),this.lineTo(t+e,o),this.lineTo(t+e,o+i),this.lineTo(t,o+i),this.close()},Path.prototype.addRoundedRect=function(t,o,e,i,s,h){var n=1-.552,r=s,a=h,c=t,l=t+e,p=o,m=o+i;r=Math.min(r,.5*e),a=Math.min(a,.5*i),this.moveTo(c+r,p),.5*e>r&&this.lineTo(l-s,p),this.curveTo(l-r*n,p,l,p+a*n,l,p+a),.5*i>a&&this.lineTo(l,m-a),this.curveTo(l,m-a*n,l-r*n,m,l-r,m),.5*e>r&&this.lineTo(c+r,m),this.curveTo(c+r*n,m,c,m-a*n,c,m-a),.5*i>a&&this.lineTo(c,p+a),this.curveTo(c,p+a*n,c+r*n,p,c+r,p),this.close()},Path.prototype.addEllipse=function(t,o,e,i){var s=.5*KAPPA*e,h=.5*KAPPA*i,n=t+.5*e,r=o+.5*i,a=t+e,c=o+i;this.moveTo(t,r),this.curveTo(t,r-h,n-s,o,n,o),this.curveTo(n+s,o,a,r-h,a,r),this.curveTo(a,r+h,n+s,c,n,c),this.curveTo(n-s,c,t,r+h,t,r),this.close()},Path.prototype.addLine=function(t,o,e,i){this.moveTo(t,o),this.lineTo(e,i)},Path.prototype.addQuad=function(t,o,e,i,s,h,n,r){this.moveTo(t,o),this.lineTo(e,i),this.lineTo(s,h),this.lineTo(n,r),this.close()},Path.prototype.addArc=function(t,o,e,i,s,h,n){n=n||"pie";var r,a,c,l,p,m,u,d,y,f,v,T,P;for(r=e/2,a=i/2,c=math.radians(s),l=h,l>=360||-360>=l?(p=4,m=Math.PI/2,u=.5522847498307933,0>l&&(m=-m,u=-u)):(p=Math.ceil(Math.abs(l)/90),m=math.radians(l/p),u=4/3*Math.sin(m/2)/(1+Math.cos(m/2)),0===u&&(p=0)),"open"===n?d=0:"chord"===n?d=1:"pie"===n&&(d=2),(0>r||0>a)&&(p=d=-1),y=0;p+d>=y;)f=c,0===y?this.moveTo(t+Math.cos(f)*r,o+Math.sin(f)*a):y>p?y===p+d?this.close():this.lineTo(t,o):(f+=m*(y-1),v=Math.cos(f),T=Math.sin(f),P=[],P.push(t+(v-u*T)*r),P.push(o+(T+u*v)*a),f+=m,v=Math.cos(f),T=Math.sin(f),P.push(t+(v+u*T)*r),P.push(o+(T-u*v)*a),P.push(t+v*r),P.push(o+T*a),Path.prototype.curveTo.apply(this,P)),y+=1},Path.prototype.colorize=function(t,o,e){var i=this.clone();return i.fill=Color.clone(t),i.stroke=Color.clone(o),i.strokeWidth=e,i},Path.prototype.contours=function(){var t=[],o=[];return _.each(this.commands,function(e){e.type===MOVETO?(0!==o.length&&t.push(o),o=[e]):o.push(e)}),0!==o.length&&t.push(o),t},Path.prototype.bounds=function(){if(this._bounds)return this._bounds;if(0===this.commands.length)return new Rect(0,0,0,0);var t,o,e,i,s,h=Number.MAX_VALUE,n=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=-Number.MAX_VALUE;return _.each(this.commands,function(c){if(c.type===MOVETO||c.type===LINETO)t=c.x,o=c.y,h>t&&(h=t),n>o&&(n=o),t>r&&(r=t),o>a&&(a=o),e=c;else if(c.type===CURVETO){var l=bezier.extrema(e.x,e.y,c.x1,c.y1,c.x2,c.y2,c.x,c.y);i=l.x+l.width,s=l.y+l.height,l.x<h&&(h=l.x),i>r&&(r=i),l.y<n&&(n=l.y),s>a&&(a=s),e=c}}),new Rect(h,n,r-h,a-n)},Path.prototype.point=function(t,o){return void 0===o&&(o=bezier.segmentLengths(this.commands,!0,10)),bezier.point(this,t,o)},Path.prototype.points=function(t,o){var e=o&&void 0!==o.start?o.start:0,i=o&&void 0!==o.end?o.end:1;if(0===this.commands.length)return[];t=Math.round(t);var s;s=o&&o.closed?t>1?(i-e)/t:i-e:t>1?(i-e)/(t-1):i-e;for(var h=[],n=bezier.segmentLengths(this.commands,!0,10),r=0;t>r;r+=1)h.push(this.point(e+s*r,n));return h},Path.prototype.length=function(t){return void 0===t&&(t=10),bezier.length(this,t)},Path.prototype.contains=function(t,o,e){var i=this.points(void 0!==e?e:100);return geo.pointInPolygon(i,t,o)},Path.prototype.resampleByAmount=function(t,o){for(var e=o?this.contours():[this.commands],i=new Path([],this.fill,this.stroke,this.strokeWidth),s=0;s<e.length;s+=1){var h=new Path(e[s]),n={};h.isClosed()&&(n.closed=!0);for(var r=h.points(t,n),a=0;a<r.length;a+=1)0===a?i.moveTo(r[a].x,r[a].y):i.lineTo(r[a].x,r[a].y);h.isClosed()&&i.close()}return i},Path.prototype.resampleByLength=function(t,o){o=o||{};var e=o.force||!1,i=this.contours(),s=[];e||(t=Math.max(t,1));for(var h=0;h<i.length;h+=1){var n=new Path(i[h]),r=n.length(),a=Math.ceil(r/t);s=s.concat(n.resampleByAmount(a).commands)}return new Path(s,this.fill,this.stroke,this.strokeWidth)},Path.prototype.toPathData=function(){var t,o,e,i,s,h,n,r,a;for(o="",t=0;t<this.commands.length;t+=1)e=this.commands[t],void 0!==e.x&&(i=math.clamp(e.x,-9999,9999),s=math.clamp(e.y,-9999,9999)),void 0!==e.x1&&(h=math.clamp(e.x1,-9999,9999),n=math.clamp(e.y1,-9999,9999)),void 0!==e.x2&&(r=math.clamp(e.x2,-9999,9999),a=math.clamp(e.y2,-9999,9999)),e.type===MOVETO?isNaN(i)||isNaN(s)||(o+="M"+i+" "+s):e.type===LINETO?isNaN(i)||isNaN(s)||(o+="L"+i+" "+s):e.type===CURVETO?isNaN(i)||isNaN(s)||isNaN(h)||isNaN(n)||isNaN(r)||isNaN(a)||(o+="C"+h+" "+n+" "+r+" "+a+" "+i+" "+s):e.type===CLOSE&&(o+="Z");return o},Path.prototype.toSVG=function(){var t='<path d="';t+=this.toPathData(),t+='"';var o;o=this.fill&&void 0!==this.fill.r?Color.toCSS(this.fill):this.fill,"black"!==o&&(t+=null===o?' fill="none"':' fill="'+o+'"');var e;return e=this.stroke&&void 0!==this.stroke.r?Color.toCSS(this.stroke):this.stroke,e&&(t+=' stroke="'+e+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},Path.prototype.draw=function(t){var o,e,i;for(t.beginPath(),o=this.commands.length,e=0;o>e;e+=1)i=this.commands[e],i.type===MOVETO?t.moveTo(i.x,i.y):i.type===LINETO?t.lineTo(i.x,i.y):i.type===CURVETO?t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type===CLOSE&&t.closePath();null!==this.fill&&(t.fillStyle=Color.toCSS(this.fill),t.fill()),null!==this.stroke&&null!==this.strokeWidth&&this.strokeWidth>0&&(t.strokeStyle=Color.toCSS(this.stroke),t.lineWidth=this.strokeWidth,t.stroke())},Path.combine=function(){for(var t=_.flatten(arguments),o=[],e=0;e<t.length;e+=1){var i=t[e];i.commands?o=o.concat(i.commands):i.shapes&&(o=o.concat(Path.combine(i.shapes).commands))}return new Path(o)},module.exports=Path;
},{"../objects/color":10,"../objects/rect":15,"../util/bezier":19,"../util/geo":21,"../util/math":23,"lodash":2}],14:[function(require,module,exports){
"use strict";var Point=function(t,i){this.x=void 0!==t?t:0,this.y=void 0!==i?i:0};Object.defineProperty(Point.prototype,"xy",{get:function(){return[this.x,this.y]}}),Point.ZERO=new Point(0,0),Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.add=function(t){return new Point(this.x+t.x,this.y+t.y)},Point.prototype.subtract=Point.prototype.sub=function(t){return new Point(this.x-t.x,this.y-t.y)},Point.prototype.divide=function(t){return new Point(this.x/t,this.y/t)},Point.prototype.multiply=function(t){return new Point(this.x*t,this.y*t)},Point.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Point.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y},Point.prototype.heading=function(){return Math.atan2(this.y,this.x)},Point.prototype.distanceTo=function(t){var i=this.x-t.x,n=this.y-t.y;return Math.sqrt(i*i+n*n)},Point.prototype.normalize=function(){var t=this.magnitude();return 0!==t?this.divide(t):Point.ZERO},Point.prototype.limit=function(t){return this.magnitudeSquared()>t*t?this.normalize().multiply(t):this},Point.prototype.translate=function(t,i){return new Point(this.x+t,this.y+i)},Point.prototype.scale=function(t,i){return i=void 0!==i?i:t,new Point(this.x*t,this.y*i)},Point.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},module.exports=Point;
},{}],15:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Rect=function(t,i,h,e){this.x=void 0!==t?t:0,this.y=void 0!==i?i:0,this.width=void 0!==h?h:0,this.height=void 0!==e?e:0};Object.defineProperty(Rect.prototype,"xywh",{get:function(){return[this.x,this.y,this.width,this.height]}}),Rect.prototype.normalize=function(){var t=this.x,i=this.y,h=this.width,e=this.height;return 0>h&&(t+=h,h=-h),0>e&&(i+=e,e=-e),new Rect(t,i,h,e)},Rect.prototype.containsPoint=function(t,i){return 1===arguments.length&&(i=t.y,t=t.x),t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height},Rect.prototype.containsRect=function(t){return t.x>=this.x&&t.x+t.width<=this.x+this.width&&t.y>=this.y&&t.y+t.height<=this.y+this.height},Rect.prototype.grow=function(t,i){var h=this.x-t,e=this.y-i,s=this.width+2*t,n=this.height+2*i;return new Rect(h,e,s,n)},Rect.prototype.unite=function(t){var i=Math.min(this.x,t.x),h=Math.min(this.y,t.y),e=Math.max(this.x+this.width,t.x+t.width)-i,s=Math.max(this.y+this.height,t.y+t.height)-h;return new Rect(i,h,e,s)},Rect.prototype.addPoint=function(t,i){var h,e,s=this.x,n=this.y,o=this.width,r=this.height;return t<this.x?(h=this.x-t,s=t,o+=h):t>this.x+this.width&&(h=t-(this.x+this.width),o+=h),i<this.y?(e=this.y-i,n=i,r+=e):i>this.y+this.height&&(e=i-(this.y+this.height),r+=e),new Rect(s,n,o,r)},Rect.prototype.centroid=function(){return new Point(this.x+this.width/2,this.y+this.height/2)},module.exports=Rect;
},{"../objects/point":14}],16:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),_dummyContext=null,Text=function(t){var e,i=Array.prototype.slice.call(arguments,1),n=arguments[1],o=arguments[2],s=arguments[arguments.length-1];this.text=String(t),"number"==typeof n?(this.x=n,this.y=o,i=i.slice(2)):Array.isArray(n)?(this.x=n[0],this.y=n[1],i=i.slice(1)):"object"==typeof n?(this.x=void 0!==n.x?n.x:0,this.y=void 0!==n.y?n.y:0,i=i.slice(1)):(this.x=0,this.y=0),"object"==typeof s?(e=s,n!==s&&(i=i.slice(0,i.length-1))):e={},this.fontFamily=i.length?i.shift():e.fontFamily||e.fontName||e.font||"sans-serif",this.fontSize=i.length?i.shift():e.fontSize||24,this.textAlign=i.length?i.shift():e.align||e.textAlign||"left",this.fill=i.length?i.shift():e.fill||"black",this.transform=new Transform};Text.prototype.clone=function(){var t=new Text;return t.text=this.text,t.x=this.x,t.y=this.y,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.textAlign=this.textAlign,t.fill=Color.clone(this.fill),t.transform=this.transform,t},Text._getDummyContext=function(){return _dummyContext||(_dummyContext="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):{font:"10px sans-serif",measureText:function(t){var e=parseFloat(this.font);return{width:t.length*e*.6}}}),_dummyContext},Text.prototype._getFont=function(){return this.fontSize+"px "+this.fontFamily},Text.prototype.colorize=function(t){var e=this.clone();return e.fill=Color.clone(t),e},Text.prototype.draw=function(t){t.save(),t.font=this._getFont(),t.textAlign=this.textAlign;var e=this.transform.m;t.transform(e[0],e[1],e[3],e[4],e[6],e[7]),t.fillStyle=Color.toCSS(this.fill),t.fillText(this.text,this.x,this.y),t.restore()},Text.prototype.bounds=function(){var t,e=Text._getDummyContext(),i=this.x;return e.font=this._getFont(),t=e.measureText(this.text),"center"===this.textAlign?i=this.x-t.width/2:"right"===this.textAlign&&(i=this.x-t.width),new Rect(i,this.y-this.fontSize,t.width,1.2*this.fontSize)},Text.prototype.toSVG=function(){var t="<text";t+=' x="'+this.x+'"',t+=' y="'+this.y+'"',t+=' font-family="'+this.fontFamily+'"',t+=' font-size="'+this.fontSize+'"';var e;return"left"===this.textAlign?e="start":"center"===this.textAlign?e="middle":"right"===this.textAlign&&(e="end"),t+=' text-anchor="'+e+'"',"black"!==this.fill&&(t+=' fill="'+Color.toCSS(this.fill)+'"'),t+=">",t+=this.text,t+="</text>"},module.exports=Text;
},{"../objects/color":10,"../objects/rect":15,"../objects/transform":17}],17:[function(require,module,exports){
"use strict";var _=require("lodash"),math=require("../util/math"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),MOVETO="M",LINETO="L",CURVETO="C",CLOSE="Z",Transform=function(r){this.m=void 0!==r?r:[1,0,0,0,1,0,0,0,1]};Transform.IDENTITY=new Transform,Transform.identity=function(){return new Transform},Transform._mmult=function(r,t){return void 0!==r.m&&(r=r.m),void 0!==t.m&&(t=t.m),new Transform([r[0]*t[0]+r[1]*t[3],r[0]*t[1]+r[1]*t[4],0,r[3]*t[0]+r[4]*t[3],r[3]*t[1]+r[4]*t[4],0,r[6]*t[0]+r[7]*t[3]+t[6],r[6]*t[1]+r[7]*t[4]+t[7],1])},Transform.prototype.prepend=function(r){return Transform._mmult(this.m,r.m)},Transform.prototype.append=function(r){return Transform._mmult(r.m,this.m)},Transform.prototype.inverse=function(){var r=this.m,t=r[0]*r[4]-r[1]*r[3];return new Transform([r[4]/t,-r[1]/t,0,-r[3]/t,r[0]/t,0,(r[3]*r[7]-r[4]*r[6])/t,-(r[0]*r[7]-r[1]*r[6])/t,1])},Transform.prototype.scale=function(r,t){return void 0===t&&(t=r),Transform._mmult([r,0,0,0,t,0,0,0,1],this.m)},Transform.prototype.translate=function(r,t){return Transform._mmult([1,0,0,0,1,0,r,t,1],this.m)},Transform.prototype.rotate=function(r){var t=Math.cos(math.radians(r)),n=Math.sin(math.radians(r));return Transform._mmult([t,n,0,-n,t,0,0,0,1],this.m)},Transform.prototype.skew=function(r,t){var n=Math.PI*r/180,o=Math.PI*t/180;return Transform._mmult([1,Math.tan(o),0,-Math.tan(n),1,0,0,0,1],this.m)},Transform.prototype.transformPoint=function(r){var t=r.x,n=r.y,o=this.m;return new Point(t*o[0]+n*o[3]+o[6],t*o[1]+n*o[4]+o[7])},Transform.prototype.transformPoints=function(r){var t=this;return _.map(r,function(r){return t.transformPoint(r)})},Transform.prototype.transformPath=function(r){var t,n,o,a=this,s=_.map(r.commands,function(r){if(r.type===MOVETO)return t=a.transformPoint({x:r.x,y:r.y}),{type:MOVETO,x:t.x,y:t.y};if(r.type===LINETO)return t=a.transformPoint({x:r.x,y:r.y}),{type:LINETO,x:t.x,y:t.y};if(r.type===CURVETO)return t=a.transformPoint({x:r.x,y:r.y}),n=a.transformPoint({x:r.x1,y:r.y1}),o=a.transformPoint({x:r.x2,y:r.y2}),{type:CURVETO,x1:n.x,y1:n.y,x2:o.x,y2:o.y,x:t.x,y:t.y};if(r.type===CLOSE)return r;throw new Error("Unknown command type "+r)});return new Path(s,r.fill,r.stroke,r.strokeWidth)},Transform.prototype.transformText=function(r){var t=r.clone();return t.transform=this.append(t.transform),t},Transform.prototype.transformGroup=function(r){var t=this,n=_.map(r.shapes,function(r){return t.transformShape(r)});return new Group(n)},Transform.prototype.transformShape=function(r){var t;return t=r.shapes?this.transformGroup:r.text?this.transformText:Array.isArray(r)&&r.length>0&&void 0!==r[0].x&&void 0!==r[0].y?this.transformPoints:this.transformPath,t.call(this,r)},module.exports=Transform;
},{"../objects/group":11,"../objects/path":13,"../objects/point":14,"../util/math":23,"lodash":2}],18:[function(require,module,exports){
"use strict";var Vec3=function(t,i,e){this.x=void 0===t?0:t,this.y=void 0===i?0:i,this.z=void 0===e?0:e};Vec3.ZERO=new Vec3(0,0,0),Vec3.up=function(){return new Vec3(0,1,0)},Vec3.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},Vec3.cross=function(t,i){return new Vec3(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x)},Vec3.prototype.toString=function(){return"["+this.x+", "+this.y+", "+this.z+"]"},Vec3.prototype.toArray=function(){var t=[];return t.push(this.x),t.push(this.y),t.push(this.z),t},Vec3.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vec3.prototype.normalize=function(){var t,i;return t=this.getLength(),0===t?this:(i=1/t,new Vec3(this.x*i,this.y*i,this.z*i))},Vec3.prototype.add=function(t){return new Vec3(this.x+t.x,this.y+t.y,this.z+t.z)},Vec3.prototype.subtract=function(t){return new Vec3(this.x-t.x,this.y-t.y,this.z-t.z)},Vec3.prototype.transform=function(t){var i,e,s,h,n;return n=t,i=this.x*n.m[0]+this.y*n.m[4]+this.z*n.m[8]+n.m[12],e=this.x*n.m[1]+this.y*n.m[5]+this.z*n.m[9]+n.m[13],s=this.x*n.m[2]+this.y*n.m[6]+this.z*n.m[10]+n.m[14],h=this.x*n.m[3]+this.y*n.m[7]+this.z*n.m[11]+n.m[15],new Vec3(i/h,e/h,s/h)},module.exports=Vec3;
},{}],19:[function(require,module,exports){
"use strict";var _=require("lodash"),math=require("../util/math"),Point=require("../objects/point"),Rect=require("../objects/rect"),bezier={},MOVETO=bezier.MOVETO="M",LINETO=bezier.LINETO="L",CURVETO=bezier.CURVETO="C",CLOSE=bezier.CLOSE="Z";bezier.linePoint=function(e,t,r,n,i){var a=t+e*(n-t),o=r+e*(i-r);return{type:LINETO,x:a,y:o}},bezier.lineLength=function(e,t,r,n){var i=Math.pow(Math.abs(e-r),2),a=Math.pow(Math.abs(t-n),2);return Math.sqrt(i+a)},bezier.curvePoint=function(e,t,r,n,i,a,o,u,h){var s=1-e,c=t*s+n*e,b=r*s+i*e,y=n*s+a*e,m=i*s+o*e,x=a*s+u*e,z=o*s+h*e,O=c*s+y*e,p=b*s+m*e,v=y*s+x*e,M=m*s+z*e,E=O*s+v*e,L=p*s+M*e;return{type:CURVETO,x1:O,y1:p,x2:v,y2:M,x:E,y:L}},bezier.curveLength=function(e,t,r,n,i,a,o,u,h){void 0===h&&(h=20);var s,c,b,y=0,m=e,x=t;for(s=0;h>s;s+=1)c=(s+1)/h,b=bezier.curvePoint(c,e,t,r,n,i,a,o,u),y+=Math.sqrt(Math.pow(Math.abs(m-b.x),2)+Math.pow(Math.abs(x-b.y),2)),m=b.x,x=b.y;return y},bezier.segmentLengths=function(e,t,r){t=void 0!==t?t:!1,void 0===r&&(r=20);var n,i,a,o,u,h,s,c,b;for(b=[],n=0;n<e.length;n+=1)i=e[n],a=i.type,0===n?(o=i.x,u=i.y):a===MOVETO?(o=i.x,u=i.y,b.push(0)):a===CLOSE?b.push(bezier.lineLength(h,s,o,u)):a===LINETO?b.push(bezier.lineLength(h,s,i.x,i.y)):a===CURVETO&&b.push(bezier.curveLength(h,s,i.x1,i.y1,i.x2,i.y2,i.x,i.y,r)),a!==CLOSE&&(h=i.x,s=i.y);return t===!0?(c=math.sum(b),c>0?_.map(b,function(e){return e/c}):_.map(b,function(){return 0})):b},bezier.length=function(e,t){return t=t||20,math.sum(bezier.segmentLengths(e.commands,!1,t))},bezier._locate=function(e,t,r){var n,i,a;for(void 0===r&&(r=bezier.segmentLengths(e.commands,!0)),n=0;n<e.commands.length&&(i=e.commands[n],(0===n||i.type===MOVETO)&&(a=new Point(i.x,i.y)),!(t<=r[n]||n===r.length-1));n+=1)t-=r[n];return 0!==r[n]&&(t/=r[n]),n===r.length-1&&0===r[n]&&(n-=1),[n,t,a]},bezier.point=function(e,t,r){var n,i,a,o,u,h;return n=bezier._locate(e,t,r),i=n[0],t=n[1],a=n[2],o=e.commands[i].x,u=e.commands[i].y,h=e.commands[i+1],h.type===LINETO||h.type===CLOSE?h=h.type===CLOSE?bezier.linePoint(t,o,u,a.x,a.y):bezier.linePoint(t,o,u,h.x,h.y):h.type===CURVETO&&(h=bezier.curvePoint(t,o,u,h.x1,h.y1,h.x2,h.y2,h.x,h.y)),h},bezier.extrema=function(e,t,r,n,i,a,o,u){function h(e,t){return Math.abs(e-t)<=1e-12*Math.min(Math.abs(e),Math.abs(t))}function s(e){var t,r,n,i,a;return t=1-e,n=t*t,i=e*e,a=i*e,r=n*t,n*=3*e,i*=3*t,[r,n,i,a]}function c(h){var c,b,y,m,x;return x=s(h),c=x[0],b=x[1],y=x[2],m=x[3],{x:c*e+b*r+y*i+m*o,y:c*t+b*n+y*a+m*u}}function b(e){if(e>=0&&1>=e){var t=c(e);t.x<y?y=t.x:t.x>m&&(m=t.x),t.y<x?x=t.y:t.y>z&&(z=t.y)}}var y,m,x,z,O,p,v,M,E,L,f,g,l,T;return o>e?(y=e,m=o):(y=o,m=e),u>t?(x=t,z=u):(x=u,z=t),O=3*(-e+3*r-3*i+o),p=6*(e-2*r+i),v=3*(-e+r),h(O+1,1)?h(p+1,1)||b(-v/p):(l=p*p-4*O*v,l>=0&&(f=Math.sqrt(l),g=1/(2*O),b((-p+f)*g),b((-p-f)*g))),M=3*(-t+3*n-3*a+u),E=6*(t-2*n+a),L=3*(-t+n),h(M+1,1)?h(E+1,1)||b(-L/E):(T=E*E-4*M*L,T>0&&(f=Math.sqrt(T),g=1/(2*M),b((-E+f)*g),b((-E-f)*g))),new Rect(y,x,m-y,z-x)},module.exports=bezier;
},{"../objects/point":14,"../objects/rect":15,"../util/math":23,"lodash":2}],20:[function(require,module,exports){
"use strict";function toHex(e){var r;return 0===e?"00":(r=e.toString(16).toUpperCase(),r.length<2&&(r="0"+r),r)}var color={};color.namedColors={lightpink:[1,.71,.76],pink:[1,.75,.8],crimson:[.86,.08,.24],lavenderblush:[1,.94,.96],palevioletred:[.86,.44,.58],hotpink:[1,.41,.71],deeppink:[1,.08,.58],mediumvioletred:[.78,.08,.52],orchid:[.85,.44,.84],thistle:[.85,.75,.85],plum:[.87,.63,.87],violet:[.93,.51,.93],fuchsia:[1,0,1],darkmagenta:[.55,0,.55],purple:[.5,0,.5],mediumorchid:[.73,.33,.83],darkviolet:[.58,0,.83],darkorchid:[.6,.2,.8],indigo:[.29,0,.51],blueviolet:[.54,.17,.89],mediumpurple:[.58,.44,.86],mediumslateblue:[.48,.41,.93],slateblue:[.42,.35,.8],darkslateblue:[.28,.24,.55],ghostwhite:[.97,.97,1],lavender:[.9,.9,.98],blue:[0,0,1],mediumblue:[0,0,.8],darkblue:[0,0,.55],navy:[0,0,.5],midnightblue:[.1,.1,.44],royalblue:[.25,.41,.88],cornflowerblue:[.39,.58,.93],lightsteelblue:[.69,.77,.87],lightslategray:[.47,.53,.6],slategray:[.44,.5,.56],dodgerblue:[.12,.56,1],aliceblue:[.94,.97,1],steelblue:[.27,.51,.71],lightskyblue:[.53,.81,.98],skyblue:[.53,.81,.92],deepskyblue:[0,.75,1],lightblue:[.68,.85,.9],powderblue:[.69,.88,.9],cadetblue:[.37,.62,.63],darkturquoise:[0,.81,.82],azure:[.94,1,1],lightcyan:[.88,1,1],paleturquoise:[.69,.93,.93],aqua:[0,1,1],darkcyan:[0,.55,.55],teal:[0,.5,.5],darkslategray:[.18,.31,.31],mediumturquoise:[.28,.82,.8],lightseagreen:[.13,.7,.67],turquoise:[.25,.88,.82],aquamarine:[.5,1,.83],mediumaquamarine:[.4,.8,.67],mediumspringgreen:[0,.98,.6],mintcream:[.96,1,.98],springgreen:[0,1,.5],mediumseagreen:[.24,.7,.44],seagreen:[.18,.55,.34],honeydew:[.94,1,.94],darkseagreen:[.56,.74,.56],palegreen:[.6,.98,.6],lightgreen:[.56,.93,.56],limegreen:[.2,.8,.2],lime:[0,1,0],forestgreen:[.13,.55,.13],green:[0,.5,0],darkgreen:[0,.39,0],lawngreen:[.49,.99,0],chartreuse:[.5,1,0],greenyellow:[.68,1,.18],darkolivegreen:[.33,.42,.18],yellowgreen:[.6,.8,.2],olivedrab:[.42,.56,.14],ivory:[1,1,.94],beige:[.96,.96,.86],lightyellow:[1,1,.88],lightgoldenrodyellow:[.98,.98,.82],yellow:[1,1,0],olive:[.5,.5,0],darkkhaki:[.74,.72,.42],palegoldenrod:[.93,.91,.67],lemonchiffon:[1,.98,.8],khaki:[.94,.9,.55],gold:[1,.84,0],cornsilk:[1,.97,.86],goldenrod:[.85,.65,.13],darkgoldenrod:[.72,.53,.04],floralwhite:[1,.98,.94],oldlace:[.99,.96,.9],wheat:[.96,.87,.07],orange:[1,.65,0],moccasin:[1,.89,.71],papayawhip:[1,.94,.84],blanchedalmond:[1,.92,.8],navajowhite:[1,.87,.68],antiquewhite:[.98,.92,.84],tan:[.82,.71,.55],burlywood:[.87,.72,.53],darkorange:[1,.55,0],bisque:[1,.89,.77],linen:[.98,.94,.9],peru:[.8,.52,.25],peachpuff:[1,.85,.73],sandybrown:[.96,.64,.38],chocolate:[.82,.41,.12],saddlebrown:[.55,.27,.07],seashell:[1,.96,.93],sienna:[.63,.32,.18],lightsalmon:[1,.63,.48],coral:[1,.5,.31],orangered:[1,.27,0],darksalmon:[.91,.59,.48],tomato:[1,.39,.28],salmon:[.98,.5,.45],mistyrose:[1,.89,.88],lightcoral:[.94,.5,.5],snow:[1,.98,.98],rosybrown:[.74,.56,.56],indianred:[.8,.36,.36],red:[1,0,0],brown:[.65,.16,.16],firebrick:[.7,.13,.13],darkred:[.55,0,0],maroon:[.5,0,0],white:[1,1,1],whitesmoke:[.96,.96,.96],gainsboro:[.86,.86,.86],lightgrey:[.83,.83,.83],silver:[.75,.75,.75],darkgray:[.66,.66,.66],gray:[.5,.5,.5],grey:[.5,.5,.5],dimgray:[.41,.41,.41],dimgrey:[.41,.41,.41],black:[0,0,0],cyan:[0,.68,.94],transparent:[0,0,0,0],bark:[.25,.19,.13]},color.rgb2hex=function(e,r,a){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))},color.rgba2hex=function(e,r,a,o){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))+toHex(Math.round(255*o))},color.hex2rgb=function(e){var r,a,o,l;return e=e.replace(/^#/,""),e.length<6&&(r=[],r.length=6-e.length,e+=r.join(e.substr(e.length-1))),a=parseInt(e.substr(0,2),16)/255,o=parseInt(e.substr(2,2),16)/255,l=parseInt(e.substr(4,2),16)/255,[a,o,l]},color.rgb2hsb=function(e,r,a){var o=0,l=0,n=Math.max(e,r,a),t=n-Math.min(e,r,a);return 0!==n&&(l=t/n),0!==l&&(o=e===n?(r-a)/t:r===n?2+(a-e)/t:4+(e-r)/t),o=o/6%1,[o,l,n]},color.hsb2rgb=function(e,r,a){if(0===r)return[a,a,a];e=e%1*6;var o=Math.floor(e),l=e-o,n=a*(1-r),t=a*(1-r*l),i=a*(1-r*(1-l));return o>4?[a,n,t]:[[a,i,n],[t,a,n],[n,a,i],[n,t,a],[i,n,a]][parseInt(o,10)]},module.exports=color;
},{}],21:[function(require,module,exports){
"use strict";var math=require("../util/math"),Point=require("../objects/point"),geo={};geo.angle=function(t,n,e,o){return math.degrees(Math.atan2(o-n,e-t))},geo.distance=function(t,n,e,o){return Math.sqrt(Math.pow(e-t,2)+Math.pow(o-n,2))},geo.coordinates=function(t,n,e,o){var a=t+Math.cos(math.radians(o))*e,r=n+Math.sin(math.radians(o))*e;return new Point(a,r)},geo.pointInPolygon=function(t,n,e){var o,a,r,i,u,h,s=!1,g=t.length;for(o=0;g>o;o+=1)a=g-1>o?o+1:0,r=t[o].x,i=t[o].y,u=t[a].x,h=t[a].y,(e>i&&h>=e||e>h&&i>=e)&&n>r+(e-i)/(h-i)*(u-r)&&(s=!s);return s},module.exports=geo;
},{"../objects/point":14,"../util/math":23}],22:[function(require,module,exports){
"use strict";exports.defineAlias=function(t,e,n){Object.defineProperty(t.prototype,n,{get:function(){return this[e]},set:function(t){this[e]=t}})},exports.defineGetter=function(t,e,n){Object.defineProperty(t.prototype,e,{get:n})};
},{}],23:[function(require,module,exports){
"use strict";function _fade(r){return r*r*r*(r*(6*r-15)+10)}function _grad(r,t,n,a){var e,o,u;return e=15&r,o=8>e?t:n,u=4>e?n:12===e||14===e?t:a,(0===(1&e)?o:-o)+(0===(2&e)?u:-u)}function _scale(r){return(1+r)/2}var math={};math.sum=function(r){var t,n=r.length,a=0;for(t=0;n>t;t+=1)a+=r[t];return a},math.round=function(r,t){return t?Math.round(r*Math.pow(10,t))/Math.pow(10,t):Math.round(r)},math.sign=function(r){return 0>r?-1:r>0?1:0},math.degrees=function(r){return 180*r/Math.PI},math.radians=function(r){return r/180*Math.PI},math.clamp=function(r,t,n){return n>t?t>r?t:r>n?n:r:n>r?n:r>t?t:r},math.snap=function(r,t,n){return n=void 0!==n?n:1,r*(1-n)+n*Math.round(r/t)*t},math.dot=function(r,t){var n,a=Math.min(r.length,t.length),e=0;for(n=0;a>n;n+=1)e+=r[n]*t[n];return e};var _lerp=math.mix=math.lerp=function(r,t,n,a){if(a){if(0>n)return r;if(n>1)return t}return r+(t-r)*n},_permutation=function(){var r,t,n;for(r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=new Uint8Array(512),n=0;256>n;n+=1)t[256+n]=t[n]=r[n];return t}();math.noise=function(r,t,n){var a=_permutation,e=255&Math.floor(r),o=255&Math.floor(t),u=255&Math.floor(n);r-=Math.floor(r),t-=Math.floor(t),n-=Math.floor(n);var f=_fade(r),h=_fade(t),i=_fade(n),_=a[e]+o,d=a[_]+u,l=a[_+1]+u,m=a[e+1]+o,c=a[m]+u,p=a[m+1]+u;return _scale(_lerp(_lerp(_lerp(_grad(a[d],r,t,n),_grad(a[c],r-1,t,n),f),_lerp(_grad(a[l],r,t-1,n),_grad(a[p],r-1,t-1,n),f),h),_lerp(_lerp(_grad(a[d+1],r,t,n-1),_grad(a[c+1],r-1,t,n-1),f),_lerp(_grad(a[l+1],r,t-1,n-1),_grad(a[p+1],r-1,t-1,n-1),f),h),i))},module.exports=math;
},{}],24:[function(require,module,exports){
"use strict";function generator(r){if(0>r){for(var e=generator(Math.abs(r)),t=0;23>t;t+=1)e();return generator(e(0,1e4))}return function(e,t){e=e||0,t=t||1,r=(9301*r+49297)%233280;var n=r/233280;return e+n*(t-e)}}exports.generator=generator;
},{}],25:[function(require,module,exports){
"use strict";var _=require("lodash"),xmldom=require("xmldom"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Transform=require("../objects/transform"),trim=function(t){return t.replace(/^\s+|\s+$/g,"")},compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},toNumberArray=function(t){var e,r=trim(compressSpaces((t||"").replace(/,/g," "))).split(" ");for(e=0;e<r.length;e+=1)r[e]=parseFloat(r[e]);return r},applySvgAttributes=function(t,e){function r(t){if(t.commands){var e=c.transformShape(t).commands,o=void 0===a?t.fill:a,i=void 0===n?t.stroke:n,u=void 0===s?t.strokeWidth:s;return void 0!==u&&(u*=c[0]),new Path(e,o,i,u)}return t.shapes?new Group(_.map(t.shapes,r)):void 0}var a,n,s,o,i,c,u;for(e.commands&&(a="black"),o=[],i={},i.translate=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||0;return(new Transform).translate(r,a)},i.scale=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||r;return(new Transform).scale(r,a)},i.rotate=function(t){var e,r=toNumberArray(t),a=r[0],n=r[1]||0,s=r[2]||0;return e=new Transform,e=e.translate(n,s),e=e.rotate(a),e=e.translate(-n,-s)},i.matrix=function(t){var e=toNumberArray(t);return[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]},_.each(t.attributes,function(t){var e,r,l,h,m;switch(e=t.nodeName){case"transform":for(r=trim(compressSpaces(t.nodeValue)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),u=0;u<r.length;u+=1)l=trim(r[u].split("(")[0]),h=r[u].split("(")[1].replace(")",""),c=i[l](h),o.push(c);break;case"visibility":break;case"stroke-linecap":break;case"stroke-linejoin":break;case"stroke-miterlimit":break;case"stroke-width":s=parseFloat(t.nodeValue);break;case"stroke-opacity":case"fill-opacity":break;case"fill":a=t.nodeValue;break;case"stroke":n=t.nodeValue;break;case"style":m={},_.each(t.nodeValue.split(";"),function(t){var e=t.split(":");m[e[0].trim()]=e[1]}),m.fill&&(a=m.fill),m.stroke&&(n=m.stroke),m["stroke-width"]&&(s=parseFloat(m["stroke-width"]))}}),a=void 0===a?a:Color.parse(a),n=void 0===n?n:Color.parse(n),c=new Transform,u=0;u<o.length;u+=1)c=c.append(o[u]);return r(e)},arcToSegments=function(t,e,r,a,n,s,o,i,c){var u,l,h,m,p,d,g,v,f,b,y,A,C,x,P,k,w,S,M,T,F,q,$,E,L,z,V;for(u=o*(Math.PI/180),l=Math.sin(u),h=Math.cos(u),r=Math.abs(r),a=Math.abs(a),m=h*(i-t)*.5+l*(c-e)*.5,p=h*(c-e)*.5-l*(i-t)*.5,d=m*m/(r*r)+p*p/(a*a),d>1&&(d=Math.sqrt(d),r*=d,a*=d),g=h/r,v=l/r,f=-l/a,b=h/a,y=g*i+v*c,A=f*i+b*c,C=g*t+v*e,x=f*t+b*e,P=(C-y)*(C-y)+(x-A)*(x-A),k=1/P-.25,0>k&&(k=0),w=Math.sqrt(k),s===n&&(w=-w),S=.5*(y+C)-w*(x-A),M=.5*(A+x)+w*(C-y),T=Math.atan2(A-M,y-S),F=Math.atan2(x-M,C-S),q=F-T,0>q&&1===s?q+=2*Math.PI:q>0&&0===s&&(q-=2*Math.PI),$=Math.ceil(Math.abs(q/(.5*Math.PI+.001))),E=[],V=0;$>V;V+=1)L=T+V*q/$,z=T+(V+1)*q/$,E[V]=[S,M,L,z,r,a,l,h];return E},segmentToBezier=function(t,e,r,a,n,s,o,i){var c=i*n,u=-o*s,l=o*n,h=i*s,m=.5*(a-r),p=8/3*Math.sin(.5*m)*Math.sin(.5*m)/Math.sin(m),d=t+Math.cos(r)-p*Math.sin(r),g=e+Math.sin(r)+p*Math.cos(r),v=t+Math.cos(a),f=e+Math.sin(a),b=v+p*Math.sin(a),y=f-p*Math.cos(a);return[c*d+u*g,l*d+h*g,c*b+u*y,l*b+h*y,c*v+u*f,l*v+h*f]},read={svg:function(){return read.g.apply(this,arguments)},g:function(t){var e=[];return _.each(t.childNodes,function(t){var r,a,n;r=t.nodeName,r&&(a=r.replace(/svg\:/gi,"").toLowerCase(),void 0!==read[a]&&(n=read[a].call(this,t),e.push(n)))}),applySvgAttributes(t,new Group(e))},polygon:function(t,e){var r=t.getAttribute("points"),a=new Path;return r.replace(/([\d\.?]+),([\d\.?]+)/g,function(t,e,r){var n=parseFloat(e),s=parseFloat(r);0===a.commands.length?a.moveTo(n,s):a.lineTo(n,s)}),e||a.close(),applySvgAttributes(t,a)},polyline:function(t){return read.polygon(t,!0)},rect:function(t){var e=parseFloat(t.getAttribute("x")),r=parseFloat(t.getAttribute("y")),a=parseFloat(t.getAttribute("width")),n=parseFloat(t.getAttribute("height")),s=new Path;return s.addRect(e,r,a,n),applySvgAttributes(t,s)},ellipse:function(t){var e=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),a=parseFloat(t.getAttribute("rx")),n=parseFloat(t.getAttribute("ry")),s=new Path;return s.addEllipse(e-a,r-n,2*a,2*n),applySvgAttributes(t,s)},circle:function(t){var e=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),a=parseFloat(t.getAttribute("r")),n=new Path;return n.addEllipse(e-a,r-a,2*a,2*a),applySvgAttributes(t,n)},line:function(t){var e=parseFloat(t.getAttribute("x1")),r=parseFloat(t.getAttribute("y1")),a=parseFloat(t.getAttribute("x2")),n=parseFloat(t.getAttribute("y2")),s=new Path;return s.addLine(e,r,a,n),applySvgAttributes(t,s)},path:function(t){var e,r,a,n,s,o,i,c,u,l,h,m,p,d,g,v,f,b,y,A,C,x,P;e=t.getAttribute("d"),e=e.replace(/,/gm," "),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2"),e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=compressSpaces(e),e=trim(e),r=function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!==this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i+=1,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!==this.previousCommand.toLowerCase()&&"s"!==this.previousCommand.toLowerCase()&&"q"!==this.previousCommand.toLowerCase()&&"t"!==this.previousCommand.toLowerCase())return this.current;var t=new Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()?new Point(t.x+this.current.x,t.y+this.current.y):t}};var k=new Path;for(a=new r(e),a.reset();!a.isEnd();)switch(a.nextCommand(),a.command){case"M":case"m":for(n=a.getAsCurrentPoint(),k.moveTo(n.x,n.y),a.start=a.current;!a.isCommandOrEnd();)n=a.getAsCurrentPoint(),k.lineTo(n.x,n.y);break;case"L":case"l":for(;!a.isCommandOrEnd();)n=a.getAsCurrentPoint(),k.lineTo(n.x,n.y);break;case"H":case"h":for(;!a.isCommandOrEnd();)s=new Point((a.isRelativeCommand()?a.current.x:0)+a.getScalar(),a.current.y),a.current=s,k.lineTo(a.current.x,a.current.y);break;case"V":case"v":for(;!a.isCommandOrEnd();)s=new Point(a.current.x,(a.isRelativeCommand()?a.current.y:0)+a.getScalar()),a.current=s,k.lineTo(a.current.x,a.current.y);break;case"C":case"c":for(;!a.isCommandOrEnd();)o=a.current,i=a.getPoint(),c=a.getAsControlPoint(),u=a.getAsCurrentPoint(),k.curveTo(i.x,i.y,c.x,c.y,u.x,u.y);break;case"S":case"s":for(;!a.isCommandOrEnd();)o=a.current,i=a.getReflectedControlPoint(),c=a.getAsControlPoint(),u=a.getAsCurrentPoint(),k.curveTo(i.x,i.y,c.x,c.y,u.x,u.y);break;case"Q":case"q":for(;!a.isCommandOrEnd();)o=a.current,c=a.getAsControlPoint(),u=a.getAsCurrentPoint(),l=o.x+2/3*(c.x-o.x),h=o.y+2/3*(c.y-o.y),m=l+1/3*(u.x-o.x),p=h+1/3*(u.y-o.y),k.curveTo(l,h,m,p,u.x,u.y);break;case"T":case"t":for(;!a.isCommandOrEnd();)o=a.current,c=a.getReflectedControlPoint(),a.control=c,u=a.getAsCurrentPoint(),l=o.x+2/3*(c.x-o.x),h=o.y+2/3*(c.y-o.y),m=l+1/3*(u.x-o.x),p=h+1/3*(u.y-o.y),k.curveTo(l,h,m,p,u.x,u.y);break;case"A":case"a":for(;!a.isCommandOrEnd();)for(o=a.current,d=a.getScalar(),g=a.getScalar(),v=a.getScalar(),f=a.getScalar(),b=a.getScalar(),u=a.getAsCurrentPoint(),y=u.x,A=u.y,C=arcToSegments(y,A,d,g,f,b,v,o.x,o.y),x=0;x<C.length;x+=1)P=segmentToBezier.apply(this,C[x]),k.curveTo.apply(this,P);break;case"Z":case"z":k.close(),a.current=a.start}return applySvgAttributes(t,k)}};exports.interpret=function(t){var e,r=t.tagName.toLowerCase();return void 0===read[r]?null:e=read[r].call(this,t)},exports.parseString=function(t){var e=(new xmldom.DOMParser).parseFromString(t);return e?exports.interpret(e.documentElement):void 0};
},{"../objects/color":10,"../objects/group":11,"../objects/path":13,"../objects/point":14,"../objects/transform":17,"lodash":2,"xmldom":3}]},{},[9])(9)
});